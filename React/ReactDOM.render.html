<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ReactDOM.render | Hello Wold</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="Just playing around">
    
    <link rel="preload" href="/lanjz/assets/css/0.styles.5dda244b.css" as="style"><link rel="preload" href="/lanjz/assets/js/app.35d90876.js" as="script"><link rel="preload" href="/lanjz/assets/js/2.1f844bfd.js" as="script"><link rel="preload" href="/lanjz/assets/js/40.a605179d.js" as="script"><link rel="prefetch" href="/lanjz/assets/js/10.924d60de.js"><link rel="prefetch" href="/lanjz/assets/js/100.8d407ffa.js"><link rel="prefetch" href="/lanjz/assets/js/101.3587bcfd.js"><link rel="prefetch" href="/lanjz/assets/js/102.fa450796.js"><link rel="prefetch" href="/lanjz/assets/js/103.38aec0f3.js"><link rel="prefetch" href="/lanjz/assets/js/104.4e4c6bc1.js"><link rel="prefetch" href="/lanjz/assets/js/105.5ee82c50.js"><link rel="prefetch" href="/lanjz/assets/js/106.76213baa.js"><link rel="prefetch" href="/lanjz/assets/js/107.f4b02586.js"><link rel="prefetch" href="/lanjz/assets/js/108.10b21fd6.js"><link rel="prefetch" href="/lanjz/assets/js/109.ec2bbdea.js"><link rel="prefetch" href="/lanjz/assets/js/11.7ac8cc17.js"><link rel="prefetch" href="/lanjz/assets/js/110.0210daab.js"><link rel="prefetch" href="/lanjz/assets/js/111.587af244.js"><link rel="prefetch" href="/lanjz/assets/js/112.b9489d53.js"><link rel="prefetch" href="/lanjz/assets/js/113.1c382b00.js"><link rel="prefetch" href="/lanjz/assets/js/114.6a976c49.js"><link rel="prefetch" href="/lanjz/assets/js/115.03817d1c.js"><link rel="prefetch" href="/lanjz/assets/js/116.c6be4149.js"><link rel="prefetch" href="/lanjz/assets/js/117.6626f47d.js"><link rel="prefetch" href="/lanjz/assets/js/118.7ebbbb8b.js"><link rel="prefetch" href="/lanjz/assets/js/119.6c3a801e.js"><link rel="prefetch" href="/lanjz/assets/js/12.221dd4ba.js"><link rel="prefetch" href="/lanjz/assets/js/120.c063a068.js"><link rel="prefetch" href="/lanjz/assets/js/121.ebb3e3b6.js"><link rel="prefetch" href="/lanjz/assets/js/122.83bbb2a1.js"><link rel="prefetch" href="/lanjz/assets/js/123.b256f67e.js"><link rel="prefetch" href="/lanjz/assets/js/124.4c95d6a9.js"><link rel="prefetch" href="/lanjz/assets/js/125.926d269e.js"><link rel="prefetch" href="/lanjz/assets/js/126.0585cbb4.js"><link rel="prefetch" href="/lanjz/assets/js/127.3c9ebec7.js"><link rel="prefetch" href="/lanjz/assets/js/128.9f17b1be.js"><link rel="prefetch" href="/lanjz/assets/js/129.7fe99b78.js"><link rel="prefetch" href="/lanjz/assets/js/13.0791c7fc.js"><link rel="prefetch" href="/lanjz/assets/js/130.6a2c28f3.js"><link rel="prefetch" href="/lanjz/assets/js/131.4bcc7270.js"><link rel="prefetch" href="/lanjz/assets/js/132.c9ffdda3.js"><link rel="prefetch" href="/lanjz/assets/js/133.e37317f0.js"><link rel="prefetch" href="/lanjz/assets/js/134.753a8103.js"><link rel="prefetch" href="/lanjz/assets/js/135.e1de3d10.js"><link rel="prefetch" href="/lanjz/assets/js/136.479cdb68.js"><link rel="prefetch" href="/lanjz/assets/js/137.7c7d992e.js"><link rel="prefetch" href="/lanjz/assets/js/138.190123ee.js"><link rel="prefetch" href="/lanjz/assets/js/139.1c1b05b7.js"><link rel="prefetch" href="/lanjz/assets/js/14.f576bc0b.js"><link rel="prefetch" href="/lanjz/assets/js/140.045a5ab8.js"><link rel="prefetch" href="/lanjz/assets/js/141.b0037e81.js"><link rel="prefetch" href="/lanjz/assets/js/142.70ba6149.js"><link rel="prefetch" href="/lanjz/assets/js/143.50243764.js"><link rel="prefetch" href="/lanjz/assets/js/144.99990e73.js"><link rel="prefetch" href="/lanjz/assets/js/145.7e9ed341.js"><link rel="prefetch" href="/lanjz/assets/js/146.92d2e041.js"><link rel="prefetch" href="/lanjz/assets/js/147.2eba07ec.js"><link rel="prefetch" href="/lanjz/assets/js/148.256c77d8.js"><link rel="prefetch" href="/lanjz/assets/js/149.2dde92cc.js"><link rel="prefetch" href="/lanjz/assets/js/15.c0e83a8b.js"><link rel="prefetch" href="/lanjz/assets/js/150.cbf43f2b.js"><link rel="prefetch" href="/lanjz/assets/js/151.ba16d227.js"><link rel="prefetch" href="/lanjz/assets/js/152.dff32759.js"><link rel="prefetch" href="/lanjz/assets/js/153.6b98c0a8.js"><link rel="prefetch" href="/lanjz/assets/js/154.8d242fb2.js"><link rel="prefetch" href="/lanjz/assets/js/155.5612055c.js"><link rel="prefetch" href="/lanjz/assets/js/156.1cd1985e.js"><link rel="prefetch" href="/lanjz/assets/js/157.39cce9a0.js"><link rel="prefetch" href="/lanjz/assets/js/158.45667fca.js"><link rel="prefetch" href="/lanjz/assets/js/159.5b220509.js"><link rel="prefetch" href="/lanjz/assets/js/16.323167f3.js"><link rel="prefetch" href="/lanjz/assets/js/160.ed8c3e6b.js"><link rel="prefetch" href="/lanjz/assets/js/161.134fc5e9.js"><link rel="prefetch" href="/lanjz/assets/js/162.f3a738f9.js"><link rel="prefetch" href="/lanjz/assets/js/163.32cd1984.js"><link rel="prefetch" href="/lanjz/assets/js/164.9796eba6.js"><link rel="prefetch" href="/lanjz/assets/js/165.66eb7a46.js"><link rel="prefetch" href="/lanjz/assets/js/166.b28b85d0.js"><link rel="prefetch" href="/lanjz/assets/js/167.b62f38dc.js"><link rel="prefetch" href="/lanjz/assets/js/168.a7c7bffb.js"><link rel="prefetch" href="/lanjz/assets/js/169.f4f6264d.js"><link rel="prefetch" href="/lanjz/assets/js/17.635311e9.js"><link rel="prefetch" href="/lanjz/assets/js/170.fd4bf07d.js"><link rel="prefetch" href="/lanjz/assets/js/171.a0520c17.js"><link rel="prefetch" href="/lanjz/assets/js/172.8ce690cb.js"><link rel="prefetch" href="/lanjz/assets/js/173.621ae23c.js"><link rel="prefetch" href="/lanjz/assets/js/174.b1e1a371.js"><link rel="prefetch" href="/lanjz/assets/js/175.ff0fb320.js"><link rel="prefetch" href="/lanjz/assets/js/176.395771ed.js"><link rel="prefetch" href="/lanjz/assets/js/177.50393fbc.js"><link rel="prefetch" href="/lanjz/assets/js/178.4f52bcc6.js"><link rel="prefetch" href="/lanjz/assets/js/179.561df49c.js"><link rel="prefetch" href="/lanjz/assets/js/18.afd9c106.js"><link rel="prefetch" href="/lanjz/assets/js/180.4405e329.js"><link rel="prefetch" href="/lanjz/assets/js/181.af2f065f.js"><link rel="prefetch" href="/lanjz/assets/js/182.fd453957.js"><link rel="prefetch" href="/lanjz/assets/js/183.0b5d338e.js"><link rel="prefetch" href="/lanjz/assets/js/184.4093bce8.js"><link rel="prefetch" href="/lanjz/assets/js/185.acde64c9.js"><link rel="prefetch" href="/lanjz/assets/js/186.8bc84637.js"><link rel="prefetch" href="/lanjz/assets/js/187.600fbb6a.js"><link rel="prefetch" href="/lanjz/assets/js/188.4aaf6d08.js"><link rel="prefetch" href="/lanjz/assets/js/189.8b97e0a7.js"><link rel="prefetch" href="/lanjz/assets/js/19.562ad9c4.js"><link rel="prefetch" href="/lanjz/assets/js/190.e539fa4e.js"><link rel="prefetch" href="/lanjz/assets/js/191.83690a66.js"><link rel="prefetch" href="/lanjz/assets/js/192.aa8a5708.js"><link rel="prefetch" href="/lanjz/assets/js/193.ab21ac51.js"><link rel="prefetch" href="/lanjz/assets/js/194.1d1f6274.js"><link rel="prefetch" href="/lanjz/assets/js/195.9f5b406c.js"><link rel="prefetch" href="/lanjz/assets/js/196.a024c7ff.js"><link rel="prefetch" href="/lanjz/assets/js/197.d2411031.js"><link rel="prefetch" href="/lanjz/assets/js/198.068fb43e.js"><link rel="prefetch" href="/lanjz/assets/js/199.c1f97b3b.js"><link rel="prefetch" href="/lanjz/assets/js/20.eb53d3ba.js"><link rel="prefetch" href="/lanjz/assets/js/200.0eb57666.js"><link rel="prefetch" href="/lanjz/assets/js/201.b785b954.js"><link rel="prefetch" href="/lanjz/assets/js/202.e04537a4.js"><link rel="prefetch" href="/lanjz/assets/js/203.449cb3ce.js"><link rel="prefetch" href="/lanjz/assets/js/204.22784585.js"><link rel="prefetch" href="/lanjz/assets/js/205.81ba8682.js"><link rel="prefetch" href="/lanjz/assets/js/206.5e6c726e.js"><link rel="prefetch" href="/lanjz/assets/js/207.7177ea2f.js"><link rel="prefetch" href="/lanjz/assets/js/208.26a0e682.js"><link rel="prefetch" href="/lanjz/assets/js/209.eceab644.js"><link rel="prefetch" href="/lanjz/assets/js/21.2bc3237b.js"><link rel="prefetch" href="/lanjz/assets/js/210.7cfd9a32.js"><link rel="prefetch" href="/lanjz/assets/js/211.31086000.js"><link rel="prefetch" href="/lanjz/assets/js/212.5d44ea9b.js"><link rel="prefetch" href="/lanjz/assets/js/213.1c67cb4a.js"><link rel="prefetch" href="/lanjz/assets/js/214.ea3dea31.js"><link rel="prefetch" href="/lanjz/assets/js/215.95910f29.js"><link rel="prefetch" href="/lanjz/assets/js/216.6b41f7ba.js"><link rel="prefetch" href="/lanjz/assets/js/217.f507ae63.js"><link rel="prefetch" href="/lanjz/assets/js/22.57f5c0a8.js"><link rel="prefetch" href="/lanjz/assets/js/23.25f767f0.js"><link rel="prefetch" href="/lanjz/assets/js/24.90d598f6.js"><link rel="prefetch" href="/lanjz/assets/js/25.f771ba08.js"><link rel="prefetch" href="/lanjz/assets/js/26.e15fc68b.js"><link rel="prefetch" href="/lanjz/assets/js/27.6cc4709e.js"><link rel="prefetch" href="/lanjz/assets/js/28.b550b8e0.js"><link rel="prefetch" href="/lanjz/assets/js/29.878b4717.js"><link rel="prefetch" href="/lanjz/assets/js/3.bb34471f.js"><link rel="prefetch" href="/lanjz/assets/js/30.16aaf465.js"><link rel="prefetch" href="/lanjz/assets/js/31.89b2a06d.js"><link rel="prefetch" href="/lanjz/assets/js/32.af7564b7.js"><link rel="prefetch" href="/lanjz/assets/js/33.affd281f.js"><link rel="prefetch" href="/lanjz/assets/js/34.4d9638e7.js"><link rel="prefetch" href="/lanjz/assets/js/35.0df2a394.js"><link rel="prefetch" href="/lanjz/assets/js/36.0411e440.js"><link rel="prefetch" href="/lanjz/assets/js/37.dc1331d0.js"><link rel="prefetch" href="/lanjz/assets/js/38.9cdd9b83.js"><link rel="prefetch" href="/lanjz/assets/js/39.50ae0626.js"><link rel="prefetch" href="/lanjz/assets/js/4.4eb4998b.js"><link rel="prefetch" href="/lanjz/assets/js/41.c3724ef5.js"><link rel="prefetch" href="/lanjz/assets/js/42.34a388ad.js"><link rel="prefetch" href="/lanjz/assets/js/43.088a64da.js"><link rel="prefetch" href="/lanjz/assets/js/44.d43ec652.js"><link rel="prefetch" href="/lanjz/assets/js/45.9f27aa3e.js"><link rel="prefetch" href="/lanjz/assets/js/46.af03e616.js"><link rel="prefetch" href="/lanjz/assets/js/47.c09bd90c.js"><link rel="prefetch" href="/lanjz/assets/js/48.23ad19ad.js"><link rel="prefetch" href="/lanjz/assets/js/49.953c9250.js"><link rel="prefetch" href="/lanjz/assets/js/5.afcc5e77.js"><link rel="prefetch" href="/lanjz/assets/js/50.75784381.js"><link rel="prefetch" href="/lanjz/assets/js/51.4345dea5.js"><link rel="prefetch" href="/lanjz/assets/js/52.a518198a.js"><link rel="prefetch" href="/lanjz/assets/js/53.0b15d75a.js"><link rel="prefetch" href="/lanjz/assets/js/54.88123c63.js"><link rel="prefetch" href="/lanjz/assets/js/55.66a15a85.js"><link rel="prefetch" href="/lanjz/assets/js/56.b8d1c7d9.js"><link rel="prefetch" href="/lanjz/assets/js/57.70ed2a60.js"><link rel="prefetch" href="/lanjz/assets/js/58.7ce771aa.js"><link rel="prefetch" href="/lanjz/assets/js/59.9565093e.js"><link rel="prefetch" href="/lanjz/assets/js/6.a5f7bd67.js"><link rel="prefetch" href="/lanjz/assets/js/60.09cd1202.js"><link rel="prefetch" href="/lanjz/assets/js/61.6882b0a0.js"><link rel="prefetch" href="/lanjz/assets/js/62.62670c24.js"><link rel="prefetch" href="/lanjz/assets/js/63.d307f5e9.js"><link rel="prefetch" href="/lanjz/assets/js/64.2877d2d5.js"><link rel="prefetch" href="/lanjz/assets/js/65.9bafe1ee.js"><link rel="prefetch" href="/lanjz/assets/js/66.c0610c62.js"><link rel="prefetch" href="/lanjz/assets/js/67.7a0d00c9.js"><link rel="prefetch" href="/lanjz/assets/js/68.a2e89c92.js"><link rel="prefetch" href="/lanjz/assets/js/69.d3015311.js"><link rel="prefetch" href="/lanjz/assets/js/7.6f1fefd7.js"><link rel="prefetch" href="/lanjz/assets/js/70.bf5582eb.js"><link rel="prefetch" href="/lanjz/assets/js/71.02d916c6.js"><link rel="prefetch" href="/lanjz/assets/js/72.8fedc137.js"><link rel="prefetch" href="/lanjz/assets/js/73.c70634e1.js"><link rel="prefetch" href="/lanjz/assets/js/74.b271a3ce.js"><link rel="prefetch" href="/lanjz/assets/js/75.bcf263e9.js"><link rel="prefetch" href="/lanjz/assets/js/76.4246e4e6.js"><link rel="prefetch" href="/lanjz/assets/js/77.42106870.js"><link rel="prefetch" href="/lanjz/assets/js/78.e18a6ab3.js"><link rel="prefetch" href="/lanjz/assets/js/79.9bcf9f26.js"><link rel="prefetch" href="/lanjz/assets/js/8.2a8acc0c.js"><link rel="prefetch" href="/lanjz/assets/js/80.bba9d72d.js"><link rel="prefetch" href="/lanjz/assets/js/81.fe936d29.js"><link rel="prefetch" href="/lanjz/assets/js/82.5499bb11.js"><link rel="prefetch" href="/lanjz/assets/js/83.5ed1fba7.js"><link rel="prefetch" href="/lanjz/assets/js/84.7db17075.js"><link rel="prefetch" href="/lanjz/assets/js/85.036cff3e.js"><link rel="prefetch" href="/lanjz/assets/js/86.608d6824.js"><link rel="prefetch" href="/lanjz/assets/js/87.ba7398ee.js"><link rel="prefetch" href="/lanjz/assets/js/88.f409d036.js"><link rel="prefetch" href="/lanjz/assets/js/89.83f8faf2.js"><link rel="prefetch" href="/lanjz/assets/js/9.1caf73ef.js"><link rel="prefetch" href="/lanjz/assets/js/90.677eddf2.js"><link rel="prefetch" href="/lanjz/assets/js/91.f81daf6e.js"><link rel="prefetch" href="/lanjz/assets/js/92.f3cff263.js"><link rel="prefetch" href="/lanjz/assets/js/93.c6120ff3.js"><link rel="prefetch" href="/lanjz/assets/js/94.88b374c2.js"><link rel="prefetch" href="/lanjz/assets/js/95.db6d21fb.js"><link rel="prefetch" href="/lanjz/assets/js/96.b4ef58a3.js"><link rel="prefetch" href="/lanjz/assets/js/97.3c597746.js"><link rel="prefetch" href="/lanjz/assets/js/98.57487325.js"><link rel="prefetch" href="/lanjz/assets/js/99.489c55a1.js">
    <link rel="stylesheet" href="/lanjz/assets/css/0.styles.5dda244b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/lanjz/" class="home-link router-link-active"><!----> <span class="site-name">Hello Wold</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/lanjz/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端基础" class="dropdown-title"><span class="title">前端基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端基础" class="mobile-dropdown-title"><span class="title">前端基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/JavaScript/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/ES6/" class="nav-link">
  ES6
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/HTML5/" class="nav-link">
  HTML5
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/CSS/" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Browser/" class="nav-link">
  Browser
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="网络&amp;算法" class="dropdown-title"><span class="title">网络&amp;算法</span> <span class="arrow down"></span></button> <button type="button" aria-label="网络&amp;算法" class="mobile-dropdown-title"><span class="title">网络&amp;算法</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/network/" class="nav-link">
  网络
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Algorithm/" class="nav-link">
  算法
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/secure/" class="nav-link">
  Web安全
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架" class="dropdown-title"><span class="title">框架</span> <span class="arrow down"></span></button> <button type="button" aria-label="框架" class="mobile-dropdown-title"><span class="title">框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/Vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Vue3/" class="nav-link">
  Vue3
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/React/" class="nav-link router-link-active">
  React
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/qiankun/" class="nav-link">
  qiankun
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/NA/" class="nav-link">
  跨平台
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Node" class="dropdown-title"><span class="title">Node</span> <span class="arrow down"></span></button> <button type="button" aria-label="Node" class="mobile-dropdown-title"><span class="title">Node</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/Node/基础/" class="nav-link">
  基础
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Node/Api/" class="nav-link">
  API
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Node/Package/" class="nav-link">
  yarn&amp;npm
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Node/Webpack/" class="nav-link">
  Webpack
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Node/Vite/" class="nav-link">
  Vite
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Node/ESBuild/" class="nav-link">
  esbuild
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Node/数据库/" class="nav-link">
  SQL
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工程化" class="dropdown-title"><span class="title">工程化</span> <span class="arrow down"></span></button> <button type="button" aria-label="工程化" class="mobile-dropdown-title"><span class="title">工程化</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/工程化/前端优化总结/" class="nav-link">
  前端优化总结
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/系统设计/" class="nav-link">
  系统设计
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/预加载&amp;预解析.html" class="nav-link">
  预加载&amp;预解析
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/重构改善既有代码的设计.html" class="nav-link">
  重构代码原则
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/开发与调试技巧.html" class="nav-link">
  开发与调试
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/组件设计的基本原则.html" class="nav-link">
  组件设计
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/公共模块管理.html" class="nav-link">
  公共模块管理
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/内存泄漏.html" class="nav-link">
  内存泄漏
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/前端异常捕获.html" class="nav-link">
  前端异常捕获
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/自动化部署.html" class="nav-link">
  自动化部署
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/疑难杂症.html" class="nav-link">
  问题小计
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/性能指标.html" class="nav-link">
  性能指标
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="利其器" class="dropdown-title"><span class="title">利其器</span> <span class="arrow down"></span></button> <button type="button" aria-label="利其器" class="mobile-dropdown-title"><span class="title">利其器</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/利其器/Mac.html" class="nav-link">
  Mac
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/利其器/Github.html" class="nav-link">
  Github
</a></li></ul></div></div><div class="nav-item"><a href="/lanjz/Im/" class="nav-link">
  关于我
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/lanjz/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端基础" class="dropdown-title"><span class="title">前端基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端基础" class="mobile-dropdown-title"><span class="title">前端基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/JavaScript/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/ES6/" class="nav-link">
  ES6
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/HTML5/" class="nav-link">
  HTML5
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/CSS/" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Browser/" class="nav-link">
  Browser
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="网络&amp;算法" class="dropdown-title"><span class="title">网络&amp;算法</span> <span class="arrow down"></span></button> <button type="button" aria-label="网络&amp;算法" class="mobile-dropdown-title"><span class="title">网络&amp;算法</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/network/" class="nav-link">
  网络
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Algorithm/" class="nav-link">
  算法
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/secure/" class="nav-link">
  Web安全
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架" class="dropdown-title"><span class="title">框架</span> <span class="arrow down"></span></button> <button type="button" aria-label="框架" class="mobile-dropdown-title"><span class="title">框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/Vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Vue3/" class="nav-link">
  Vue3
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/React/" class="nav-link router-link-active">
  React
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/qiankun/" class="nav-link">
  qiankun
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/NA/" class="nav-link">
  跨平台
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Node" class="dropdown-title"><span class="title">Node</span> <span class="arrow down"></span></button> <button type="button" aria-label="Node" class="mobile-dropdown-title"><span class="title">Node</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/Node/基础/" class="nav-link">
  基础
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Node/Api/" class="nav-link">
  API
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Node/Package/" class="nav-link">
  yarn&amp;npm
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Node/Webpack/" class="nav-link">
  Webpack
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Node/Vite/" class="nav-link">
  Vite
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Node/ESBuild/" class="nav-link">
  esbuild
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Node/数据库/" class="nav-link">
  SQL
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工程化" class="dropdown-title"><span class="title">工程化</span> <span class="arrow down"></span></button> <button type="button" aria-label="工程化" class="mobile-dropdown-title"><span class="title">工程化</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/工程化/前端优化总结/" class="nav-link">
  前端优化总结
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/系统设计/" class="nav-link">
  系统设计
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/预加载&amp;预解析.html" class="nav-link">
  预加载&amp;预解析
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/重构改善既有代码的设计.html" class="nav-link">
  重构代码原则
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/开发与调试技巧.html" class="nav-link">
  开发与调试
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/组件设计的基本原则.html" class="nav-link">
  组件设计
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/公共模块管理.html" class="nav-link">
  公共模块管理
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/内存泄漏.html" class="nav-link">
  内存泄漏
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/前端异常捕获.html" class="nav-link">
  前端异常捕获
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/自动化部署.html" class="nav-link">
  自动化部署
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/疑难杂症.html" class="nav-link">
  问题小计
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/性能指标.html" class="nav-link">
  性能指标
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="利其器" class="dropdown-title"><span class="title">利其器</span> <span class="arrow down"></span></button> <button type="button" aria-label="利其器" class="mobile-dropdown-title"><span class="title">利其器</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/利其器/Mac.html" class="nav-link">
  Mac
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/利其器/Github.html" class="nav-link">
  Github
</a></li></ul></div></div><div class="nav-item"><a href="/lanjz/Im/" class="nav-link">
  关于我
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/lanjz/React/vsVue.html" class="sidebar-link">vsVue</a></li><li><a href="/lanjz/React/ReactDOM.render.html" aria-current="page" class="active sidebar-link">ReactDOM.render</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/lanjz/React/ReactDOM.render.html#源码跟踪" class="sidebar-link">源码跟踪</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/lanjz/React/ReactDOM.render.html#legacycreaterootfromdomcontainer" class="sidebar-link">legacyCreateRootFromDOMContainer</a></li><li class="sidebar-sub-header"><a href="/lanjz/React/ReactDOM.render.html#createlegacyroot" class="sidebar-link">createLegacyRoot</a></li><li class="sidebar-sub-header"><a href="/lanjz/React/ReactDOM.render.html#reactdomblockingroot" class="sidebar-link">ReactDOMBlockingRoot</a></li><li class="sidebar-sub-header"><a href="/lanjz/React/ReactDOM.render.html#createrootimpl" class="sidebar-link">createRootImpl</a></li><li class="sidebar-sub-header"><a href="/lanjz/React/ReactDOM.render.html#createcontainer" class="sidebar-link">createContainer</a></li><li class="sidebar-sub-header"><a href="/lanjz/React/ReactDOM.render.html#小结" class="sidebar-link">小结</a></li><li class="sidebar-sub-header"><a href="/lanjz/React/ReactDOM.render.html#unbatchedupdates" class="sidebar-link">unbatchedUpdates</a></li><li class="sidebar-sub-header"><a href="/lanjz/React/ReactDOM.render.html#updatecontainer" class="sidebar-link">updateContainer</a></li></ul></li><li class="sidebar-sub-header"><a href="/lanjz/React/ReactDOM.render.html#总结" class="sidebar-link">总结</a></li></ul></li><li><a href="/lanjz/React/Fiber.html" class="sidebar-link">Fiber</a></li><li><a href="/lanjz/React/时间切片.html" class="sidebar-link">时间切片</a></li><li><a href="/lanjz/React/Diff.html" class="sidebar-link">React16 Diff</a></li><li><a href="/lanjz/React/高阶组件.html" class="sidebar-link">memo</a></li><li><a href="/lanjz/React/React16新特性.html" class="sidebar-link">React16新特性</a></li><li><a href="/lanjz/React/Hook.html" class="sidebar-link">Hook</a></li><li><a href="/lanjz/React/性能优化.html" class="sidebar-link">性能优化</a></li><li><a href="/lanjz/React/React高级指引.html" class="sidebar-link">高级指引</a></li><li><a href="/lanjz/React/服务端渲染.html" class="sidebar-link">React SSR</a></li><li><a href="/lanjz/React/吱不吱.html" class="sidebar-link">吱不吱</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="reactdom-render"><a href="#reactdom-render" class="header-anchor">#</a> ReactDOM.render</h1> <p><code>ReactDOM.render(element, container[, callback])</code></p> <p>eg:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> root <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span>
root<span class="token punctuation">.</span>id <span class="token operator">=</span> <span class="token string">'app'</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span>

<span class="token keyword">const</span> App <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span>Hello World<span class="token operator">!</span><span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span><span class="token punctuation">)</span>

<span class="token function">render</span><span class="token punctuation">(</span>App<span class="token punctuation">,</span> root<span class="token punctuation">)</span>
</code></pre></div><p>在提供的 <code>container</code> 里渲染一个 React 元素，并返回对该组件的引用（或者针对无状态组件返回 <code>null</code>）</p> <p>如果 React 元素之前已经在 <code>container</code> 里渲染过，这将会对其执行更新操作，并仅会在必要时改变 DOM 以映射最新的 React 元素</p> <p>如果提供了可选的回调函数，该回调将在组件被渲染或更新之后被执行</p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p><code>ReactDOM.render()</code> 会控制你传入容器节点里的内容。当首次调用时，容器节点里的所有 DOM 元素都会被替换，后续的调用则会使用 React 的 DOM 差分算法（DOM diffing algorithm）进行高效的更新。</p> <p><code>ReactDOM.render()</code> 不会修改容器节点（只会修改容器的子节点）。可以在不覆盖现有子节点的情况下，将组件插入已有的 DOM 节点中。</p> <p><code>ReactDOM.render()</code> 目前会返回对根组件 ReactComponent 实例的引用。 但是，目前应该避免使用返回的引用，因为它是历史遗留下来的内容，而且在未来版本的 React 中，组件渲染在某些情况下可能会是异步的。 如果你真的需要获得对根组件 ReactComponent 实例的引用，那么推荐为根元素添加 <code>callback ref</code>。</p> <p>使用 <code>ReactDOM.render()</code> 对服务端渲染容器进行 hydrate 操作的方式已经被废弃，并且会在 React 17 被移除。作为替代，请使用 <code>hydrate()</code>。</p></div> <p><code>ReactDOM.render</code> 用于初次渲染时将 React 应用挂载在 DOM 元素上</p> <p>对于 React 项目，平时会以 jsx 的格式进行开发，但是 jsx 并不是标准的格式，所以需要 label 进行转议，以上面 eg 代码为例，最终会转换成以下形式的代码：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> root <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;div&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
root<span class="token punctuation">.</span>id <span class="token operator">=</span> <span class="token string">&quot;app&quot;</span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> App <span class="token operator">=</span> <span class="token comment">/*#__PURE__*/</span> React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;h2&quot;</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">&quot;Hello World!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">render</span><span class="token punctuation">(</span>App<span class="token punctuation">,</span> root<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>jsx 编写的组件会转议成 <code>React.createElement</code> 的形式，所以 React 最终是通过 <code>React.createElement</code> 来创建一个 <code>reactElement</code></p> <p>在现在的 React 中 <code>reactElement</code> 也被称为是 <code>fiber 树</code>，<code>fiber树</code> 是 DOM 树的数据模型</p> <h2 id="源码跟踪"><a href="#源码跟踪" class="header-anchor">#</a> 源码跟踪</h2> <p><code>ReactDom.render</code> 的源码定义：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">render</span><span class="token punctuation">(</span><span class="token parameter">element<span class="token punctuation">,</span> container<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 忽略部分代码</span>
  <span class="token keyword">return</span> <span class="token function">legacyRenderSubtreeIntoContainer</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> element<span class="token punctuation">,</span> container<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>执行 <code>ReactDOM.render</code> 返回的  <code>legacyRenderSubtreeIntoContainer</code> 方法函数调用的结果，该方法传入五个参数：</p> <ul><li><p><code>null</code>: <code>parentComponent</code></p></li> <li><p><code>element</code>：<code>ReactDOM.render</code> 的第一个参数，React 元素也就是一个 <code>ReactElement</code></p></li> <li><p><code>container</code> ： <code>ReactDOM.render</code> 的第二个参数，挂载 React 元素的一个 element容器</p></li> <li><p><code>false</code>： <code>forceHydrate</code> 服务端渲染用的，可以忽略</p></li> <li><p><code>callback</code>：<code>ReactDOM.render</code> 的第三个参数，一个回调函数</p></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">legacyRenderSubtreeIntoContainer</span><span class="token punctuation">(</span><span class="token parameter">parentComponent<span class="token punctuation">,</span> children<span class="token punctuation">,</span> container<span class="token punctuation">,</span> forceHydrate<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> root <span class="token operator">=</span> container<span class="token punctuation">.</span>_reactRootContainer<span class="token punctuation">;</span>
  <span class="token keyword">var</span> fiberRoot<span class="token punctuation">;</span>
  <span class="token comment">// 首次执行时 `container` 是要挂载的目标节点，此时它是没有 `_reactRootContainer` 属性的</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>root<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 创建一个ReactRooter</span>
    root <span class="token operator">=</span> container<span class="token punctuation">.</span>_reactRootContainer <span class="token operator">=</span> <span class="token function">legacyCreateRootFromDOMContainer</span><span class="token punctuation">(</span>container<span class="token punctuation">,</span> forceHydrate<span class="token punctuation">)</span><span class="token punctuation">;</span>
    fiberRoot <span class="token operator">=</span> root<span class="token punctuation">.</span>_internalRoot<span class="token punctuation">;</span>

    <span class="token comment">//初始化安装不需要批量更新</span>
    <span class="token function">unbatchedUpdates</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">updateContainer</span><span class="token punctuation">(</span>children<span class="token punctuation">,</span> fiberRoot<span class="token punctuation">,</span> parentComponent<span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span> <span class="token comment">// 非首次执行</span>
    fiberRoot <span class="token operator">=</span> root<span class="token punctuation">.</span>_internalRoot<span class="token punctuation">;</span>
    <span class="token function">updateContainer</span><span class="token punctuation">(</span>children<span class="token punctuation">,</span> fiberRoot<span class="token punctuation">,</span> parentComponent<span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token function">getPublicRootInstance</span><span class="token punctuation">(</span>fiberRoot<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 返回fiberRoot</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>legacyRenderSubtreeIntoContainer()</code> （翻译成啥啥渲染子数到容器），在当前例子中执行这个函数时传进来的参数为：</p> <ul><li><p>首次渲染 <code>container._reactRootContainer</code> 肯定为空</p></li> <li><p>调用 <code>legacyCreateRootFromDOMContainer</code> 函数创建 <code>ReactDOMBlockingRoot</code> 赋值给 <code>root</code> 和 <code>container._reactRootContainer</code>，函数内也同时创建了 <code>fiberRootNode</code> 保存在 <code>_internalRoot</code> 属性中</p></li> <li><p>赋值 <code>fiberRootNode</code> 给 <code>fiberRoot</code></p></li> <li><p>调用 <code>unbatchedUpdates</code> 函数，取消批量更新</p></li></ul> <p><img src="/lanjz/assets/img/render_1.048d19be.png" alt=""></p> <h3 id="legacycreaterootfromdomcontainer"><a href="#legacycreaterootfromdomcontainer" class="header-anchor">#</a> legacyCreateRootFromDOMContainer</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">legacyCreateRootFromDOMContainer</span><span class="token punctuation">(</span><span class="token parameter">container<span class="token punctuation">,</span> forceHydrate</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token comment">// 判断是否服务端渲染</span>
   <span class="token keyword">var</span> shouldHydrate <span class="token operator">=</span> forceHydrate <span class="token operator">||</span> <span class="token function">shouldHydrateDueToLegacyHeuristic</span><span class="token punctuation">(</span>container<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>shouldHydrate<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> rootSibling<span class="token punctuation">;</span>
      <span class="token comment">// 删除container中的内容</span>
      <span class="token keyword">while</span> <span class="token punctuation">(</span>rootSibling <span class="token operator">=</span> container<span class="token punctuation">.</span>lastChild<span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token punctuation">{</span>
            container<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>rootSibling<span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span> <span class="token function">createLegacyRoot</span><span class="token punctuation">(</span>container<span class="token punctuation">,</span> shouldHydrate <span class="token operator">?</span> <span class="token punctuation">{</span>
         hydrate<span class="token operator">:</span> <span class="token boolean">true</span>
      <span class="token punctuation">}</span> <span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><p>这个函数其实就做了一件事，就是遍历删除 <code>container</code> 中的内容</p></li> <li><p>然后调用 <code>createLegacyRoot</code> 生成 ReactRooter</p></li></ul> <h3 id="createlegacyroot"><a href="#createlegacyroot" class="header-anchor">#</a> createLegacyRoot</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">createLegacyRoot</span><span class="token punctuation">(</span><span class="token parameter">container<span class="token punctuation">,</span> options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// createLegacyRoot 方法返回 ReactDOMBlockingRoot 的实例</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ReactDOMBlockingRoot</span><span class="token punctuation">(</span>container<span class="token punctuation">,</span> LegacyRoot<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>new</code> 了一个 <code>ReactDOMBlockingRoot</code> 传递了三个参数</p> <ul><li><p>container：DOM Element</p></li> <li><p>LegacyRoot：一个常量，这里表示 <code>blockingRoot</code></p></li> <li><p>options: 可以忽略，就是那个 <code>hydrate</code></p></li></ul> <h3 id="reactdomblockingroot"><a href="#reactdomblockingroot" class="header-anchor">#</a> ReactDOMBlockingRoot</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">ReactDOMBlockingRoot</span><span class="token punctuation">(</span><span class="token parameter">container<span class="token punctuation">,</span> tag<span class="token punctuation">,</span> options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>_internalRoot <span class="token operator">=</span> <span class="token function">createRootImpl</span><span class="token punctuation">(</span>container<span class="token punctuation">,</span> tag<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在 <code>_internalRoot</code> 赋值 <code>createRootImpl</code> 函数调用的结果，在之前 <code>legacyRenderSubtreeIntoContainer</code> 方法中 <code>fiberRoot = root._internalRoot</code> 就是这里来的</p> <h3 id="createrootimpl"><a href="#createrootimpl" class="header-anchor">#</a> createRootImpl</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">createRootImpl</span><span class="token punctuation">(</span><span class="token parameter">container<span class="token punctuation">,</span> tag<span class="token punctuation">,</span> options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Tag is either LegacyRoot or Concurrent Root</span>
  <span class="token keyword">var</span> hydrate <span class="token operator">=</span> options <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> options<span class="token punctuation">.</span>hydrate <span class="token operator">===</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> hydrationCallbacks <span class="token operator">=</span> options <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> options<span class="token punctuation">.</span>hydrationOptions <span class="token operator">||</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token comment">// 创建React容器 fiberRootNode</span>
  <span class="token keyword">var</span> root <span class="token operator">=</span> <span class="token function">createContainer</span><span class="token punctuation">(</span>container<span class="token punctuation">,</span> tag<span class="token punctuation">,</span> hydrate<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 将fiberNode 挂载到container对象上</span>
  <span class="token function">markContainerAsRoot</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>current<span class="token punctuation">,</span> container<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> root<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 给当前 DOM 节点标记一个 internalContainerInstanceKey 属性</span>
<span class="token comment">// internalContainerInstanceKey=__reactContainere$wyxea1uq6a</span>
<span class="token keyword">function</span> <span class="token function">markContainerAsRoot</span><span class="token punctuation">(</span><span class="token parameter">hostRoot<span class="token punctuation">,</span> node</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   node<span class="token punctuation">[</span>internalContainerInstanceKey<span class="token punctuation">]</span> <span class="token operator">=</span> hostRoot<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><p>调用 <code>createContainer</code> 创建 FiberNode 对象</p></li> <li><p><code>markContainerAsRoot</code> 函数只是将最终返回的 FiberRoot对象上的 <code>current</code> 属性挂载到了 <code>container</code> 上面</p></li></ul> <h3 id="createcontainer"><a href="#createcontainer" class="header-anchor">#</a> createContainer</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 创建 FiberRoot</span>
<span class="token keyword">function</span> <span class="token function">createContainer</span><span class="token punctuation">(</span><span class="token parameter">containerInfo<span class="token punctuation">,</span> tag<span class="token punctuation">,</span> hydrate<span class="token punctuation">,</span> hydrationCallbacks</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 调用createFiberRoot</span>
  <span class="token keyword">return</span> <span class="token function">createFiberRoot</span><span class="token punctuation">(</span>containerInfo<span class="token punctuation">,</span> tag<span class="token punctuation">,</span> hydrate<span class="token punctuation">,</span> hydrationCallbacks<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// createFiberRoot</span>
<span class="token keyword">function</span> <span class="token function">createFiberRoot</span><span class="token punctuation">(</span><span class="token parameter">containerInfo<span class="token punctuation">,</span> tag<span class="token punctuation">,</span> hydrate<span class="token punctuation">,</span> hydrationCallbacks</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 创建fiber树root节点</span>
  <span class="token keyword">var</span> root <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FiberRootNode</span><span class="token punctuation">(</span>containerInfo<span class="token punctuation">,</span> tag<span class="token punctuation">,</span> hydrate<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> uninitializedFiber <span class="token operator">=</span> <span class="token function">createHostRootFiber</span><span class="token punctuation">(</span>tag<span class="token punctuation">)</span><span class="token punctuation">;</span>
  root<span class="token punctuation">.</span>current <span class="token operator">=</span> uninitializedFiber<span class="token punctuation">;</span>
  uninitializedFiber<span class="token punctuation">.</span>stateNode <span class="token operator">=</span> root<span class="token punctuation">;</span>
  <span class="token function">initializeUpdateQueue</span><span class="token punctuation">(</span>uninitializedFiber<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> root<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><p><code>new FiberRootNode</code>： 就是实例化了一个FiberRoot对象</p></li> <li><p><code>createHostRootFiber</code>：创建的是一个Fiber对象，这个Fiber也经常被叫 RootFiber ,并且保存到 <code>FiberRoot.current</code> 下面</p></li> <li><p><code>initializeUpdateQueue</code>：创建一个更新队列，挂载 <code>fiber.updateQueue</code> 下面</p></li> <li><p>最后进行返回 <code>root</code></p></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// tag = 0</span>
<span class="token keyword">function</span> <span class="token function">createHostRootFiber</span><span class="token punctuation">(</span><span class="token parameter">tag</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> mode<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>tag <span class="token operator">===</span> ConcurrentRoot<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    mode <span class="token operator">=</span> ConcurrentMode <span class="token operator">|</span> BlockingMode <span class="token operator">|</span> StrictMode<span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>tag <span class="token operator">===</span> BlockingRoot<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    mode <span class="token operator">=</span> BlockingMode <span class="token operator">|</span> StrictMode<span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token comment">// 执行到这里</span>
    mode <span class="token operator">=</span> NoMode<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 此时 mode=0</span>
  <span class="token keyword">return</span> <span class="token function">createFiber</span><span class="token punctuation">(</span>HostRoot<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> mode<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// createFiber 创建 fiber</span>
<span class="token keyword">var</span> <span class="token function-variable function">createFiber</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">tag<span class="token punctuation">,</span> pendingProps<span class="token punctuation">,</span> key<span class="token punctuation">,</span> mode</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// $FlowFixMe: the shapes are exact here but Flow doesn't like constructors</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">FiberNode</span><span class="token punctuation">(</span>tag<span class="token punctuation">,</span> pendingProps<span class="token punctuation">,</span> key<span class="token punctuation">,</span> mode<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>整理一个流程</p> <p><img src="/lanjz/assets/img/render_2.05813b40.png" alt=""></p> <h3 id="小结"><a href="#小结" class="header-anchor">#</a> 小结</h3> <ul><li><p>root = container._reactRootContainer = ReactDOMBlockingRoot</p></li> <li><p>root._internalRoot = fiberRootNode</p></li></ul> <p>root 对象（container._reactRootContainer）上有一个 <code>_internalRoot</code> 属性，这个 <code>_internalRoot</code> 也就是一个 FiberRootNode 对象，其中包含一个 <code>current</code> 属性，<code>current</code> 对象是一个 Fiber节点，不仅如此，它还是当前 Fiber 树的头部节点</p> <p>所以在执行 <code>unbatchedUpdates()</code> 之前 <code>render</code> 主要是 <strong>完成 Fiber 树中基本实体的创建</strong> 其中</p> <ul><li><p>fiberRoot 的关联对象是真实 DOM 的容器节点</p></li> <li><p>rootFiber 则作为虚拟 DOM 的根节点存在</p></li></ul> <p>接下来，<code>fiberRoot</code> 将和 <code>ReactDOM.render</code> 方法的其他入参一起，被传入 <code>updateContainer</code> 方法，从而形成一个回调。这个回调，正是接下来要调用的 <code>unbatchedUpdates</code> 方法的入参</p> <h3 id="unbatchedupdates"><a href="#unbatchedupdates" class="header-anchor">#</a> unbatchedUpdates</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">unbatchedUpdates</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> a</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 <span class="token keyword">var</span> prevExecutionContext <span class="token operator">=</span> executionContext<span class="token punctuation">;</span>
 <span class="token comment">// 这里是对上下文的处理，不用关注</span>
 <span class="token comment">// 去除executionContext上的BatchedContext</span>
 executionContext <span class="token operator">&amp;=</span> <span class="token operator">~</span>BatchedContext<span class="token punctuation">;</span>
 <span class="token comment">// 往executionContext上添加LegacyUnbatchedContext</span>
 executionContext <span class="token operator">|=</span> LegacyUnbatchedContext<span class="token punctuation">;</span>

 <span class="token keyword">try</span> <span class="token punctuation">{</span>
   <span class="token keyword">return</span> <span class="token function">fn</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
    <span class="token comment">// finally 逻辑里是对回调队列的处理，此处不用太关注</span>
   executionContext <span class="token operator">=</span> prevExecutionContext<span class="token punctuation">;</span>
   <span class="token keyword">if</span> <span class="token punctuation">(</span>executionContext <span class="token operator">===</span> NoContext<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 刷新同步任务队列</span>
     <span class="token function">flushSyncCallbackQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><p>修改 <code>executionContext</code> 这个变量，让他含有 <code>LegacyUnbatchedContext</code>，也就是非批量更新模式</p></li> <li><p>然后就是 <code>fn()</code> 执行传入的回调函数 <code>updateContainer</code></p></li> <li><p>最后会执行 <code>flushSyncCallbackQueue</code>，刷新同步任务队列</p></li></ul> <h3 id="updatecontainer"><a href="#updatecontainer" class="header-anchor">#</a> updateContainer</h3> <p>此时参数依次为：</p> <ul><li><p><code>children</code>：App 组件</p></li> <li><p><code>fiberRoot</code>: 上一步创建的 <code>FilberRoot</code></p></li> <li><p><code>parentComponent</code>： <code>null</code></p></li> <li><p><code>callback</code>: <code>undefined</code></p></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">updateContainer</span><span class="token punctuation">(</span><span class="token parameter">element<span class="token punctuation">,</span> container<span class="token punctuation">,</span> parentComponent<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">{</span>
    <span class="token function">onScheduleRoot</span><span class="token punctuation">(</span>container<span class="token punctuation">,</span> element<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">var</span> current$<span class="token number">1</span> <span class="token operator">=</span> container<span class="token punctuation">.</span>current<span class="token punctuation">;</span>
  <span class="token comment">// 计算新开始的时间</span>
  <span class="token keyword">var</span> currentTime <span class="token operator">=</span> <span class="token function">requestCurrentTimeForUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token comment">// 创建优先级</span>
  <span class="token keyword">var</span> suspenseConfig <span class="token operator">=</span> <span class="token function">requestCurrentSuspenseConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 计算过期时间</span>
  <span class="token keyword">var</span> expirationTime <span class="token operator">=</span> <span class="token function">computeExpirationForFiber</span><span class="token punctuation">(</span>currentTime<span class="token punctuation">,</span> current$<span class="token number">1</span><span class="token punctuation">,</span> suspenseConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 由于parentComponent为null,所以返回空对象{}</span>
  <span class="token keyword">var</span> context <span class="token operator">=</span> <span class="token function">getContextForSubtree</span><span class="token punctuation">(</span>parentComponent<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>container<span class="token punctuation">.</span>context <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    container<span class="token punctuation">.</span>context <span class="token operator">=</span> context<span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    container<span class="token punctuation">.</span>pendingContext <span class="token operator">=</span> context<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>isRendering <span class="token operator">&amp;&amp;</span> current <span class="token operator">!==</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>didWarnAboutNestedUpdates<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      didWarnAboutNestedUpdates <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 结合 suspenseConfig（优先级）信息，创建 update 对象，一个 update 对象意味着一个更新</span>
  <span class="token keyword">var</span> update <span class="token operator">=</span> <span class="token function">createUpdate</span><span class="token punctuation">(</span>expirationTime<span class="token punctuation">,</span> suspenseConfig<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Caution: React DevTools currently depends on this property</span>

  <span class="token comment">// update 的 payload 对应的是一个 React 元素</span>
  update<span class="token punctuation">.</span>payload <span class="token operator">=</span> <span class="token punctuation">{</span>
    element<span class="token operator">:</span> element
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 处理 callback，这个 callback 其实就是我们调用 ReactDOM.render 时传入的 callback</span>
  callback <span class="token operator">=</span> callback <span class="token operator">===</span> <span class="token keyword">undefined</span> <span class="token operator">?</span> <span class="token keyword">null</span> <span class="token operator">:</span> callback<span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>callback <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> callback <span class="token operator">!==</span> <span class="token string">'function'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'render(...): Expected the last optional `callback` argument to be a '</span> <span class="token operator">+</span> <span class="token string">'function. Instead received: %s.'</span><span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    update<span class="token punctuation">.</span>callback <span class="token operator">=</span> callback<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
 <span class="token comment">// 将 update 入队</span>
  <span class="token comment">// 一整个React应用中，会有多次更新，而这多次更新均在更新队列中</span>
  <span class="token function">enqueueUpdate</span><span class="token punctuation">(</span>current$<span class="token number">1</span><span class="token punctuation">,</span> update<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//进行任务调度</span>
  <span class="token comment">//当React进行Update后，就要进行调度</span>
  <span class="token comment">//即 根据任务的优先级去调度任务</span>
  <span class="token comment">//先执行优先级高的任务，</span>
  <span class="token function">scheduleWork</span><span class="token punctuation">(</span>current$<span class="token number">1</span><span class="token punctuation">,</span> expirationTime<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> expirationTime<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>updateContainer</code> 函数最关键的事情可以总结为三件：</p> <ol><li><p>创建当前 Fiber 节点的 suspenseConfig（优先级）</p></li> <li><p>结合 suspenseConfig（优先级），创建当前 Fiber 节点的 <code>update</code> 对象，并将其入队</p></li> <li><p>调度当前节点（rootFiber）。</p></li></ol> <p><code>scheduleUpdateOnFiber</code> 函数的任务是调度当前节点的更新。在这个函数中，会处理一系列与优先级、打断操作相关的逻辑。但是在 <code>ReactDOM.render</code> 发起的首次渲染链路中，这些意义都不大，因为这个渲染过程其实是同步的</p> <p>具体的更新过程另外放个章节研究</p> <h2 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h2> <p><strong>ReactDOM.render</strong> 做的事情核心就做两件事件</p> <ol><li><p>创建 FiberNode</p></li> <li><p>发布调度任务，进行更新</p></li></ol> <blockquote><p><a href="https://segmentfault.com/a/1190000021883117" target="_blank" rel="noopener noreferrer">深入react-ReactDOM.render<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a><br> <a href="https://cloud.tencent.com/developer/article/1843869" target="_blank" rel="noopener noreferrer">深入理解ReactDOM.render 是如何串联渲染链路的全过程<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/lanjz/React/vsVue.html" class="prev">
        vsVue
      </a></span> <span class="next"><a href="/lanjz/React/Fiber.html">
        Fiber
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/lanjz/assets/js/app.35d90876.js" defer></script><script src="/lanjz/assets/js/2.1f844bfd.js" defer></script><script src="/lanjz/assets/js/40.a605179d.js" defer></script>
  </body>
</html>
