<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>跨域 | Hello Wold</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="Just playing around">
    
    <link rel="preload" href="/lanjz/assets/css/0.styles.5dda244b.css" as="style"><link rel="preload" href="/lanjz/assets/js/app.9b78bb5e.js" as="script"><link rel="preload" href="/lanjz/assets/js/2.3785217b.js" as="script"><link rel="preload" href="/lanjz/assets/js/187.c6bbeda3.js" as="script"><link rel="prefetch" href="/lanjz/assets/js/10.8c54fb1d.js"><link rel="prefetch" href="/lanjz/assets/js/100.5e8974e3.js"><link rel="prefetch" href="/lanjz/assets/js/101.9fa57abf.js"><link rel="prefetch" href="/lanjz/assets/js/102.34960247.js"><link rel="prefetch" href="/lanjz/assets/js/103.1c554e17.js"><link rel="prefetch" href="/lanjz/assets/js/104.bdcae176.js"><link rel="prefetch" href="/lanjz/assets/js/105.721ea770.js"><link rel="prefetch" href="/lanjz/assets/js/106.2f654c3f.js"><link rel="prefetch" href="/lanjz/assets/js/107.3f661321.js"><link rel="prefetch" href="/lanjz/assets/js/108.a29cf1e5.js"><link rel="prefetch" href="/lanjz/assets/js/109.cf15a3ee.js"><link rel="prefetch" href="/lanjz/assets/js/11.251443f1.js"><link rel="prefetch" href="/lanjz/assets/js/110.59807c5e.js"><link rel="prefetch" href="/lanjz/assets/js/111.779c0b45.js"><link rel="prefetch" href="/lanjz/assets/js/112.6dd8a8d3.js"><link rel="prefetch" href="/lanjz/assets/js/113.23ef3f14.js"><link rel="prefetch" href="/lanjz/assets/js/114.2e3fef4c.js"><link rel="prefetch" href="/lanjz/assets/js/115.1a018010.js"><link rel="prefetch" href="/lanjz/assets/js/116.25e0f8bc.js"><link rel="prefetch" href="/lanjz/assets/js/117.64f4362f.js"><link rel="prefetch" href="/lanjz/assets/js/118.cc490bbd.js"><link rel="prefetch" href="/lanjz/assets/js/119.831594d5.js"><link rel="prefetch" href="/lanjz/assets/js/12.ff3071fd.js"><link rel="prefetch" href="/lanjz/assets/js/120.4f1526b9.js"><link rel="prefetch" href="/lanjz/assets/js/121.ecd2370f.js"><link rel="prefetch" href="/lanjz/assets/js/122.ece31629.js"><link rel="prefetch" href="/lanjz/assets/js/123.eba2ef9a.js"><link rel="prefetch" href="/lanjz/assets/js/124.b540a8eb.js"><link rel="prefetch" href="/lanjz/assets/js/125.245a3282.js"><link rel="prefetch" href="/lanjz/assets/js/126.73625650.js"><link rel="prefetch" href="/lanjz/assets/js/127.1e8dfebc.js"><link rel="prefetch" href="/lanjz/assets/js/128.2ad7a917.js"><link rel="prefetch" href="/lanjz/assets/js/129.12c0c30e.js"><link rel="prefetch" href="/lanjz/assets/js/13.829ea818.js"><link rel="prefetch" href="/lanjz/assets/js/130.fdb512ef.js"><link rel="prefetch" href="/lanjz/assets/js/131.c98e797c.js"><link rel="prefetch" href="/lanjz/assets/js/132.b986c416.js"><link rel="prefetch" href="/lanjz/assets/js/133.8bfbefe2.js"><link rel="prefetch" href="/lanjz/assets/js/134.38fb3c96.js"><link rel="prefetch" href="/lanjz/assets/js/135.b25127da.js"><link rel="prefetch" href="/lanjz/assets/js/136.dc21b17e.js"><link rel="prefetch" href="/lanjz/assets/js/137.00ee7bfb.js"><link rel="prefetch" href="/lanjz/assets/js/138.fdc3e403.js"><link rel="prefetch" href="/lanjz/assets/js/139.851c880b.js"><link rel="prefetch" href="/lanjz/assets/js/14.9a1ccf91.js"><link rel="prefetch" href="/lanjz/assets/js/140.01d6a79f.js"><link rel="prefetch" href="/lanjz/assets/js/141.002a6e17.js"><link rel="prefetch" href="/lanjz/assets/js/142.819c6a58.js"><link rel="prefetch" href="/lanjz/assets/js/143.10618a1e.js"><link rel="prefetch" href="/lanjz/assets/js/144.76db34d0.js"><link rel="prefetch" href="/lanjz/assets/js/145.709d4b22.js"><link rel="prefetch" href="/lanjz/assets/js/146.5d1a34cf.js"><link rel="prefetch" href="/lanjz/assets/js/147.9768e1d6.js"><link rel="prefetch" href="/lanjz/assets/js/148.671d5202.js"><link rel="prefetch" href="/lanjz/assets/js/149.4f166470.js"><link rel="prefetch" href="/lanjz/assets/js/15.f11d2887.js"><link rel="prefetch" href="/lanjz/assets/js/150.cf109572.js"><link rel="prefetch" href="/lanjz/assets/js/151.f0c07ab7.js"><link rel="prefetch" href="/lanjz/assets/js/152.c4b6c886.js"><link rel="prefetch" href="/lanjz/assets/js/153.557b1b09.js"><link rel="prefetch" href="/lanjz/assets/js/154.2093d48a.js"><link rel="prefetch" href="/lanjz/assets/js/155.210273d0.js"><link rel="prefetch" href="/lanjz/assets/js/156.69bb0ee1.js"><link rel="prefetch" href="/lanjz/assets/js/157.3c365eef.js"><link rel="prefetch" href="/lanjz/assets/js/158.548dca9d.js"><link rel="prefetch" href="/lanjz/assets/js/159.ef8a756a.js"><link rel="prefetch" href="/lanjz/assets/js/16.714d1056.js"><link rel="prefetch" href="/lanjz/assets/js/160.9d0d8399.js"><link rel="prefetch" href="/lanjz/assets/js/161.dcd6e6c1.js"><link rel="prefetch" href="/lanjz/assets/js/162.de8a9c10.js"><link rel="prefetch" href="/lanjz/assets/js/163.132c8b73.js"><link rel="prefetch" href="/lanjz/assets/js/164.17f2962f.js"><link rel="prefetch" href="/lanjz/assets/js/165.d9503bac.js"><link rel="prefetch" href="/lanjz/assets/js/166.b19bf3c0.js"><link rel="prefetch" href="/lanjz/assets/js/167.280a896d.js"><link rel="prefetch" href="/lanjz/assets/js/168.d76d4df6.js"><link rel="prefetch" href="/lanjz/assets/js/169.a5cacc40.js"><link rel="prefetch" href="/lanjz/assets/js/17.295a0fe7.js"><link rel="prefetch" href="/lanjz/assets/js/170.6f5b0b3a.js"><link rel="prefetch" href="/lanjz/assets/js/171.c1a474da.js"><link rel="prefetch" href="/lanjz/assets/js/172.f5ba8edb.js"><link rel="prefetch" href="/lanjz/assets/js/173.f81a71e6.js"><link rel="prefetch" href="/lanjz/assets/js/174.3b68eab2.js"><link rel="prefetch" href="/lanjz/assets/js/175.4d55d106.js"><link rel="prefetch" href="/lanjz/assets/js/176.80c0fa83.js"><link rel="prefetch" href="/lanjz/assets/js/177.81f42834.js"><link rel="prefetch" href="/lanjz/assets/js/178.8fc796c1.js"><link rel="prefetch" href="/lanjz/assets/js/179.e9e1240b.js"><link rel="prefetch" href="/lanjz/assets/js/18.e786f88a.js"><link rel="prefetch" href="/lanjz/assets/js/180.ba708e1b.js"><link rel="prefetch" href="/lanjz/assets/js/181.ed72505f.js"><link rel="prefetch" href="/lanjz/assets/js/182.a82332fc.js"><link rel="prefetch" href="/lanjz/assets/js/183.d98315cf.js"><link rel="prefetch" href="/lanjz/assets/js/184.901a6de3.js"><link rel="prefetch" href="/lanjz/assets/js/185.925cd61e.js"><link rel="prefetch" href="/lanjz/assets/js/186.dba09585.js"><link rel="prefetch" href="/lanjz/assets/js/188.0b4eed3e.js"><link rel="prefetch" href="/lanjz/assets/js/189.c8f04ca6.js"><link rel="prefetch" href="/lanjz/assets/js/19.6742c7ef.js"><link rel="prefetch" href="/lanjz/assets/js/190.230ef8b5.js"><link rel="prefetch" href="/lanjz/assets/js/191.326e3fa3.js"><link rel="prefetch" href="/lanjz/assets/js/192.1a339876.js"><link rel="prefetch" href="/lanjz/assets/js/193.f2c5b99f.js"><link rel="prefetch" href="/lanjz/assets/js/194.b48ec1cd.js"><link rel="prefetch" href="/lanjz/assets/js/195.13beaa95.js"><link rel="prefetch" href="/lanjz/assets/js/196.43e0dbe1.js"><link rel="prefetch" href="/lanjz/assets/js/197.b540a81c.js"><link rel="prefetch" href="/lanjz/assets/js/198.c2df092f.js"><link rel="prefetch" href="/lanjz/assets/js/199.a7a2e975.js"><link rel="prefetch" href="/lanjz/assets/js/20.c71ee751.js"><link rel="prefetch" href="/lanjz/assets/js/200.6881634f.js"><link rel="prefetch" href="/lanjz/assets/js/201.49ccb58f.js"><link rel="prefetch" href="/lanjz/assets/js/202.65d24067.js"><link rel="prefetch" href="/lanjz/assets/js/203.50d78149.js"><link rel="prefetch" href="/lanjz/assets/js/204.1229c517.js"><link rel="prefetch" href="/lanjz/assets/js/205.10774bce.js"><link rel="prefetch" href="/lanjz/assets/js/206.07cede50.js"><link rel="prefetch" href="/lanjz/assets/js/207.eba9da65.js"><link rel="prefetch" href="/lanjz/assets/js/208.68708a05.js"><link rel="prefetch" href="/lanjz/assets/js/21.4a5392ba.js"><link rel="prefetch" href="/lanjz/assets/js/22.c95637a4.js"><link rel="prefetch" href="/lanjz/assets/js/23.b820b34d.js"><link rel="prefetch" href="/lanjz/assets/js/24.b4c4c438.js"><link rel="prefetch" href="/lanjz/assets/js/25.6d134ea1.js"><link rel="prefetch" href="/lanjz/assets/js/26.420e7e23.js"><link rel="prefetch" href="/lanjz/assets/js/27.62bdb8fb.js"><link rel="prefetch" href="/lanjz/assets/js/28.c14ff2d5.js"><link rel="prefetch" href="/lanjz/assets/js/29.63734c58.js"><link rel="prefetch" href="/lanjz/assets/js/3.4e8c2286.js"><link rel="prefetch" href="/lanjz/assets/js/30.3e2d595b.js"><link rel="prefetch" href="/lanjz/assets/js/31.d6db7b5d.js"><link rel="prefetch" href="/lanjz/assets/js/32.8f1325f9.js"><link rel="prefetch" href="/lanjz/assets/js/33.93803a6a.js"><link rel="prefetch" href="/lanjz/assets/js/34.a0039f24.js"><link rel="prefetch" href="/lanjz/assets/js/35.f1de267f.js"><link rel="prefetch" href="/lanjz/assets/js/36.02ad3155.js"><link rel="prefetch" href="/lanjz/assets/js/37.62160362.js"><link rel="prefetch" href="/lanjz/assets/js/38.d9e0e069.js"><link rel="prefetch" href="/lanjz/assets/js/39.4bd907e2.js"><link rel="prefetch" href="/lanjz/assets/js/4.5b86e626.js"><link rel="prefetch" href="/lanjz/assets/js/40.d11cb3c0.js"><link rel="prefetch" href="/lanjz/assets/js/41.e0888c47.js"><link rel="prefetch" href="/lanjz/assets/js/42.5159aebb.js"><link rel="prefetch" href="/lanjz/assets/js/43.eaf81d4c.js"><link rel="prefetch" href="/lanjz/assets/js/44.9d091396.js"><link rel="prefetch" href="/lanjz/assets/js/45.e88932f4.js"><link rel="prefetch" href="/lanjz/assets/js/46.9623bef4.js"><link rel="prefetch" href="/lanjz/assets/js/47.b5a14f9b.js"><link rel="prefetch" href="/lanjz/assets/js/48.8cf9e6fb.js"><link rel="prefetch" href="/lanjz/assets/js/49.04fcbf3b.js"><link rel="prefetch" href="/lanjz/assets/js/5.35f1362c.js"><link rel="prefetch" href="/lanjz/assets/js/50.e5ce1fa9.js"><link rel="prefetch" href="/lanjz/assets/js/51.f45d9815.js"><link rel="prefetch" href="/lanjz/assets/js/52.24ab7b48.js"><link rel="prefetch" href="/lanjz/assets/js/53.0a5bc577.js"><link rel="prefetch" href="/lanjz/assets/js/54.14f83f4d.js"><link rel="prefetch" href="/lanjz/assets/js/55.b9cd2fcc.js"><link rel="prefetch" href="/lanjz/assets/js/56.fd81b87f.js"><link rel="prefetch" href="/lanjz/assets/js/57.2f8192e2.js"><link rel="prefetch" href="/lanjz/assets/js/58.223d60f5.js"><link rel="prefetch" href="/lanjz/assets/js/59.4713876c.js"><link rel="prefetch" href="/lanjz/assets/js/6.0566c25f.js"><link rel="prefetch" href="/lanjz/assets/js/60.6bf55e58.js"><link rel="prefetch" href="/lanjz/assets/js/61.4a2d0ffb.js"><link rel="prefetch" href="/lanjz/assets/js/62.1eae15d9.js"><link rel="prefetch" href="/lanjz/assets/js/63.df7cc4c6.js"><link rel="prefetch" href="/lanjz/assets/js/64.bd37afbd.js"><link rel="prefetch" href="/lanjz/assets/js/65.0b76b152.js"><link rel="prefetch" href="/lanjz/assets/js/66.74326a6c.js"><link rel="prefetch" href="/lanjz/assets/js/67.f581203a.js"><link rel="prefetch" href="/lanjz/assets/js/68.6c4ecec5.js"><link rel="prefetch" href="/lanjz/assets/js/69.88aa75b2.js"><link rel="prefetch" href="/lanjz/assets/js/7.61a7dc52.js"><link rel="prefetch" href="/lanjz/assets/js/70.bdba4b51.js"><link rel="prefetch" href="/lanjz/assets/js/71.bb44b170.js"><link rel="prefetch" href="/lanjz/assets/js/72.6a94253d.js"><link rel="prefetch" href="/lanjz/assets/js/73.c5efcbda.js"><link rel="prefetch" href="/lanjz/assets/js/74.33700f59.js"><link rel="prefetch" href="/lanjz/assets/js/75.06b40b07.js"><link rel="prefetch" href="/lanjz/assets/js/76.792111db.js"><link rel="prefetch" href="/lanjz/assets/js/77.240e98f1.js"><link rel="prefetch" href="/lanjz/assets/js/78.9c3abd27.js"><link rel="prefetch" href="/lanjz/assets/js/79.161789cb.js"><link rel="prefetch" href="/lanjz/assets/js/8.b2e1287f.js"><link rel="prefetch" href="/lanjz/assets/js/80.2f49dfd4.js"><link rel="prefetch" href="/lanjz/assets/js/81.7a9e5f1e.js"><link rel="prefetch" href="/lanjz/assets/js/82.82a076b5.js"><link rel="prefetch" href="/lanjz/assets/js/83.08b3e28a.js"><link rel="prefetch" href="/lanjz/assets/js/84.8dd77e80.js"><link rel="prefetch" href="/lanjz/assets/js/85.282e38b0.js"><link rel="prefetch" href="/lanjz/assets/js/86.5f486d2a.js"><link rel="prefetch" href="/lanjz/assets/js/87.e18e06cb.js"><link rel="prefetch" href="/lanjz/assets/js/88.8e1156a1.js"><link rel="prefetch" href="/lanjz/assets/js/89.dfa5465d.js"><link rel="prefetch" href="/lanjz/assets/js/9.c41a0a9e.js"><link rel="prefetch" href="/lanjz/assets/js/90.419e9f4a.js"><link rel="prefetch" href="/lanjz/assets/js/91.a32083dc.js"><link rel="prefetch" href="/lanjz/assets/js/92.06196385.js"><link rel="prefetch" href="/lanjz/assets/js/93.687c938a.js"><link rel="prefetch" href="/lanjz/assets/js/94.bdbc8aa0.js"><link rel="prefetch" href="/lanjz/assets/js/95.0a5298ec.js"><link rel="prefetch" href="/lanjz/assets/js/96.5883a27a.js"><link rel="prefetch" href="/lanjz/assets/js/97.308c12e0.js"><link rel="prefetch" href="/lanjz/assets/js/98.4a898724.js"><link rel="prefetch" href="/lanjz/assets/js/99.8153c89f.js">
    <link rel="stylesheet" href="/lanjz/assets/css/0.styles.5dda244b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/lanjz/" class="home-link router-link-active"><!----> <span class="site-name">Hello Wold</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/lanjz/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端基础" class="dropdown-title"><span class="title">前端基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端基础" class="mobile-dropdown-title"><span class="title">前端基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/JavaScript/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/ES6/" class="nav-link">
  ES6
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/HTML5/" class="nav-link">
  HTML5
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/CSS/" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Browser/" class="nav-link">
  Browser
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="网络&amp;算法" class="dropdown-title"><span class="title">网络&amp;算法</span> <span class="arrow down"></span></button> <button type="button" aria-label="网络&amp;算法" class="mobile-dropdown-title"><span class="title">网络&amp;算法</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/network/" class="nav-link router-link-active">
  网络
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Algorithm/" class="nav-link">
  算法
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/secure/" class="nav-link">
  Web安全
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架" class="dropdown-title"><span class="title">框架</span> <span class="arrow down"></span></button> <button type="button" aria-label="框架" class="mobile-dropdown-title"><span class="title">框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/Vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Vue3/" class="nav-link">
  Vue3
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/React/" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/qiankun/" class="nav-link">
  qiankun
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/NA/" class="nav-link">
  跨平台
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Node" class="dropdown-title"><span class="title">Node</span> <span class="arrow down"></span></button> <button type="button" aria-label="Node" class="mobile-dropdown-title"><span class="title">Node</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/Node/基础/" class="nav-link">
  基础
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Node/Api/" class="nav-link">
  API
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Node/Package/" class="nav-link">
  yarn&amp;npm
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Node/Webpack/" class="nav-link">
  Webpack
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Node/Vite/" class="nav-link">
  Vite
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Node/数据库/" class="nav-link">
  SQL
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工程化" class="dropdown-title"><span class="title">工程化</span> <span class="arrow down"></span></button> <button type="button" aria-label="工程化" class="mobile-dropdown-title"><span class="title">工程化</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/工程化/前端优化总结/" class="nav-link">
  前端优化总结
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/系统设计/" class="nav-link">
  系统设计
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/预加载&amp;预解析.html" class="nav-link">
  预加载&amp;预解析
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/重构改善既有代码的设计.html" class="nav-link">
  重构代码原则
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/开发与调试技巧.html" class="nav-link">
  开发与调试
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/组件设计的基本原则.html" class="nav-link">
  组件设计
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/公共模块管理.html" class="nav-link">
  公共模块管理
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/内存泄漏.html" class="nav-link">
  内存泄漏
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/前端异常捕获.html" class="nav-link">
  前端异常捕获
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/自动化部署.html" class="nav-link">
  自动化部署
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/疑难杂症.html" class="nav-link">
  问题小计
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="利其器" class="dropdown-title"><span class="title">利其器</span> <span class="arrow down"></span></button> <button type="button" aria-label="利其器" class="mobile-dropdown-title"><span class="title">利其器</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/利其器/Mac.html" class="nav-link">
  Mac
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/利其器/Github.html" class="nav-link">
  Github
</a></li></ul></div></div><div class="nav-item"><a href="/lanjz/Im/" class="nav-link">
  关于我
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/lanjz/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端基础" class="dropdown-title"><span class="title">前端基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端基础" class="mobile-dropdown-title"><span class="title">前端基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/JavaScript/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/ES6/" class="nav-link">
  ES6
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/HTML5/" class="nav-link">
  HTML5
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/CSS/" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Browser/" class="nav-link">
  Browser
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="网络&amp;算法" class="dropdown-title"><span class="title">网络&amp;算法</span> <span class="arrow down"></span></button> <button type="button" aria-label="网络&amp;算法" class="mobile-dropdown-title"><span class="title">网络&amp;算法</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/network/" class="nav-link router-link-active">
  网络
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Algorithm/" class="nav-link">
  算法
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/secure/" class="nav-link">
  Web安全
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架" class="dropdown-title"><span class="title">框架</span> <span class="arrow down"></span></button> <button type="button" aria-label="框架" class="mobile-dropdown-title"><span class="title">框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/Vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Vue3/" class="nav-link">
  Vue3
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/React/" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/qiankun/" class="nav-link">
  qiankun
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/NA/" class="nav-link">
  跨平台
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Node" class="dropdown-title"><span class="title">Node</span> <span class="arrow down"></span></button> <button type="button" aria-label="Node" class="mobile-dropdown-title"><span class="title">Node</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/Node/基础/" class="nav-link">
  基础
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Node/Api/" class="nav-link">
  API
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Node/Package/" class="nav-link">
  yarn&amp;npm
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Node/Webpack/" class="nav-link">
  Webpack
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Node/Vite/" class="nav-link">
  Vite
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Node/数据库/" class="nav-link">
  SQL
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工程化" class="dropdown-title"><span class="title">工程化</span> <span class="arrow down"></span></button> <button type="button" aria-label="工程化" class="mobile-dropdown-title"><span class="title">工程化</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/工程化/前端优化总结/" class="nav-link">
  前端优化总结
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/系统设计/" class="nav-link">
  系统设计
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/预加载&amp;预解析.html" class="nav-link">
  预加载&amp;预解析
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/重构改善既有代码的设计.html" class="nav-link">
  重构代码原则
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/开发与调试技巧.html" class="nav-link">
  开发与调试
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/组件设计的基本原则.html" class="nav-link">
  组件设计
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/公共模块管理.html" class="nav-link">
  公共模块管理
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/内存泄漏.html" class="nav-link">
  内存泄漏
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/前端异常捕获.html" class="nav-link">
  前端异常捕获
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/自动化部署.html" class="nav-link">
  自动化部署
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/疑难杂症.html" class="nav-link">
  问题小计
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="利其器" class="dropdown-title"><span class="title">利其器</span> <span class="arrow down"></span></button> <button type="button" aria-label="利其器" class="mobile-dropdown-title"><span class="title">利其器</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/利其器/Mac.html" class="nav-link">
  Mac
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/利其器/Github.html" class="nav-link">
  Github
</a></li></ul></div></div><div class="nav-item"><a href="/lanjz/Im/" class="nav-link">
  关于我
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/lanjz/network/HTTP及演变.html" class="sidebar-link">HTTP及演变</a></li><li><a href="/lanjz/network/HTTPS.html" class="sidebar-link">HTTPS</a></li><li><a href="/lanjz/network/浏览器缓存.html" class="sidebar-link">浏览器缓存</a></li><li><a href="/lanjz/network/跨域.html" class="active sidebar-link">跨域</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/lanjz/network/跨域.html#跨域请求的解决方案" class="sidebar-link">跨域请求的解决方案</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/lanjz/network/跨域.html#基于jsonp实现的跨域请求" class="sidebar-link">基于jsonp实现的跨域请求</a></li><li class="sidebar-sub-header"><a href="/lanjz/network/跨域.html#form表单提交" class="sidebar-link">form表单提交</a></li><li class="sidebar-sub-header"><a href="/lanjz/network/跨域.html#cors-cross-origin-resource-sharing" class="sidebar-link">CORS(Cross-origin resource sharing)</a></li><li class="sidebar-sub-header"><a href="/lanjz/network/跨域.html#修改document-domain" class="sidebar-link">修改document.domain</a></li><li class="sidebar-sub-header"><a href="/lanjz/network/跨域.html#利用服务器代理" class="sidebar-link">利用服务器代理</a></li></ul></li><li class="sidebar-sub-header"><a href="/lanjz/network/跨域.html#http响应首部字段" class="sidebar-link">HTTP响应首部字段</a></li><li class="sidebar-sub-header"><a href="/lanjz/network/跨域.html#http请求头部字段" class="sidebar-link">HTTP请求头部字段</a></li><li class="sidebar-sub-header"><a href="/lanjz/network/跨域.html#预检请求" class="sidebar-link">预检请求</a></li></ul></li><li><a href="/lanjz/network/CDN.html" class="sidebar-link">CDN</a></li><li><a href="/lanjz/network/Cookie.html" class="sidebar-link">Cookie</a></li><li><a href="/lanjz/network/DNS.html" class="sidebar-link">DNS</a></li><li><a href="/lanjz/network/TCP.html" class="sidebar-link">TCP</a></li><li><a href="/lanjz/network/keep-alive.html" class="sidebar-link">keep-alive</a></li><li><a href="/lanjz/network/WebSocket.html" class="sidebar-link">WebSocket</a></li><li><a href="/lanjz/network/网络层的优化.html" class="sidebar-link">前端优化之 Http 相关优化总结</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="跨域"><a href="#跨域" class="header-anchor">#</a> 跨域</h1> <p><strong>一个源的定义</strong></p> <p>如果两个页面的协议，端口（如果有指定）和域名都相同，则两个页面具有相同的源。
举个例子：</p> <div class="language-js extra-class"><pre class="language-js"><code>下表给出了相对http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>a<span class="token punctuation">.</span>lanjz<span class="token punctuation">.</span>com<span class="token operator">/</span>dir<span class="token operator">/</span>page<span class="token punctuation">.</span>html同源检测的示例<span class="token operator">:</span> 
<span class="token constant">URL</span>                                         结果          原因
http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>a<span class="token punctuation">.</span>lanjz<span class="token punctuation">.</span>com<span class="token operator">/</span>dir2<span class="token operator">/</span>other<span class="token punctuation">.</span>html            成功     协议，端口（如果有指定）和域名都相同
http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>a<span class="token punctuation">.</span>lanjz<span class="token punctuation">.</span>com<span class="token operator">/</span>dir<span class="token operator">/</span>inner<span class="token operator">/</span>another<span class="token punctuation">.</span>html     成功    协议，端口（如果有指定）和域名都相同 
https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>a<span class="token punctuation">.</span>lanjz<span class="token punctuation">.</span>com<span class="token operator">/</span>secure<span class="token punctuation">.</span>html               失败    <span class="token function">不同协议</span> <span class="token punctuation">(</span> https和http <span class="token punctuation">)</span>
http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>a<span class="token punctuation">.</span>lanjz<span class="token punctuation">.</span>com<span class="token operator">:</span><span class="token number">81</span><span class="token operator">/</span>dir<span class="token operator">/</span>etc<span class="token punctuation">.</span>html            失败    <span class="token function">不同端口</span> <span class="token punctuation">(</span> <span class="token number">81</span>和<span class="token number">80</span><span class="token punctuation">)</span>
http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>a<span class="token punctuation">.</span>opq<span class="token punctuation">.</span>com<span class="token operator">/</span>dir<span class="token operator">/</span>other<span class="token punctuation">.</span>html             失败    <span class="token function">不同域名</span> <span class="token punctuation">(</span> lanjz和opq<span class="token punctuation">)</span>
</code></pre></div><p><strong>同源策略</strong></p> <p>同源策略是浏览器的一个安全功能，不同源的客户端脚本在没有明确授权的情况下，不能读写对方资源</p> <h2 id="跨域请求的解决方案"><a href="#跨域请求的解决方案" class="header-anchor">#</a> 跨域请求的解决方案</h2> <h3 id="基于jsonp实现的跨域请求"><a href="#基于jsonp实现的跨域请求" class="header-anchor">#</a> 基于jsonp实现的跨域请求</h3> <p>跨域资源的引入是可以的，如嵌入到页面中的<code>script</code>，<code>img</code>，<code>link</code>，<code>iframe</code>等。</p> <p><code>jsonp</code>的原理就是利用<code>&lt;script&gt;</code>标签没有跨域限制，通过<code>&lt;script&gt;</code>标签<code>src</code>属性，发送带有<code>callback</code>参数的<code>GET</code>请求，服务端将接口返回数据拼凑到<code>callback</code>函数中，返回给浏览器，浏览器解析执行，从而前端拿到<code>callback</code>函数返回的数据</p> <p><strong>例子</strong></p> <p>服务端：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'http'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> urllib <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'url'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> port <span class="token operator">=</span> <span class="token number">10011</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'name'</span><span class="token operator">:</span> <span class="token string">'jifeng'</span><span class="token punctuation">,</span> <span class="token string">'company'</span><span class="token operator">:</span> <span class="token string">'taobao'</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">var</span> params <span class="token operator">=</span> urllib<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>url<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>params<span class="token punctuation">.</span>query <span class="token operator">&amp;&amp;</span> params<span class="token punctuation">.</span>query<span class="token punctuation">.</span>callback<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//console.log(params.query.callback);</span>
    <span class="token keyword">var</span> str <span class="token operator">=</span>  params<span class="token punctuation">.</span>query<span class="token punctuation">.</span>callback <span class="token operator">+</span> <span class="token string">'('</span> <span class="token operator">+</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">')'</span><span class="token punctuation">;</span><span class="token comment">//jsonp</span>
    res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//普通的json</span>
  <span class="token punctuation">}</span>     
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span>port<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'server is listening on port '</span> <span class="token operator">+</span> port<span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>前端JS</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
    <span class="token keyword">var</span> script <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'script'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    script<span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token string">'text/javascript'</span><span class="token punctuation">;</span>

    <span class="token comment">// 传参一个回调函数名给后端，方便后端返回时执行这个在前端定义的回调函数</span>
    script<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token string">'http://www.localhost:10011?user=admin&amp;callback=handleCallback'</span><span class="token punctuation">;</span>
    document<span class="token punctuation">.</span>head<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>script<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 回调执行函数</span>
    <span class="token keyword">function</span> <span class="token function">handleCallback</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">alert</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
 <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

</code></pre></div><h3 id="form表单提交"><a href="#form表单提交" class="header-anchor">#</a> form表单提交</h3> <p><code>ajax</code>跨域是因为浏览需要保护用户的隐私而给JS设定的限制，<code>form</code>表单提交会刷新页面，原页面的脚本无法获取新页面的内容，所以浏览器认为是安全的</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.localhost:10011<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>提交<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="cors-cross-origin-resource-sharing"><a href="#cors-cross-origin-resource-sharing" class="header-anchor">#</a> CORS(Cross-origin resource sharing)</h3> <div class="language-js extra-class"><pre class="language-js"><code>Access<span class="token operator">-</span>Control<span class="token operator">-</span>Allow<span class="token operator">-</span>Origin<span class="token operator">:</span> http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>api<span class="token punctuation">.</span>bob<span class="token punctuation">.</span>com
Access<span class="token operator">-</span>Control<span class="token operator">-</span>Allow<span class="token operator">-</span>Credentials<span class="token operator">:</span> <span class="token boolean">true</span>
Access<span class="token operator">-</span>Control<span class="token operator">-</span>Expose<span class="token operator">-</span>Headers<span class="token operator">:</span> FooBar
Content<span class="token operator">-</span>Type<span class="token operator">:</span> text<span class="token operator">/</span>html<span class="token punctuation">;</span> charset<span class="token operator">=</span>utf<span class="token operator">-</span><span class="token number">8</span>
</code></pre></div><p>服务器设置<code>Access-Control-Allow-Origin：允许跨域的域名</code></p> <p>该字段是必须的。它的值要么是请求时<code>Origin</code>字段的值，要么是一个<code>*</code>，表示接受任意域名的请求。</p> <p>服务器还有其它配置</p> <ul><li><p>服务器设置<code>Access-Control-Allow-Credentials</code></p> <p>正常跨域请求是不允许携带Cookie的，如果需要带Cookie还需要进行以下配置</p> <p>该字段可选。它的值是一个布尔值，表示是否允许发送Cookie。默认情况下值为<code>false</code>，Cookie不包括在CORS请求之中
设为<code>true</code>后，即表示服务器明确许可，Cookie可以包含在请求中，一起发给服务器。</p> <p>服务器设置之后，前端请求还需要配置<code>withCredentials</code>属性</p></li> <li><p>服务器设置<code>Access-Control-Expose-Headers</code></p> <p>CORS请求时，<code>XMLHttpRequest</code>对象的<code>getResponseHeader()</code>方法只能拿到6个基本字段：<code>Cache-Control</code>、<code>Content-Language</code>、<code>Content-Type</code>、<code>Expires</code>、<code>Last-Modified</code>、<code>Pragma</code>。如果想拿到其他字段，就必须在<code>Access-Control-Expose-Headers</code>里面指定。
上面的例子指定，<code>getResponseHeader('FooBar')</code>可以返回<code>FooBar</code>字段的值</p></li></ul> <h3 id="修改document-domain"><a href="#修改document-domain" class="header-anchor">#</a> 修改document.domain</h3> <p>这个解决方案只适用于主域，协议，端口相同，子域不同的跨域应用场景。其他情况不能使用</p> <p>比如在：<code>aaa.com</code>的一个网页<code>a.html</code>里面利用<code>iframe</code>引入了一个<code>bbb.com</code>里的一个网页<code>b.html</code>。
这时在<code>a.html</code>里面可以看到<code>b.html</code>里的内容，但是却不能利用javascript来操作它。因为这两个页面属于不同的域</p> <p>如果在<code>a.html</code>里引入<code>aaa.com</code>里的另一个网页，是不会有这个问题的，因为域相等</p> <p>有另一种情况，两个子域名：<code>aaa.xxx.com</code> 和 <code>bbb.xxx.com</code>，<code>aaa.xxx.com</code>里的一个网页(<code>a.html</code>)引入了<code>bbb.xxx.com</code> 里的一个网页 <code>b.html</code>，这时<code>a.html</code>里同样是不能操作<code>b.html</code>里面的内容的。因为<code>document.domain</code>不一样（一个是<code>aaa.xxx.com</code>，另一个是<code>bbb.xxx.com</code>）</p> <p>这时我们就可以通过Javascript将两个页面的<code>domain</code>改成一样的，需要在<code>a.html</code>里与<code>b.html</code>里都加入代码如下:</p> <div class="language-js extra-class"><pre class="language-js"><code>document<span class="token punctuation">.</span>domain <span class="token operator">=</span> <span class="token string">&quot;xxx.com&quot;</span>
</code></pre></div><p>这样这两个页面就可以互相操作了。也就是实现了同一基础域名之间的&quot;跨域&quot;</p> <h3 id="利用服务器代理"><a href="#利用服务器代理" class="header-anchor">#</a> 利用服务器代理</h3> <p>跨域是浏览器给的限制，所以平时开发时可以利用<code>node</code>加一层代理转发接口的方式来解决跨域问题，Webpack也提供了相关的配置：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> domain <span class="token operator">=</span> <span class="token string">&quot;http://i.chuangliang.com/&quot;</span>

devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    proxy<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;/api&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        target<span class="token operator">:</span> domain<span class="token punctuation">,</span>
        ws<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        changeOrigin<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        cookieDomainRewrite<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        pathRewrite<span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token string">'^/api'</span><span class="token operator">:</span> <span class="token string">'/'</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function-variable function">onProxyReq</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">onProxyReq</span><span class="token punctuation">(</span><span class="token parameter">proxyReq</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          console<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">代理请求===</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>proxyReq<span class="token punctuation">.</span>path<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><h2 id="http响应首部字段"><a href="#http响应首部字段" class="header-anchor">#</a> HTTP响应首部字段</h2> <ul><li><p><code>Accept-Control-Allow-Origin</code>： 用于设置允许访问该资源的外部URL</p></li> <li><p><code>Accept-Control-Expose-Headers</code>：对跨域访问在跨域访问时，<code>XMLHttpRequest对象的getResponseHeader()</code>方法只能拿到一些最基本的响应头，<code>Cache-Control</code>、<code>Content-Language</code>、<code>Content-Type</code>、<code>Expires</code>、<code>Last-Modified、Pragma</code>，如果要访问其他头，则需要服务器设置本响应头。</p></li></ul> <p><code>Access-Control-Expose-Headers</code> 头让服务器把允许浏览器访问的头放入白名单，例如：</p> <div class="language- extra-class"><pre class="language-text"><code>Access-Control-Expose-Headers: X-My-Custom-Header, X-Another-Custom-Header
</code></pre></div><ul><li><p><code>Access-Control-Max-Age</code>：指定了<code>preflight</code>请求的结果能够被缓存多久</p></li> <li><p><code>Access-Control-Allow-Credentials</code>：该字段可选。它的值是一个布尔值，表示是否允许发送Cookie。默认情况下，Cookie不包括在CORS请求之中。设为true，即表示服务器明确许可，Cookie可以包含在请求中，一起发给服务器</p></li> <li><p><code>Access-Control-Allow-Methods</code>：首部字段用于预检请求的响应。其指明了实际请求所允许使用的 HTTP 方法。</p></li></ul> <h2 id="http请求头部字段"><a href="#http请求头部字段" class="header-anchor">#</a> HTTP请求头部字段</h2> <ul><li><p><code>origin</code>：发起请求的源站URL，不包含路径</p> <p>注意：无论是否跨域请求，<code>origin</code>都会被发送</p></li> <li><p><code>Accept-Control-Request-Method</code>：用于预检请求，将实际所请求的方法告诉服务器</p> <p>在项目中如果是跨域请求时，我们发现同一个请求有两次发送，第一次是<code>options</code>，第二次才是真正的请求。第一次请求就是预检请求，请求头中会带上<code>Accept-Control-Request-Method</code>，值是我们真正要请求的方法</p></li></ul> <h2 id="预检请求"><a href="#预检请求" class="header-anchor">#</a> 预检请求</h2> <p>对于非简单请求如<code>POST</code>,<code>PUT</code>或<code>DELETE</code>，在发这些类型的请求之前会先发送一个&quot;预检&quot;请求, 请求方法是<code>OPTIONS</code></p> <p>浏览器先询问服务器，当前网页所在的域名是否在服务器的许可名单之中，以及可以使用哪些HTTP动词和头信息字段。
只有得到肯定答复，浏览器才会发出正式的<code>XMLHttpRequest</code>请求，否则就报错</p> <p>一般预检请求都包含以下几个头部：</p> <ul><li><p><code>Origin</code>: 表示请求来自哪个源</p></li> <li><p><code>Access-Control-Request-Method</code>: 用来列出浏览器的CORS请求会用到哪些HTTP方法</p></li> <li><p><code>Access-Control-Request-Headers</code>: 浏览器CORS请求会额外发送的头信息字段</p></li></ul> <blockquote><p><a href="http://www.ruanyifeng.com/blog/2016/04/cors.html" target="_blank" rel="noopener noreferrer">跨域资源共享 CORS 详解<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/lanjz/network/浏览器缓存.html" class="prev">
        浏览器缓存
      </a></span> <span class="next"><a href="/lanjz/network/CDN.html">
        CDN
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/lanjz/assets/js/app.9b78bb5e.js" defer></script><script src="/lanjz/assets/js/2.3785217b.js" defer></script><script src="/lanjz/assets/js/187.c6bbeda3.js" defer></script>
  </body>
</html>
