<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>跨域 | Hello Wold</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="Just playing around">
    
    <link rel="preload" href="/lanjz/assets/css/0.styles.5dda244b.css" as="style"><link rel="preload" href="/lanjz/assets/js/app.3a5e8ccd.js" as="script"><link rel="preload" href="/lanjz/assets/js/2.a95fb859.js" as="script"><link rel="preload" href="/lanjz/assets/js/190.b74ab8c3.js" as="script"><link rel="prefetch" href="/lanjz/assets/js/10.9db89e4e.js"><link rel="prefetch" href="/lanjz/assets/js/100.29327608.js"><link rel="prefetch" href="/lanjz/assets/js/101.dce416ae.js"><link rel="prefetch" href="/lanjz/assets/js/102.71a8ea86.js"><link rel="prefetch" href="/lanjz/assets/js/103.95391c2d.js"><link rel="prefetch" href="/lanjz/assets/js/104.1f2d5d92.js"><link rel="prefetch" href="/lanjz/assets/js/105.60079702.js"><link rel="prefetch" href="/lanjz/assets/js/106.bf58badd.js"><link rel="prefetch" href="/lanjz/assets/js/107.612afed7.js"><link rel="prefetch" href="/lanjz/assets/js/108.ae170dcd.js"><link rel="prefetch" href="/lanjz/assets/js/109.2a208be6.js"><link rel="prefetch" href="/lanjz/assets/js/11.13f1b4bd.js"><link rel="prefetch" href="/lanjz/assets/js/110.2f06d294.js"><link rel="prefetch" href="/lanjz/assets/js/111.21c04416.js"><link rel="prefetch" href="/lanjz/assets/js/112.91ef5e4e.js"><link rel="prefetch" href="/lanjz/assets/js/113.450f4175.js"><link rel="prefetch" href="/lanjz/assets/js/114.d43951af.js"><link rel="prefetch" href="/lanjz/assets/js/115.a7e2ee33.js"><link rel="prefetch" href="/lanjz/assets/js/116.de139bbb.js"><link rel="prefetch" href="/lanjz/assets/js/117.20434384.js"><link rel="prefetch" href="/lanjz/assets/js/118.20e4f876.js"><link rel="prefetch" href="/lanjz/assets/js/119.0acb1cf6.js"><link rel="prefetch" href="/lanjz/assets/js/12.3fc241c8.js"><link rel="prefetch" href="/lanjz/assets/js/120.f5334f61.js"><link rel="prefetch" href="/lanjz/assets/js/121.ca5ff301.js"><link rel="prefetch" href="/lanjz/assets/js/122.edb7a1fb.js"><link rel="prefetch" href="/lanjz/assets/js/123.642c28b4.js"><link rel="prefetch" href="/lanjz/assets/js/124.574ee27a.js"><link rel="prefetch" href="/lanjz/assets/js/125.eee5d5c1.js"><link rel="prefetch" href="/lanjz/assets/js/126.b5f90488.js"><link rel="prefetch" href="/lanjz/assets/js/127.a23c31fe.js"><link rel="prefetch" href="/lanjz/assets/js/128.bab27855.js"><link rel="prefetch" href="/lanjz/assets/js/129.e9fcabe0.js"><link rel="prefetch" href="/lanjz/assets/js/13.058a473c.js"><link rel="prefetch" href="/lanjz/assets/js/130.99497ae3.js"><link rel="prefetch" href="/lanjz/assets/js/131.7759be25.js"><link rel="prefetch" href="/lanjz/assets/js/132.c51132cf.js"><link rel="prefetch" href="/lanjz/assets/js/133.b36206a4.js"><link rel="prefetch" href="/lanjz/assets/js/134.3d4f5581.js"><link rel="prefetch" href="/lanjz/assets/js/135.b9e40928.js"><link rel="prefetch" href="/lanjz/assets/js/136.5942efa6.js"><link rel="prefetch" href="/lanjz/assets/js/137.35a99ae2.js"><link rel="prefetch" href="/lanjz/assets/js/138.b00d2394.js"><link rel="prefetch" href="/lanjz/assets/js/139.bec1a363.js"><link rel="prefetch" href="/lanjz/assets/js/14.9169cb57.js"><link rel="prefetch" href="/lanjz/assets/js/140.37e26a03.js"><link rel="prefetch" href="/lanjz/assets/js/141.a31132d3.js"><link rel="prefetch" href="/lanjz/assets/js/142.d8fbfa98.js"><link rel="prefetch" href="/lanjz/assets/js/143.05e54329.js"><link rel="prefetch" href="/lanjz/assets/js/144.3eaaa0e4.js"><link rel="prefetch" href="/lanjz/assets/js/145.a9812de5.js"><link rel="prefetch" href="/lanjz/assets/js/146.adc64891.js"><link rel="prefetch" href="/lanjz/assets/js/147.96797ef0.js"><link rel="prefetch" href="/lanjz/assets/js/148.cb3f24fe.js"><link rel="prefetch" href="/lanjz/assets/js/149.3ff8c7da.js"><link rel="prefetch" href="/lanjz/assets/js/15.34128e37.js"><link rel="prefetch" href="/lanjz/assets/js/150.73b9bbde.js"><link rel="prefetch" href="/lanjz/assets/js/151.ad34b497.js"><link rel="prefetch" href="/lanjz/assets/js/152.5b02edb0.js"><link rel="prefetch" href="/lanjz/assets/js/153.00a63d09.js"><link rel="prefetch" href="/lanjz/assets/js/154.e9a600f5.js"><link rel="prefetch" href="/lanjz/assets/js/155.c8963457.js"><link rel="prefetch" href="/lanjz/assets/js/156.8595eda4.js"><link rel="prefetch" href="/lanjz/assets/js/157.f8a4525f.js"><link rel="prefetch" href="/lanjz/assets/js/158.f6799533.js"><link rel="prefetch" href="/lanjz/assets/js/159.1beb23db.js"><link rel="prefetch" href="/lanjz/assets/js/16.89d368f8.js"><link rel="prefetch" href="/lanjz/assets/js/160.9e324ea1.js"><link rel="prefetch" href="/lanjz/assets/js/161.1b62ea09.js"><link rel="prefetch" href="/lanjz/assets/js/162.3c9b27cb.js"><link rel="prefetch" href="/lanjz/assets/js/163.b28b72db.js"><link rel="prefetch" href="/lanjz/assets/js/164.b8959e46.js"><link rel="prefetch" href="/lanjz/assets/js/165.256c6212.js"><link rel="prefetch" href="/lanjz/assets/js/166.5c4c82dd.js"><link rel="prefetch" href="/lanjz/assets/js/167.af0e6b43.js"><link rel="prefetch" href="/lanjz/assets/js/168.be7cfe87.js"><link rel="prefetch" href="/lanjz/assets/js/169.672f771f.js"><link rel="prefetch" href="/lanjz/assets/js/17.e02c4435.js"><link rel="prefetch" href="/lanjz/assets/js/170.fb195149.js"><link rel="prefetch" href="/lanjz/assets/js/171.183959d5.js"><link rel="prefetch" href="/lanjz/assets/js/172.0395e944.js"><link rel="prefetch" href="/lanjz/assets/js/173.2c4e051b.js"><link rel="prefetch" href="/lanjz/assets/js/174.c5be5c3a.js"><link rel="prefetch" href="/lanjz/assets/js/175.aa14d73f.js"><link rel="prefetch" href="/lanjz/assets/js/176.1febebc6.js"><link rel="prefetch" href="/lanjz/assets/js/177.3cae2095.js"><link rel="prefetch" href="/lanjz/assets/js/178.df2a01b5.js"><link rel="prefetch" href="/lanjz/assets/js/179.f1428db1.js"><link rel="prefetch" href="/lanjz/assets/js/18.24b30c29.js"><link rel="prefetch" href="/lanjz/assets/js/180.47ef0f5c.js"><link rel="prefetch" href="/lanjz/assets/js/181.98d4c12d.js"><link rel="prefetch" href="/lanjz/assets/js/182.8325efb6.js"><link rel="prefetch" href="/lanjz/assets/js/183.a76e18e5.js"><link rel="prefetch" href="/lanjz/assets/js/184.9c7fa551.js"><link rel="prefetch" href="/lanjz/assets/js/185.c2d4189c.js"><link rel="prefetch" href="/lanjz/assets/js/186.db983d61.js"><link rel="prefetch" href="/lanjz/assets/js/187.801c32f6.js"><link rel="prefetch" href="/lanjz/assets/js/188.42a0bd6f.js"><link rel="prefetch" href="/lanjz/assets/js/189.0817a90f.js"><link rel="prefetch" href="/lanjz/assets/js/19.0913eca0.js"><link rel="prefetch" href="/lanjz/assets/js/191.e2ffda33.js"><link rel="prefetch" href="/lanjz/assets/js/192.ebf2e40b.js"><link rel="prefetch" href="/lanjz/assets/js/193.f2b43325.js"><link rel="prefetch" href="/lanjz/assets/js/194.b45c1027.js"><link rel="prefetch" href="/lanjz/assets/js/195.6d4eac01.js"><link rel="prefetch" href="/lanjz/assets/js/196.2259a5eb.js"><link rel="prefetch" href="/lanjz/assets/js/197.0fc81dce.js"><link rel="prefetch" href="/lanjz/assets/js/198.715e8c07.js"><link rel="prefetch" href="/lanjz/assets/js/199.8aa01e4e.js"><link rel="prefetch" href="/lanjz/assets/js/20.d989158b.js"><link rel="prefetch" href="/lanjz/assets/js/200.b376c224.js"><link rel="prefetch" href="/lanjz/assets/js/201.25ae8048.js"><link rel="prefetch" href="/lanjz/assets/js/202.8b4c5c02.js"><link rel="prefetch" href="/lanjz/assets/js/203.285d4e31.js"><link rel="prefetch" href="/lanjz/assets/js/204.d630c360.js"><link rel="prefetch" href="/lanjz/assets/js/205.0e2facf4.js"><link rel="prefetch" href="/lanjz/assets/js/206.00ea06fd.js"><link rel="prefetch" href="/lanjz/assets/js/207.9be0aaa5.js"><link rel="prefetch" href="/lanjz/assets/js/208.28b55720.js"><link rel="prefetch" href="/lanjz/assets/js/209.95dddd05.js"><link rel="prefetch" href="/lanjz/assets/js/21.d79f1710.js"><link rel="prefetch" href="/lanjz/assets/js/210.2239f1f7.js"><link rel="prefetch" href="/lanjz/assets/js/211.d2458066.js"><link rel="prefetch" href="/lanjz/assets/js/22.7cbcaf48.js"><link rel="prefetch" href="/lanjz/assets/js/23.dff0737a.js"><link rel="prefetch" href="/lanjz/assets/js/24.2beb146f.js"><link rel="prefetch" href="/lanjz/assets/js/25.0e1b17a1.js"><link rel="prefetch" href="/lanjz/assets/js/26.985b79f2.js"><link rel="prefetch" href="/lanjz/assets/js/27.0fcaf242.js"><link rel="prefetch" href="/lanjz/assets/js/28.36a6a88c.js"><link rel="prefetch" href="/lanjz/assets/js/29.d286100e.js"><link rel="prefetch" href="/lanjz/assets/js/3.27e31810.js"><link rel="prefetch" href="/lanjz/assets/js/30.9eb442e8.js"><link rel="prefetch" href="/lanjz/assets/js/31.b159f216.js"><link rel="prefetch" href="/lanjz/assets/js/32.d7298b3c.js"><link rel="prefetch" href="/lanjz/assets/js/33.ab581bc5.js"><link rel="prefetch" href="/lanjz/assets/js/34.b8901077.js"><link rel="prefetch" href="/lanjz/assets/js/35.1e637ace.js"><link rel="prefetch" href="/lanjz/assets/js/36.071a9f76.js"><link rel="prefetch" href="/lanjz/assets/js/37.9968b31f.js"><link rel="prefetch" href="/lanjz/assets/js/38.b49374ad.js"><link rel="prefetch" href="/lanjz/assets/js/39.25d27ed5.js"><link rel="prefetch" href="/lanjz/assets/js/4.ded6c969.js"><link rel="prefetch" href="/lanjz/assets/js/40.8d6c16ec.js"><link rel="prefetch" href="/lanjz/assets/js/41.a54430d1.js"><link rel="prefetch" href="/lanjz/assets/js/42.3a6b8807.js"><link rel="prefetch" href="/lanjz/assets/js/43.7d56c411.js"><link rel="prefetch" href="/lanjz/assets/js/44.8a5bb498.js"><link rel="prefetch" href="/lanjz/assets/js/45.3fed533e.js"><link rel="prefetch" href="/lanjz/assets/js/46.86ed5edc.js"><link rel="prefetch" href="/lanjz/assets/js/47.768593cd.js"><link rel="prefetch" href="/lanjz/assets/js/48.05210dde.js"><link rel="prefetch" href="/lanjz/assets/js/49.e0e6bc4d.js"><link rel="prefetch" href="/lanjz/assets/js/5.171bc8d2.js"><link rel="prefetch" href="/lanjz/assets/js/50.ccc7ed6a.js"><link rel="prefetch" href="/lanjz/assets/js/51.b5f749c6.js"><link rel="prefetch" href="/lanjz/assets/js/52.f9ded128.js"><link rel="prefetch" href="/lanjz/assets/js/53.e9f1ef0b.js"><link rel="prefetch" href="/lanjz/assets/js/54.79a45f06.js"><link rel="prefetch" href="/lanjz/assets/js/55.2715d3e5.js"><link rel="prefetch" href="/lanjz/assets/js/56.589b2789.js"><link rel="prefetch" href="/lanjz/assets/js/57.890aabaa.js"><link rel="prefetch" href="/lanjz/assets/js/58.3b051268.js"><link rel="prefetch" href="/lanjz/assets/js/59.629fb521.js"><link rel="prefetch" href="/lanjz/assets/js/6.f0b53757.js"><link rel="prefetch" href="/lanjz/assets/js/60.b1573bf7.js"><link rel="prefetch" href="/lanjz/assets/js/61.50cd3a0a.js"><link rel="prefetch" href="/lanjz/assets/js/62.7efc8d9c.js"><link rel="prefetch" href="/lanjz/assets/js/63.3381c17b.js"><link rel="prefetch" href="/lanjz/assets/js/64.a341b082.js"><link rel="prefetch" href="/lanjz/assets/js/65.8c1ab58a.js"><link rel="prefetch" href="/lanjz/assets/js/66.52314748.js"><link rel="prefetch" href="/lanjz/assets/js/67.839c8274.js"><link rel="prefetch" href="/lanjz/assets/js/68.fe7382e4.js"><link rel="prefetch" href="/lanjz/assets/js/69.83567050.js"><link rel="prefetch" href="/lanjz/assets/js/7.da1cc505.js"><link rel="prefetch" href="/lanjz/assets/js/70.f084632f.js"><link rel="prefetch" href="/lanjz/assets/js/71.93b1248d.js"><link rel="prefetch" href="/lanjz/assets/js/72.47c1d260.js"><link rel="prefetch" href="/lanjz/assets/js/73.fe1e7b58.js"><link rel="prefetch" href="/lanjz/assets/js/74.030b95a4.js"><link rel="prefetch" href="/lanjz/assets/js/75.e12a20b9.js"><link rel="prefetch" href="/lanjz/assets/js/76.2313c448.js"><link rel="prefetch" href="/lanjz/assets/js/77.d895d3bd.js"><link rel="prefetch" href="/lanjz/assets/js/78.d9501aae.js"><link rel="prefetch" href="/lanjz/assets/js/79.aefe9675.js"><link rel="prefetch" href="/lanjz/assets/js/8.c71f82f4.js"><link rel="prefetch" href="/lanjz/assets/js/80.c60df22e.js"><link rel="prefetch" href="/lanjz/assets/js/81.d96e368b.js"><link rel="prefetch" href="/lanjz/assets/js/82.21080626.js"><link rel="prefetch" href="/lanjz/assets/js/83.3c680e7a.js"><link rel="prefetch" href="/lanjz/assets/js/84.6ace05c1.js"><link rel="prefetch" href="/lanjz/assets/js/85.1725cc35.js"><link rel="prefetch" href="/lanjz/assets/js/86.9042a5e6.js"><link rel="prefetch" href="/lanjz/assets/js/87.f37a40bf.js"><link rel="prefetch" href="/lanjz/assets/js/88.b9a80a41.js"><link rel="prefetch" href="/lanjz/assets/js/89.f77189b8.js"><link rel="prefetch" href="/lanjz/assets/js/9.80a3a10c.js"><link rel="prefetch" href="/lanjz/assets/js/90.7abe0273.js"><link rel="prefetch" href="/lanjz/assets/js/91.11c8df3a.js"><link rel="prefetch" href="/lanjz/assets/js/92.20e02502.js"><link rel="prefetch" href="/lanjz/assets/js/93.38a0255b.js"><link rel="prefetch" href="/lanjz/assets/js/94.49854fe2.js"><link rel="prefetch" href="/lanjz/assets/js/95.c6c61039.js"><link rel="prefetch" href="/lanjz/assets/js/96.3681012f.js"><link rel="prefetch" href="/lanjz/assets/js/97.7e3734a4.js"><link rel="prefetch" href="/lanjz/assets/js/98.56dec2c9.js"><link rel="prefetch" href="/lanjz/assets/js/99.c5f1a7a1.js">
    <link rel="stylesheet" href="/lanjz/assets/css/0.styles.5dda244b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/lanjz/" class="home-link router-link-active"><!----> <span class="site-name">Hello Wold</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/lanjz/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端基础" class="dropdown-title"><span class="title">前端基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端基础" class="mobile-dropdown-title"><span class="title">前端基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/JavaScript/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/ES6/" class="nav-link">
  ES6
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/HTML5/" class="nav-link">
  HTML5
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/CSS/" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Browser/" class="nav-link">
  Browser
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="网络&amp;算法" class="dropdown-title"><span class="title">网络&amp;算法</span> <span class="arrow down"></span></button> <button type="button" aria-label="网络&amp;算法" class="mobile-dropdown-title"><span class="title">网络&amp;算法</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/network/" class="nav-link router-link-active">
  网络
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Algorithm/" class="nav-link">
  算法
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/secure/" class="nav-link">
  Web安全
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架" class="dropdown-title"><span class="title">框架</span> <span class="arrow down"></span></button> <button type="button" aria-label="框架" class="mobile-dropdown-title"><span class="title">框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/Vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Vue3/" class="nav-link">
  Vue3
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/React/" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/qiankun/" class="nav-link">
  qiankun
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/NA/" class="nav-link">
  跨平台
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Node" class="dropdown-title"><span class="title">Node</span> <span class="arrow down"></span></button> <button type="button" aria-label="Node" class="mobile-dropdown-title"><span class="title">Node</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/Node/基础/" class="nav-link">
  基础
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Node/Api/" class="nav-link">
  API
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Node/Package/" class="nav-link">
  yarn&amp;npm
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Node/Webpack/" class="nav-link">
  Webpack
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Node/Vite/" class="nav-link">
  Vite
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Node/数据库/" class="nav-link">
  SQL
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工程化" class="dropdown-title"><span class="title">工程化</span> <span class="arrow down"></span></button> <button type="button" aria-label="工程化" class="mobile-dropdown-title"><span class="title">工程化</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/工程化/前端优化总结/" class="nav-link">
  前端优化总结
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/系统设计/" class="nav-link">
  系统设计
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/预加载&amp;预解析.html" class="nav-link">
  预加载&amp;预解析
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/重构改善既有代码的设计.html" class="nav-link">
  重构代码原则
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/开发与调试技巧.html" class="nav-link">
  开发与调试
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/组件设计的基本原则.html" class="nav-link">
  组件设计
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/公共模块管理.html" class="nav-link">
  公共模块管理
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/内存泄漏.html" class="nav-link">
  内存泄漏
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/前端异常捕获.html" class="nav-link">
  前端异常捕获
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/自动化部署.html" class="nav-link">
  自动化部署
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/疑难杂症.html" class="nav-link">
  问题小计
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="利其器" class="dropdown-title"><span class="title">利其器</span> <span class="arrow down"></span></button> <button type="button" aria-label="利其器" class="mobile-dropdown-title"><span class="title">利其器</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/利其器/Mac.html" class="nav-link">
  Mac
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/利其器/Github.html" class="nav-link">
  Github
</a></li></ul></div></div><div class="nav-item"><a href="/lanjz/Im/" class="nav-link">
  关于我
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/lanjz/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端基础" class="dropdown-title"><span class="title">前端基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端基础" class="mobile-dropdown-title"><span class="title">前端基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/JavaScript/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/ES6/" class="nav-link">
  ES6
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/HTML5/" class="nav-link">
  HTML5
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/CSS/" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Browser/" class="nav-link">
  Browser
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="网络&amp;算法" class="dropdown-title"><span class="title">网络&amp;算法</span> <span class="arrow down"></span></button> <button type="button" aria-label="网络&amp;算法" class="mobile-dropdown-title"><span class="title">网络&amp;算法</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/network/" class="nav-link router-link-active">
  网络
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Algorithm/" class="nav-link">
  算法
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/secure/" class="nav-link">
  Web安全
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架" class="dropdown-title"><span class="title">框架</span> <span class="arrow down"></span></button> <button type="button" aria-label="框架" class="mobile-dropdown-title"><span class="title">框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/Vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Vue3/" class="nav-link">
  Vue3
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/React/" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/qiankun/" class="nav-link">
  qiankun
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/NA/" class="nav-link">
  跨平台
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Node" class="dropdown-title"><span class="title">Node</span> <span class="arrow down"></span></button> <button type="button" aria-label="Node" class="mobile-dropdown-title"><span class="title">Node</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/Node/基础/" class="nav-link">
  基础
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Node/Api/" class="nav-link">
  API
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Node/Package/" class="nav-link">
  yarn&amp;npm
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Node/Webpack/" class="nav-link">
  Webpack
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Node/Vite/" class="nav-link">
  Vite
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Node/数据库/" class="nav-link">
  SQL
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工程化" class="dropdown-title"><span class="title">工程化</span> <span class="arrow down"></span></button> <button type="button" aria-label="工程化" class="mobile-dropdown-title"><span class="title">工程化</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/工程化/前端优化总结/" class="nav-link">
  前端优化总结
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/系统设计/" class="nav-link">
  系统设计
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/预加载&amp;预解析.html" class="nav-link">
  预加载&amp;预解析
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/重构改善既有代码的设计.html" class="nav-link">
  重构代码原则
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/开发与调试技巧.html" class="nav-link">
  开发与调试
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/组件设计的基本原则.html" class="nav-link">
  组件设计
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/公共模块管理.html" class="nav-link">
  公共模块管理
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/内存泄漏.html" class="nav-link">
  内存泄漏
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/前端异常捕获.html" class="nav-link">
  前端异常捕获
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/自动化部署.html" class="nav-link">
  自动化部署
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/疑难杂症.html" class="nav-link">
  问题小计
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="利其器" class="dropdown-title"><span class="title">利其器</span> <span class="arrow down"></span></button> <button type="button" aria-label="利其器" class="mobile-dropdown-title"><span class="title">利其器</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/利其器/Mac.html" class="nav-link">
  Mac
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/利其器/Github.html" class="nav-link">
  Github
</a></li></ul></div></div><div class="nav-item"><a href="/lanjz/Im/" class="nav-link">
  关于我
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/lanjz/network/HTTP及演变.html" class="sidebar-link">HTTP及演变</a></li><li><a href="/lanjz/network/HTTPS.html" class="sidebar-link">HTTPS</a></li><li><a href="/lanjz/network/浏览器缓存.html" class="sidebar-link">浏览器缓存</a></li><li><a href="/lanjz/network/跨域.html" class="active sidebar-link">跨域</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/lanjz/network/跨域.html#跨域请求的解决方案" class="sidebar-link">跨域请求的解决方案</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/lanjz/network/跨域.html#基于jsonp实现的跨域请求" class="sidebar-link">基于jsonp实现的跨域请求</a></li><li class="sidebar-sub-header"><a href="/lanjz/network/跨域.html#form表单提交" class="sidebar-link">form表单提交</a></li><li class="sidebar-sub-header"><a href="/lanjz/network/跨域.html#cors-cross-origin-resource-sharing" class="sidebar-link">CORS(Cross-origin resource sharing)</a></li><li class="sidebar-sub-header"><a href="/lanjz/network/跨域.html#修改document-domain" class="sidebar-link">修改document.domain</a></li><li class="sidebar-sub-header"><a href="/lanjz/network/跨域.html#利用服务器代理" class="sidebar-link">利用服务器代理</a></li></ul></li><li class="sidebar-sub-header"><a href="/lanjz/network/跨域.html#http响应首部字段" class="sidebar-link">HTTP响应首部字段</a></li><li class="sidebar-sub-header"><a href="/lanjz/network/跨域.html#http请求头部字段" class="sidebar-link">HTTP请求头部字段</a></li><li class="sidebar-sub-header"><a href="/lanjz/network/跨域.html#预检请求" class="sidebar-link">预检请求</a></li></ul></li><li><a href="/lanjz/network/CDN.html" class="sidebar-link">CDN</a></li><li><a href="/lanjz/network/Cookie.html" class="sidebar-link">Cookie</a></li><li><a href="/lanjz/network/DNS.html" class="sidebar-link">DNS</a></li><li><a href="/lanjz/network/TCP.html" class="sidebar-link">TCP</a></li><li><a href="/lanjz/network/keep-alive.html" class="sidebar-link">keep-alive</a></li><li><a href="/lanjz/network/WebSocket.html" class="sidebar-link">WebSocket</a></li><li><a href="/lanjz/network/网络层的优化.html" class="sidebar-link">前端优化之 Http 相关优化总结</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="跨域"><a href="#跨域" class="header-anchor">#</a> 跨域</h1> <p><strong>一个源的定义</strong></p> <p>如果两个页面的协议，端口（如果有指定）和域名都相同，则两个页面具有相同的源。
举个例子：</p> <div class="language-js extra-class"><pre class="language-js"><code>下表给出了相对http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>a<span class="token punctuation">.</span>lanjz<span class="token punctuation">.</span>com<span class="token operator">/</span>dir<span class="token operator">/</span>page<span class="token punctuation">.</span>html同源检测的示例<span class="token operator">:</span> 
<span class="token constant">URL</span>                                         结果          原因
http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>a<span class="token punctuation">.</span>lanjz<span class="token punctuation">.</span>com<span class="token operator">/</span>dir2<span class="token operator">/</span>other<span class="token punctuation">.</span>html            成功     协议，端口（如果有指定）和域名都相同
http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>a<span class="token punctuation">.</span>lanjz<span class="token punctuation">.</span>com<span class="token operator">/</span>dir<span class="token operator">/</span>inner<span class="token operator">/</span>another<span class="token punctuation">.</span>html     成功    协议，端口（如果有指定）和域名都相同 
https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>a<span class="token punctuation">.</span>lanjz<span class="token punctuation">.</span>com<span class="token operator">/</span>secure<span class="token punctuation">.</span>html               失败    <span class="token function">不同协议</span> <span class="token punctuation">(</span> https和http <span class="token punctuation">)</span>
http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>a<span class="token punctuation">.</span>lanjz<span class="token punctuation">.</span>com<span class="token operator">:</span><span class="token number">81</span><span class="token operator">/</span>dir<span class="token operator">/</span>etc<span class="token punctuation">.</span>html            失败    <span class="token function">不同端口</span> <span class="token punctuation">(</span> <span class="token number">81</span>和<span class="token number">80</span><span class="token punctuation">)</span>
http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>a<span class="token punctuation">.</span>opq<span class="token punctuation">.</span>com<span class="token operator">/</span>dir<span class="token operator">/</span>other<span class="token punctuation">.</span>html             失败    <span class="token function">不同域名</span> <span class="token punctuation">(</span> lanjz和opq<span class="token punctuation">)</span>
</code></pre></div><p><strong>同源策略</strong></p> <p>同源策略是浏览器的一个安全功能，不同源的客户端脚本在没有明确授权的情况下，不能读写对方资源</p> <h2 id="跨域请求的解决方案"><a href="#跨域请求的解决方案" class="header-anchor">#</a> 跨域请求的解决方案</h2> <h3 id="基于jsonp实现的跨域请求"><a href="#基于jsonp实现的跨域请求" class="header-anchor">#</a> 基于jsonp实现的跨域请求</h3> <p>跨域资源的引入是可以的，如嵌入到页面中的<code>script</code>，<code>img</code>，<code>link</code>，<code>iframe</code>等。</p> <p><code>jsonp</code>的原理就是利用<code>&lt;script&gt;</code>标签没有跨域限制，通过<code>&lt;script&gt;</code>标签<code>src</code>属性，发送带有<code>callback</code>参数的<code>GET</code>请求，服务端将接口返回数据拼凑到<code>callback</code>函数中，返回给浏览器，浏览器解析执行，从而前端拿到<code>callback</code>函数返回的数据</p> <p><strong>例子</strong></p> <p>服务端：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'http'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> urllib <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'url'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> port <span class="token operator">=</span> <span class="token number">10011</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'name'</span><span class="token operator">:</span> <span class="token string">'jifeng'</span><span class="token punctuation">,</span> <span class="token string">'company'</span><span class="token operator">:</span> <span class="token string">'taobao'</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">var</span> params <span class="token operator">=</span> urllib<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>url<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>params<span class="token punctuation">.</span>query <span class="token operator">&amp;&amp;</span> params<span class="token punctuation">.</span>query<span class="token punctuation">.</span>callback<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//console.log(params.query.callback);</span>
    <span class="token keyword">var</span> str <span class="token operator">=</span>  params<span class="token punctuation">.</span>query<span class="token punctuation">.</span>callback <span class="token operator">+</span> <span class="token string">'('</span> <span class="token operator">+</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">')'</span><span class="token punctuation">;</span><span class="token comment">//jsonp</span>
    res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//普通的json</span>
  <span class="token punctuation">}</span>     
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span>port<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'server is listening on port '</span> <span class="token operator">+</span> port<span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>前端JS</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
    <span class="token keyword">var</span> script <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'script'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    script<span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token string">'text/javascript'</span><span class="token punctuation">;</span>

    <span class="token comment">// 传参一个回调函数名给后端，方便后端返回时执行这个在前端定义的回调函数</span>
    script<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token string">'http://www.localhost:10011?user=admin&amp;callback=handleCallback'</span><span class="token punctuation">;</span>
    document<span class="token punctuation">.</span>head<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>script<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 回调执行函数</span>
    <span class="token keyword">function</span> <span class="token function">handleCallback</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">alert</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
 <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

</code></pre></div><h3 id="form表单提交"><a href="#form表单提交" class="header-anchor">#</a> form表单提交</h3> <p><code>ajax</code>跨域是因为浏览需要保护用户的隐私而给JS设定的限制，<code>form</code>表单提交会刷新页面，原页面的脚本无法获取新页面的内容，所以浏览器认为是安全的</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.localhost:10011<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>提交<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="cors-cross-origin-resource-sharing"><a href="#cors-cross-origin-resource-sharing" class="header-anchor">#</a> CORS(Cross-origin resource sharing)</h3> <div class="language-js extra-class"><pre class="language-js"><code>Access<span class="token operator">-</span>Control<span class="token operator">-</span>Allow<span class="token operator">-</span>Origin<span class="token operator">:</span> http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>api<span class="token punctuation">.</span>bob<span class="token punctuation">.</span>com
Access<span class="token operator">-</span>Control<span class="token operator">-</span>Allow<span class="token operator">-</span>Credentials<span class="token operator">:</span> <span class="token boolean">true</span>
Access<span class="token operator">-</span>Control<span class="token operator">-</span>Expose<span class="token operator">-</span>Headers<span class="token operator">:</span> FooBar
Content<span class="token operator">-</span>Type<span class="token operator">:</span> text<span class="token operator">/</span>html<span class="token punctuation">;</span> charset<span class="token operator">=</span>utf<span class="token operator">-</span><span class="token number">8</span>
</code></pre></div><p>服务器设置<code>Access-Control-Allow-Origin：允许跨域的域名</code></p> <p>该字段是必须的。它的值要么是请求时<code>Origin</code>字段的值，要么是一个<code>*</code>，表示接受任意域名的请求。</p> <p>服务器还有其它配置</p> <ul><li><p>服务器设置<code>Access-Control-Allow-Credentials</code></p> <p>正常跨域请求是不允许携带Cookie的，如果需要带Cookie还需要进行以下配置</p> <p>该字段可选。它的值是一个布尔值，表示是否允许发送Cookie。默认情况下值为<code>false</code>，Cookie不包括在CORS请求之中
设为<code>true</code>后，即表示服务器明确许可，Cookie可以包含在请求中，一起发给服务器。</p> <p>服务器设置之后，前端请求还需要配置<code>withCredentials</code>属性</p></li> <li><p>服务器设置<code>Access-Control-Expose-Headers</code></p> <p>CORS请求时，<code>XMLHttpRequest</code>对象的<code>getResponseHeader()</code>方法只能拿到6个基本字段：<code>Cache-Control</code>、<code>Content-Language</code>、<code>Content-Type</code>、<code>Expires</code>、<code>Last-Modified</code>、<code>Pragma</code>。如果想拿到其他字段，就必须在<code>Access-Control-Expose-Headers</code>里面指定。
上面的例子指定，<code>getResponseHeader('FooBar')</code>可以返回<code>FooBar</code>字段的值</p></li></ul> <h3 id="修改document-domain"><a href="#修改document-domain" class="header-anchor">#</a> 修改document.domain</h3> <p>这个解决方案只适用于主域，协议，端口相同，子域不同的跨域应用场景。其他情况不能使用</p> <p>比如在：<code>aaa.com</code>的一个网页<code>a.html</code>里面利用<code>iframe</code>引入了一个<code>bbb.com</code>里的一个网页<code>b.html</code>。
这时在<code>a.html</code>里面可以看到<code>b.html</code>里的内容，但是却不能利用javascript来操作它。因为这两个页面属于不同的域</p> <p>如果在<code>a.html</code>里引入<code>aaa.com</code>里的另一个网页，是不会有这个问题的，因为域相等</p> <p>有另一种情况，两个子域名：<code>aaa.xxx.com</code> 和 <code>bbb.xxx.com</code>，<code>aaa.xxx.com</code>里的一个网页(<code>a.html</code>)引入了<code>bbb.xxx.com</code> 里的一个网页 <code>b.html</code>，这时<code>a.html</code>里同样是不能操作<code>b.html</code>里面的内容的。因为<code>document.domain</code>不一样（一个是<code>aaa.xxx.com</code>，另一个是<code>bbb.xxx.com</code>）</p> <p>这时我们就可以通过Javascript将两个页面的<code>domain</code>改成一样的，需要在<code>a.html</code>里与<code>b.html</code>里都加入代码如下:</p> <div class="language-js extra-class"><pre class="language-js"><code>document<span class="token punctuation">.</span>domain <span class="token operator">=</span> <span class="token string">&quot;xxx.com&quot;</span>
</code></pre></div><p>这样这两个页面就可以互相操作了。也就是实现了同一基础域名之间的&quot;跨域&quot;</p> <h3 id="利用服务器代理"><a href="#利用服务器代理" class="header-anchor">#</a> 利用服务器代理</h3> <p>跨域是浏览器给的限制，所以平时开发时可以利用<code>node</code>加一层代理转发接口的方式来解决跨域问题，Webpack也提供了相关的配置：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> domain <span class="token operator">=</span> <span class="token string">&quot;http://i.chuangliang.com/&quot;</span>

devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    proxy<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;/api&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        target<span class="token operator">:</span> domain<span class="token punctuation">,</span>
        ws<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        changeOrigin<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        cookieDomainRewrite<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        pathRewrite<span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token string">'^/api'</span><span class="token operator">:</span> <span class="token string">'/'</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function-variable function">onProxyReq</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">onProxyReq</span><span class="token punctuation">(</span><span class="token parameter">proxyReq</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          console<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">代理请求===</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>proxyReq<span class="token punctuation">.</span>path<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><h2 id="http响应首部字段"><a href="#http响应首部字段" class="header-anchor">#</a> HTTP响应首部字段</h2> <ul><li><p><code>Accept-Control-Allow-Origin</code>： 用于设置允许访问该资源的外部URL</p></li> <li><p><code>Accept-Control-Expose-Headers</code>：对跨域访问在跨域访问时，<code>XMLHttpRequest对象的getResponseHeader()</code>方法只能拿到一些最基本的响应头，<code>Cache-Control</code>、<code>Content-Language</code>、<code>Content-Type</code>、<code>Expires</code>、<code>Last-Modified、Pragma</code>，如果要访问其他头，则需要服务器设置本响应头。</p></li></ul> <p><code>Access-Control-Expose-Headers</code> 头让服务器把允许浏览器访问的头放入白名单，例如：</p> <div class="language- extra-class"><pre class="language-text"><code>Access-Control-Expose-Headers: X-My-Custom-Header, X-Another-Custom-Header
</code></pre></div><ul><li><p><code>Access-Control-Max-Age</code>：指定了<code>preflight</code>请求的结果能够被缓存多久</p></li> <li><p><code>Access-Control-Allow-Credentials</code>：该字段可选。它的值是一个布尔值，表示是否允许发送Cookie。默认情况下，Cookie不包括在CORS请求之中。设为true，即表示服务器明确许可，Cookie可以包含在请求中，一起发给服务器</p></li> <li><p><code>Access-Control-Allow-Methods</code>：首部字段用于预检请求的响应。其指明了实际请求所允许使用的 HTTP 方法。</p></li></ul> <h2 id="http请求头部字段"><a href="#http请求头部字段" class="header-anchor">#</a> HTTP请求头部字段</h2> <ul><li><p><code>origin</code>：发起请求的源站URL，不包含路径</p> <p>注意：无论是否跨域请求，<code>origin</code>都会被发送</p></li> <li><p><code>Accept-Control-Request-Method</code>：用于预检请求，将实际所请求的方法告诉服务器</p> <p>在项目中如果是跨域请求时，我们发现同一个请求有两次发送，第一次是<code>options</code>，第二次才是真正的请求。第一次请求就是预检请求，请求头中会带上<code>Accept-Control-Request-Method</code>，值是我们真正要请求的方法</p></li></ul> <h2 id="预检请求"><a href="#预检请求" class="header-anchor">#</a> 预检请求</h2> <p>对于非简单请求如<code>POST</code>,<code>PUT</code>或<code>DELETE</code>，在发这些类型的请求之前会先发送一个&quot;预检&quot;请求, 请求方法是<code>OPTIONS</code></p> <p>浏览器先询问服务器，当前网页所在的域名是否在服务器的许可名单之中，以及可以使用哪些HTTP动词和头信息字段。
只有得到肯定答复，浏览器才会发出正式的<code>XMLHttpRequest</code>请求，否则就报错</p> <p>一般预检请求都包含以下几个头部：</p> <ul><li><p><code>Origin</code>: 表示请求来自哪个源</p></li> <li><p><code>Access-Control-Request-Method</code>: 用来列出浏览器的CORS请求会用到哪些HTTP方法</p></li> <li><p><code>Access-Control-Request-Headers</code>: 浏览器CORS请求会额外发送的头信息字段</p></li></ul> <blockquote><p><a href="http://www.ruanyifeng.com/blog/2016/04/cors.html" target="_blank" rel="noopener noreferrer">跨域资源共享 CORS 详解<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/lanjz/network/浏览器缓存.html" class="prev">
        浏览器缓存
      </a></span> <span class="next"><a href="/lanjz/network/CDN.html">
        CDN
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/lanjz/assets/js/app.3a5e8ccd.js" defer></script><script src="/lanjz/assets/js/2.a95fb859.js" defer></script><script src="/lanjz/assets/js/190.b74ab8c3.js" defer></script>
  </body>
</html>
