<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>对象 | Hello Wold</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="Just playing around">
    
    <link rel="preload" href="/lanjz/assets/css/0.styles.5dda244b.css" as="style"><link rel="preload" href="/lanjz/assets/js/app.c1b7622d.js" as="script"><link rel="preload" href="/lanjz/assets/js/2.76a29515.js" as="script"><link rel="preload" href="/lanjz/assets/js/70.b07da230.js" as="script"><link rel="prefetch" href="/lanjz/assets/js/10.62ee6e5d.js"><link rel="prefetch" href="/lanjz/assets/js/100.c4bd74a7.js"><link rel="prefetch" href="/lanjz/assets/js/101.95d86e66.js"><link rel="prefetch" href="/lanjz/assets/js/102.b1f523cb.js"><link rel="prefetch" href="/lanjz/assets/js/103.08370114.js"><link rel="prefetch" href="/lanjz/assets/js/104.012e0343.js"><link rel="prefetch" href="/lanjz/assets/js/105.847356ca.js"><link rel="prefetch" href="/lanjz/assets/js/106.92575ef6.js"><link rel="prefetch" href="/lanjz/assets/js/107.3fc5a89e.js"><link rel="prefetch" href="/lanjz/assets/js/108.d84c4a65.js"><link rel="prefetch" href="/lanjz/assets/js/109.9c465c7d.js"><link rel="prefetch" href="/lanjz/assets/js/11.e9cd5566.js"><link rel="prefetch" href="/lanjz/assets/js/110.b83b80bf.js"><link rel="prefetch" href="/lanjz/assets/js/111.3fde5d6e.js"><link rel="prefetch" href="/lanjz/assets/js/112.56c792cf.js"><link rel="prefetch" href="/lanjz/assets/js/113.ffaea08c.js"><link rel="prefetch" href="/lanjz/assets/js/114.db03d3dd.js"><link rel="prefetch" href="/lanjz/assets/js/115.17058fb8.js"><link rel="prefetch" href="/lanjz/assets/js/116.9fbd4d44.js"><link rel="prefetch" href="/lanjz/assets/js/117.fd42d2b4.js"><link rel="prefetch" href="/lanjz/assets/js/118.5a8f1b65.js"><link rel="prefetch" href="/lanjz/assets/js/119.d0a29fb3.js"><link rel="prefetch" href="/lanjz/assets/js/12.322d4c40.js"><link rel="prefetch" href="/lanjz/assets/js/120.41c179fb.js"><link rel="prefetch" href="/lanjz/assets/js/121.163bea24.js"><link rel="prefetch" href="/lanjz/assets/js/122.6b0f213e.js"><link rel="prefetch" href="/lanjz/assets/js/123.286d781d.js"><link rel="prefetch" href="/lanjz/assets/js/124.670f9a55.js"><link rel="prefetch" href="/lanjz/assets/js/125.3df950d3.js"><link rel="prefetch" href="/lanjz/assets/js/126.3e2b38ff.js"><link rel="prefetch" href="/lanjz/assets/js/127.d8b2ca18.js"><link rel="prefetch" href="/lanjz/assets/js/128.95115018.js"><link rel="prefetch" href="/lanjz/assets/js/129.f662c493.js"><link rel="prefetch" href="/lanjz/assets/js/13.07f42784.js"><link rel="prefetch" href="/lanjz/assets/js/130.486e418d.js"><link rel="prefetch" href="/lanjz/assets/js/131.f0d9e106.js"><link rel="prefetch" href="/lanjz/assets/js/132.5ea269f4.js"><link rel="prefetch" href="/lanjz/assets/js/133.ae283b26.js"><link rel="prefetch" href="/lanjz/assets/js/134.20c20c63.js"><link rel="prefetch" href="/lanjz/assets/js/135.de81ac5b.js"><link rel="prefetch" href="/lanjz/assets/js/136.0a4b0aa0.js"><link rel="prefetch" href="/lanjz/assets/js/137.b48656dd.js"><link rel="prefetch" href="/lanjz/assets/js/138.d6252210.js"><link rel="prefetch" href="/lanjz/assets/js/139.8bd095cc.js"><link rel="prefetch" href="/lanjz/assets/js/14.300f7427.js"><link rel="prefetch" href="/lanjz/assets/js/140.6d46b062.js"><link rel="prefetch" href="/lanjz/assets/js/141.3f498211.js"><link rel="prefetch" href="/lanjz/assets/js/142.db3aa273.js"><link rel="prefetch" href="/lanjz/assets/js/143.86b28dc0.js"><link rel="prefetch" href="/lanjz/assets/js/144.05ed1558.js"><link rel="prefetch" href="/lanjz/assets/js/145.e3aecef5.js"><link rel="prefetch" href="/lanjz/assets/js/146.846b148f.js"><link rel="prefetch" href="/lanjz/assets/js/147.e6ef7110.js"><link rel="prefetch" href="/lanjz/assets/js/148.e85e7d8c.js"><link rel="prefetch" href="/lanjz/assets/js/149.c2a63ed7.js"><link rel="prefetch" href="/lanjz/assets/js/15.75927af1.js"><link rel="prefetch" href="/lanjz/assets/js/150.f12473c8.js"><link rel="prefetch" href="/lanjz/assets/js/151.ced4b3e5.js"><link rel="prefetch" href="/lanjz/assets/js/152.ccdcf91c.js"><link rel="prefetch" href="/lanjz/assets/js/153.1266d0a0.js"><link rel="prefetch" href="/lanjz/assets/js/154.b0a23d58.js"><link rel="prefetch" href="/lanjz/assets/js/155.b32403f2.js"><link rel="prefetch" href="/lanjz/assets/js/156.01c3345d.js"><link rel="prefetch" href="/lanjz/assets/js/157.d8d1db20.js"><link rel="prefetch" href="/lanjz/assets/js/158.8e9ffe79.js"><link rel="prefetch" href="/lanjz/assets/js/159.83ef9ba7.js"><link rel="prefetch" href="/lanjz/assets/js/16.972e58b4.js"><link rel="prefetch" href="/lanjz/assets/js/160.a438f6a1.js"><link rel="prefetch" href="/lanjz/assets/js/161.8391c5c3.js"><link rel="prefetch" href="/lanjz/assets/js/162.e33b25d7.js"><link rel="prefetch" href="/lanjz/assets/js/163.d47c6349.js"><link rel="prefetch" href="/lanjz/assets/js/164.7b7c35ca.js"><link rel="prefetch" href="/lanjz/assets/js/165.0a0fe415.js"><link rel="prefetch" href="/lanjz/assets/js/166.08abe831.js"><link rel="prefetch" href="/lanjz/assets/js/167.d57ba4ff.js"><link rel="prefetch" href="/lanjz/assets/js/168.3a1362e5.js"><link rel="prefetch" href="/lanjz/assets/js/169.a4082912.js"><link rel="prefetch" href="/lanjz/assets/js/17.30f78697.js"><link rel="prefetch" href="/lanjz/assets/js/170.f8ff147f.js"><link rel="prefetch" href="/lanjz/assets/js/171.3dd693ed.js"><link rel="prefetch" href="/lanjz/assets/js/172.24e08c9d.js"><link rel="prefetch" href="/lanjz/assets/js/173.234f4a22.js"><link rel="prefetch" href="/lanjz/assets/js/174.17c420c2.js"><link rel="prefetch" href="/lanjz/assets/js/175.7590c38b.js"><link rel="prefetch" href="/lanjz/assets/js/176.acca0638.js"><link rel="prefetch" href="/lanjz/assets/js/177.f0f956b4.js"><link rel="prefetch" href="/lanjz/assets/js/178.290ffb7d.js"><link rel="prefetch" href="/lanjz/assets/js/179.df5f7755.js"><link rel="prefetch" href="/lanjz/assets/js/18.e549c571.js"><link rel="prefetch" href="/lanjz/assets/js/180.cab77a6f.js"><link rel="prefetch" href="/lanjz/assets/js/181.d2d56713.js"><link rel="prefetch" href="/lanjz/assets/js/182.c9898cf4.js"><link rel="prefetch" href="/lanjz/assets/js/183.f6ad2d74.js"><link rel="prefetch" href="/lanjz/assets/js/184.3bb29ddc.js"><link rel="prefetch" href="/lanjz/assets/js/185.ab996038.js"><link rel="prefetch" href="/lanjz/assets/js/186.4bf73df6.js"><link rel="prefetch" href="/lanjz/assets/js/187.e0128233.js"><link rel="prefetch" href="/lanjz/assets/js/188.7ab76336.js"><link rel="prefetch" href="/lanjz/assets/js/189.874fce80.js"><link rel="prefetch" href="/lanjz/assets/js/19.4c6e94ae.js"><link rel="prefetch" href="/lanjz/assets/js/190.a5bf7907.js"><link rel="prefetch" href="/lanjz/assets/js/191.d5a49f50.js"><link rel="prefetch" href="/lanjz/assets/js/192.42571b8f.js"><link rel="prefetch" href="/lanjz/assets/js/193.b6db1d72.js"><link rel="prefetch" href="/lanjz/assets/js/194.1a0ec838.js"><link rel="prefetch" href="/lanjz/assets/js/195.be36b752.js"><link rel="prefetch" href="/lanjz/assets/js/196.bd7d5a9c.js"><link rel="prefetch" href="/lanjz/assets/js/197.d33047d5.js"><link rel="prefetch" href="/lanjz/assets/js/198.50df36c5.js"><link rel="prefetch" href="/lanjz/assets/js/199.72a9c16f.js"><link rel="prefetch" href="/lanjz/assets/js/20.53b938d1.js"><link rel="prefetch" href="/lanjz/assets/js/200.5ca34039.js"><link rel="prefetch" href="/lanjz/assets/js/201.6cda0850.js"><link rel="prefetch" href="/lanjz/assets/js/21.a9b92c58.js"><link rel="prefetch" href="/lanjz/assets/js/22.a1bd3612.js"><link rel="prefetch" href="/lanjz/assets/js/23.eeb43dc0.js"><link rel="prefetch" href="/lanjz/assets/js/24.adfa4c45.js"><link rel="prefetch" href="/lanjz/assets/js/25.4aa76997.js"><link rel="prefetch" href="/lanjz/assets/js/26.437a7bee.js"><link rel="prefetch" href="/lanjz/assets/js/27.a7d7c518.js"><link rel="prefetch" href="/lanjz/assets/js/28.77f14e0a.js"><link rel="prefetch" href="/lanjz/assets/js/29.235100b7.js"><link rel="prefetch" href="/lanjz/assets/js/3.33ad884d.js"><link rel="prefetch" href="/lanjz/assets/js/30.7135963d.js"><link rel="prefetch" href="/lanjz/assets/js/31.2c29f775.js"><link rel="prefetch" href="/lanjz/assets/js/32.84138a6f.js"><link rel="prefetch" href="/lanjz/assets/js/33.e59c9466.js"><link rel="prefetch" href="/lanjz/assets/js/34.5583de7d.js"><link rel="prefetch" href="/lanjz/assets/js/35.664b034c.js"><link rel="prefetch" href="/lanjz/assets/js/36.fa82e931.js"><link rel="prefetch" href="/lanjz/assets/js/37.fdac23b5.js"><link rel="prefetch" href="/lanjz/assets/js/38.4a098ada.js"><link rel="prefetch" href="/lanjz/assets/js/39.99bd1910.js"><link rel="prefetch" href="/lanjz/assets/js/4.32155966.js"><link rel="prefetch" href="/lanjz/assets/js/40.ef4ea8a0.js"><link rel="prefetch" href="/lanjz/assets/js/41.359238c5.js"><link rel="prefetch" href="/lanjz/assets/js/42.dfcfb7c3.js"><link rel="prefetch" href="/lanjz/assets/js/43.ee5a7ebf.js"><link rel="prefetch" href="/lanjz/assets/js/44.6f62c0f1.js"><link rel="prefetch" href="/lanjz/assets/js/45.5c4819c1.js"><link rel="prefetch" href="/lanjz/assets/js/46.e4e2578b.js"><link rel="prefetch" href="/lanjz/assets/js/47.fa5b981d.js"><link rel="prefetch" href="/lanjz/assets/js/48.9a9eb767.js"><link rel="prefetch" href="/lanjz/assets/js/49.0cdc259a.js"><link rel="prefetch" href="/lanjz/assets/js/5.d87d2f2b.js"><link rel="prefetch" href="/lanjz/assets/js/50.ee051ad4.js"><link rel="prefetch" href="/lanjz/assets/js/51.c01469f4.js"><link rel="prefetch" href="/lanjz/assets/js/52.a123d28c.js"><link rel="prefetch" href="/lanjz/assets/js/53.ee9e9982.js"><link rel="prefetch" href="/lanjz/assets/js/54.0dff58ec.js"><link rel="prefetch" href="/lanjz/assets/js/55.3bfcd15b.js"><link rel="prefetch" href="/lanjz/assets/js/56.349a1912.js"><link rel="prefetch" href="/lanjz/assets/js/57.ff005b8b.js"><link rel="prefetch" href="/lanjz/assets/js/58.cf597c47.js"><link rel="prefetch" href="/lanjz/assets/js/59.58b5d8d9.js"><link rel="prefetch" href="/lanjz/assets/js/6.82fc9486.js"><link rel="prefetch" href="/lanjz/assets/js/60.91f541dc.js"><link rel="prefetch" href="/lanjz/assets/js/61.392806c3.js"><link rel="prefetch" href="/lanjz/assets/js/62.e2405932.js"><link rel="prefetch" href="/lanjz/assets/js/63.1c152ad8.js"><link rel="prefetch" href="/lanjz/assets/js/64.ee8df7bf.js"><link rel="prefetch" href="/lanjz/assets/js/65.ada1d888.js"><link rel="prefetch" href="/lanjz/assets/js/66.bb506dea.js"><link rel="prefetch" href="/lanjz/assets/js/67.3ff4f146.js"><link rel="prefetch" href="/lanjz/assets/js/68.ed3d7d5c.js"><link rel="prefetch" href="/lanjz/assets/js/69.a8aca245.js"><link rel="prefetch" href="/lanjz/assets/js/7.6b15c612.js"><link rel="prefetch" href="/lanjz/assets/js/71.57c05e11.js"><link rel="prefetch" href="/lanjz/assets/js/72.a49a948f.js"><link rel="prefetch" href="/lanjz/assets/js/73.9b54cdd3.js"><link rel="prefetch" href="/lanjz/assets/js/74.78ae70ec.js"><link rel="prefetch" href="/lanjz/assets/js/75.fa47b0d4.js"><link rel="prefetch" href="/lanjz/assets/js/76.7caad671.js"><link rel="prefetch" href="/lanjz/assets/js/77.42767b5e.js"><link rel="prefetch" href="/lanjz/assets/js/78.a5e8e519.js"><link rel="prefetch" href="/lanjz/assets/js/79.fa72a02b.js"><link rel="prefetch" href="/lanjz/assets/js/8.9b5a8769.js"><link rel="prefetch" href="/lanjz/assets/js/80.69967fde.js"><link rel="prefetch" href="/lanjz/assets/js/81.bd3158df.js"><link rel="prefetch" href="/lanjz/assets/js/82.de0bde3a.js"><link rel="prefetch" href="/lanjz/assets/js/83.ba9053d8.js"><link rel="prefetch" href="/lanjz/assets/js/84.409abdcc.js"><link rel="prefetch" href="/lanjz/assets/js/85.0261df2a.js"><link rel="prefetch" href="/lanjz/assets/js/86.12af5942.js"><link rel="prefetch" href="/lanjz/assets/js/87.e5e0aa4c.js"><link rel="prefetch" href="/lanjz/assets/js/88.c6ad51a6.js"><link rel="prefetch" href="/lanjz/assets/js/89.51aae356.js"><link rel="prefetch" href="/lanjz/assets/js/9.c51a4211.js"><link rel="prefetch" href="/lanjz/assets/js/90.f78e9303.js"><link rel="prefetch" href="/lanjz/assets/js/91.26d8ac06.js"><link rel="prefetch" href="/lanjz/assets/js/92.e574e15d.js"><link rel="prefetch" href="/lanjz/assets/js/93.d2f8a8dc.js"><link rel="prefetch" href="/lanjz/assets/js/94.b982042e.js"><link rel="prefetch" href="/lanjz/assets/js/95.ab80e429.js"><link rel="prefetch" href="/lanjz/assets/js/96.e9dac98e.js"><link rel="prefetch" href="/lanjz/assets/js/97.bbea8f19.js"><link rel="prefetch" href="/lanjz/assets/js/98.6f4a4d98.js"><link rel="prefetch" href="/lanjz/assets/js/99.92729fd5.js">
    <link rel="stylesheet" href="/lanjz/assets/css/0.styles.5dda244b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/lanjz/" class="home-link router-link-active"><!----> <span class="site-name">Hello Wold</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/lanjz/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端基础" class="dropdown-title"><span class="title">前端基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端基础" class="mobile-dropdown-title"><span class="title">前端基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/JavaScript/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/ES6/" class="nav-link router-link-active">
  ES6
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/HTML5/" class="nav-link">
  HTML5
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/CSS/" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Browser/" class="nav-link">
  Browser
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="网络&amp;算法" class="dropdown-title"><span class="title">网络&amp;算法</span> <span class="arrow down"></span></button> <button type="button" aria-label="网络&amp;算法" class="mobile-dropdown-title"><span class="title">网络&amp;算法</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/network/" class="nav-link">
  网络
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Algorithm/" class="nav-link">
  算法
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/secure/" class="nav-link">
  Web安全
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架" class="dropdown-title"><span class="title">框架</span> <span class="arrow down"></span></button> <button type="button" aria-label="框架" class="mobile-dropdown-title"><span class="title">框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/Vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Vue3/" class="nav-link">
  Vue3
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/React/" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/qiankun/" class="nav-link">
  qiankun
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/NA/" class="nav-link">
  跨平台
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Node" class="dropdown-title"><span class="title">Node</span> <span class="arrow down"></span></button> <button type="button" aria-label="Node" class="mobile-dropdown-title"><span class="title">Node</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/Node/基础/" class="nav-link">
  基础
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Node/Api/" class="nav-link">
  API
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Node/Package/" class="nav-link">
  yarn&amp;npm
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Node/Webpack/" class="nav-link">
  Webpack
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工程化" class="dropdown-title"><span class="title">工程化</span> <span class="arrow down"></span></button> <button type="button" aria-label="工程化" class="mobile-dropdown-title"><span class="title">工程化</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/工程化/前端优化总结/" class="nav-link">
  前端优化总结
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/系统设计/" class="nav-link">
  系统设计
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/预加载&amp;预解析.html" class="nav-link">
  预加载&amp;预解析
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/重构改善既有代码的设计.html" class="nav-link">
  重构代码原则
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/开发与调试技巧.html" class="nav-link">
  开发与调试
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/组件设计的基本原则.html" class="nav-link">
  组件设计
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/公共模块管理.html" class="nav-link">
  公共模块管理
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/内存泄漏.html" class="nav-link">
  内存泄漏
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/前端异常捕获.html" class="nav-link">
  前端异常捕获
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/自动化部署.html" class="nav-link">
  自动化部署
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/疑难杂症.html" class="nav-link">
  问题小计
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="利其器" class="dropdown-title"><span class="title">利其器</span> <span class="arrow down"></span></button> <button type="button" aria-label="利其器" class="mobile-dropdown-title"><span class="title">利其器</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/利其器/Mac.html" class="nav-link">
  Mac
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/利其器/Github.html" class="nav-link">
  Github
</a></li></ul></div></div><div class="nav-item"><a href="/lanjz/Im/" class="nav-link">
  关于我
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/lanjz/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端基础" class="dropdown-title"><span class="title">前端基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端基础" class="mobile-dropdown-title"><span class="title">前端基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/JavaScript/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/ES6/" class="nav-link router-link-active">
  ES6
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/HTML5/" class="nav-link">
  HTML5
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/CSS/" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Browser/" class="nav-link">
  Browser
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="网络&amp;算法" class="dropdown-title"><span class="title">网络&amp;算法</span> <span class="arrow down"></span></button> <button type="button" aria-label="网络&amp;算法" class="mobile-dropdown-title"><span class="title">网络&amp;算法</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/network/" class="nav-link">
  网络
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Algorithm/" class="nav-link">
  算法
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/secure/" class="nav-link">
  Web安全
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架" class="dropdown-title"><span class="title">框架</span> <span class="arrow down"></span></button> <button type="button" aria-label="框架" class="mobile-dropdown-title"><span class="title">框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/Vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Vue3/" class="nav-link">
  Vue3
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/React/" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/qiankun/" class="nav-link">
  qiankun
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/NA/" class="nav-link">
  跨平台
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Node" class="dropdown-title"><span class="title">Node</span> <span class="arrow down"></span></button> <button type="button" aria-label="Node" class="mobile-dropdown-title"><span class="title">Node</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/Node/基础/" class="nav-link">
  基础
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Node/Api/" class="nav-link">
  API
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Node/Package/" class="nav-link">
  yarn&amp;npm
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Node/Webpack/" class="nav-link">
  Webpack
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工程化" class="dropdown-title"><span class="title">工程化</span> <span class="arrow down"></span></button> <button type="button" aria-label="工程化" class="mobile-dropdown-title"><span class="title">工程化</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/工程化/前端优化总结/" class="nav-link">
  前端优化总结
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/系统设计/" class="nav-link">
  系统设计
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/预加载&amp;预解析.html" class="nav-link">
  预加载&amp;预解析
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/重构改善既有代码的设计.html" class="nav-link">
  重构代码原则
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/开发与调试技巧.html" class="nav-link">
  开发与调试
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/组件设计的基本原则.html" class="nav-link">
  组件设计
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/公共模块管理.html" class="nav-link">
  公共模块管理
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/内存泄漏.html" class="nav-link">
  内存泄漏
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/前端异常捕获.html" class="nav-link">
  前端异常捕获
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/自动化部署.html" class="nav-link">
  自动化部署
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/疑难杂症.html" class="nav-link">
  问题小计
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="利其器" class="dropdown-title"><span class="title">利其器</span> <span class="arrow down"></span></button> <button type="button" aria-label="利其器" class="mobile-dropdown-title"><span class="title">利其器</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/利其器/Mac.html" class="nav-link">
  Mac
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/利其器/Github.html" class="nav-link">
  Github
</a></li></ul></div></div><div class="nav-item"><a href="/lanjz/Im/" class="nav-link">
  关于我
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/lanjz/ES6/函数的扩展.html" class="sidebar-link">ES6</a></li><li><a href="/lanjz/ES6/Symbol.html" class="sidebar-link">Symbol</a></li><li><a href="/lanjz/ES6/数组.html" class="sidebar-link">数组</a></li><li><a href="/lanjz/ES6/对象.html" class="active sidebar-link">对象</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/lanjz/ES6/对象.html#属性描述符" class="sidebar-link">属性描述符</a></li><li class="sidebar-sub-header"><a href="/lanjz/ES6/对象.html#属性的遍历" class="sidebar-link">属性的遍历</a></li><li class="sidebar-sub-header"><a href="/lanjz/ES6/对象.html#super-关键字" class="sidebar-link">super 关键字</a></li><li class="sidebar-sub-header"><a href="/lanjz/ES6/对象.html#扩展运算符" class="sidebar-link">扩展运算符</a></li><li class="sidebar-sub-header"><a href="/lanjz/ES6/对象.html#链判断运算符" class="sidebar-link">链判断运算符</a></li><li class="sidebar-sub-header"><a href="/lanjz/ES6/对象.html#null-判断运算符" class="sidebar-link">Null 判断运算符</a></li><li class="sidebar-sub-header"><a href="/lanjz/ES6/对象.html#对象的新增方法" class="sidebar-link">对象的新增方法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/lanjz/ES6/对象.html#object-is" class="sidebar-link">Object.is()</a></li><li class="sidebar-sub-header"><a href="/lanjz/ES6/对象.html#object-assign" class="sidebar-link">Object.assign()</a></li><li class="sidebar-sub-header"><a href="/lanjz/ES6/对象.html#object-getownpropertydescriptors" class="sidebar-link">Object.getOwnPropertyDescriptors()</a></li><li class="sidebar-sub-header"><a href="/lanjz/ES6/对象.html#proto-属性" class="sidebar-link">_proto_属性</a></li><li class="sidebar-sub-header"><a href="/lanjz/ES6/对象.html#object-setprototypeof" class="sidebar-link">Object.setPrototypeOf()</a></li><li class="sidebar-sub-header"><a href="/lanjz/ES6/对象.html#object-getprototypeof" class="sidebar-link">Object.getPrototypeOf()</a></li><li class="sidebar-sub-header"><a href="/lanjz/ES6/对象.html#object-fromentries" class="sidebar-link">Object.fromEntries()</a></li></ul></li></ul></li><li><a href="/lanjz/ES6/Set和WeakSet.html" class="sidebar-link">Set和WeakSet</a></li><li><a href="/lanjz/ES6/Map和WeakMap.html" class="sidebar-link">Map和WeakMap</a></li><li><a href="/lanjz/ES6/Promise.html" class="sidebar-link">Promise</a></li><li><a href="/lanjz/ES6/Iterator.html" class="sidebar-link">Iterator</a></li><li><a href="/lanjz/ES6/Generater.html" class="sidebar-link">Generater</a></li><li><a href="/lanjz/ES6/async函数.html" class="sidebar-link">async 函数</a></li><li><a href="/lanjz/ES6/Proxy.html" class="sidebar-link">Proxy</a></li><li><a href="/lanjz/ES6/Class.html" class="sidebar-link">Class</a></li><li><a href="/lanjz/ES6/Class继承.html" class="sidebar-link">Class继承</a></li><li><a href="/lanjz/ES6/Module.html" class="sidebar-link">Module</a></li><li><a href="/lanjz/ES6/Module的加载实现.html" class="sidebar-link">Module 的加载实现</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="对象"><a href="#对象" class="header-anchor">#</a> 对象</h1> <h2 id="属性描述符"><a href="#属性描述符" class="header-anchor">#</a> 属性描述符</h2> <p>对象的每个属性都有一个描述对象（Descriptor），用来控制该属性的行为。 <code>Object.getOwnPropertyDescriptor</code> 方法可以获取该属性的描述对象</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> foo<span class="token operator">:</span> <span class="token number">123</span><span class="token punctuation">,</span> bar<span class="token operator">:</span> <span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token string">'lan'</span><span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptor</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">'foo'</span><span class="token punctuation">)</span>
<span class="token comment">//  {</span>
<span class="token comment">//    value: 123,</span>
<span class="token comment">//    writable: true,</span>
<span class="token comment">//    enumerable: true,</span>
<span class="token comment">//    configurable: true</span>
<span class="token comment">//  }</span>
Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptor</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>bar<span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token punctuation">)</span>
<span class="token comment">//  {</span>
<span class="token comment">//    value: lan,</span>
<span class="token comment">//    writable: true,</span>
<span class="token comment">//    enumerable: true,</span>
<span class="token comment">//    configurable: true</span>
<span class="token comment">//  }</span>
</code></pre></div><p>对象里目前存在的属性描述符有两种主要形式：数据描述符和存取描述符。数据描述符是一个具有值的属性，该值可以是可写的，也可以是不可写的。存取描述符是由 <code>getter</code> 函数和 <code>setter</code> 函数所描述的属性。<strong>一个描述符只能是这两者其中之一；不能同时是两者</strong></p> <p>数据描述符还具有以下可选键值：</p> <p><strong>value</strong></p> <p>该属性对应的值。可以是任何有效的 JavaScript 值（数值，对象，函数等）。
默认为 <code>undefined</code></p> <p><strong>writable</strong></p> <p>当且仅当该属性的 <code>writable</code> 键值为 <code>true</code> 时，属性的值，也就是上面的 <code>value</code>，才能被赋值运算符改变</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    configurable<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    writable<span class="token operator">:</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptor</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">)</span>
<span class="token comment">// configurable:true</span>
<span class="token comment">// enumerable: false</span>
<span class="token comment">// value: undefined</span>
<span class="token comment">// writable: false</span>

obj<span class="token punctuation">.</span>b <span class="token operator">=</span> <span class="token number">3</span> <span class="token comment">// 没有报错，看似没问题</span>
conosle<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>b<span class="token punctuation">)</span> <span class="token comment">// undefined ，输出的时候发现其实没变化</span>

<span class="token comment">// 因为configurable为true，所以可以通过修改属性描述的 value属性进行修改</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    value<span class="token operator">:</span> <span class="token number">3</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>b<span class="token punctuation">)</span> <span class="token comment">// 3  可以发现修改成功</span>
</code></pre></div><p>存取描述符还具有以下可选键值：</p> <p><strong>get</strong></p> <p>属性的 <code>getter</code> 函数，如果没有 <code>getter</code>，则为 <code>undefined</code>。当访问该属性时，会调用此函数。执行时不传入任何参数，但是会传入 <code>this</code> 对象（由于继承关系，这里的 <code>this</code> 并不一定是定义该属性的对象）。该函数的返回值会被用作属性的值</p> <p>默认为 <code>undefined</code></p> <p><strong>set</strong></p> <p>属性的 <code>setter</code> 函数，如果没有 <code>setter</code>，则为 <code>undefined</code>。当属性值被修改时，会调用此函数。该方法接受一个参数（也就是被赋予的新值），会传入赋值时的 <code>this</code> 对象。</p> <p>默认为 <code>undefined</code></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">var</span> obj2 <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">set</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">v</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
         console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'触发set'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         obj2<span class="token punctuation">.</span>b <span class="token operator">=</span> v 
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">b</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
         console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'触发get'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token keyword">return</span> obj2<span class="token punctuation">.</span>b 
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
obj<span class="token punctuation">.</span>b <span class="token operator">=</span> <span class="token number">100</span> <span class="token comment">// 触发set</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj2<span class="token punctuation">)</span> <span class="token comment">// {b: 100}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>b<span class="token punctuation">)</span> <span class="token comment">// 触发get 100</span>
</code></pre></div><p>数据描述符和属性描述符共有的属性：</p> <p><strong>可枚举属性(enumerable)</strong></p> <p>描述对象的 <code>enumerable</code> 属性，称为“可枚举性”，如果该属性为 <code>false</code>，就表示某些操作会忽略当前属性</p> <p>目前，有四个操作会忽略 <code>enumerable</code>为 <code>false</code> 的属性:</p> <ul><li><p><code>for...in</code> 循环：只遍历对象自身的和继承的可枚举的属性</p></li> <li><p><code>Object.keys()</code>：返回对象自身的所有可枚举的属性的键名</p></li> <li><p><code>JSON.stringify()</code>：只串行化对象自身的可枚举的属性</p></li> <li><p><code>Object.assign()</code>： 忽略 <code>enumerable</code> 为 <code>false</code> 的属性，只拷贝对象自身的可枚举的属性</p></li></ul> <p>引入“可枚举”（enumerable）这个概念的最初目的，就是让某些属性可以规避掉 <code>for...in</code> 操作，不然所有内部属性和方法都会被遍历到。比如，对象原型的 <code>toString</code> 方法，以及数组的 <code>length</code> 属性，就通过“可枚举性”，从而避免被 <code>for...in</code> 遍历到</p> <div class="language-js extra-class"><pre class="language-js"><code>Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptor</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">,</span> <span class="token string">'toString'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>enumerable
<span class="token comment">// false</span>

Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptor</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'length'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>enumerable
<span class="token comment">// false</span>
</code></pre></div><p>ES6 规定，所有 Class 的原型的方法都是不可枚举的</p> <div class="language-js extra-class"><pre class="language-js"><code>Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptor</span><span class="token punctuation">(</span><span class="token keyword">class</span> <span class="token punctuation">{</span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">.</span>prototype<span class="token punctuation">,</span> <span class="token string">'foo'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>enumerable
<span class="token comment">// false</span>
</code></pre></div><p><strong>configurable</strong></p> <p>当且仅当该属性的 <code>configurable</code> 键值为 <code>true</code> 时，该属性的描述符才能够被改变，同时该属性也能从对应的对象上被删除。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
obj<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token number">1</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    configurable<span class="token operator">:</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptor</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">)</span>
<span class="token comment">// configurable: true</span>
<span class="token comment">// enumerable: true</span>
<span class="token comment">// value: 1</span>
<span class="token comment">// writable: true</span>

Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptor</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">)</span>
<span class="token comment">// configurable:false</span>
<span class="token comment">// enumerable: false</span>
<span class="token comment">// value: undefined</span>
<span class="token comment">// writable: false</span>

<span class="token keyword">delete</span> obj<span class="token punctuation">.</span>b <span class="token comment">// false  删除失败 因为configurable为false</span>

<span class="token comment">// Uncaught TypeError: Cannot redefine property: b ,也不能修改b属性的属性描述符了</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    configurable<span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    value<span class="token operator">:</span> <span class="token number">2</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>a<span class="token punctuation">)</span> <span class="token comment">// 2 </span>
<span class="token keyword">delete</span> obj<span class="token punctuation">.</span>a <span class="token comment">// true 删除成功</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token comment">// {b: undefined}</span>
</code></pre></div><h2 id="属性的遍历"><a href="#属性的遍历" class="header-anchor">#</a> 属性的遍历</h2> <p>ES6 一共有 5 种方法可以遍历对象的属性</p> <ul><li><p><code>for...in</code>： <code>for...in</code> 循环遍历对象自身的和继承的可枚举属性（不含 Symbol 属性</p></li> <li><p><code>Object.keys(obj)</code>: <code>Object.keys</code> 返回一个数组，包括对象自身的（不含继承的）所有可枚举属性（不含 Symbol 属性）的键名</p></li> <li><p><code>Object.getOwnPropertyNames(obj)</code>: <code>Object.getOwnPropertyNames</code> 返回一个数组，包含对象自身的所有属性（不含 Symbol 属性，但是包括不可枚举属性）的键名</p></li> <li><p><code>Object.getOwnPropertySymbols(obj)</code>: 返回一个数组，包含对象自身的所有 Symbol 属性的键名</p></li> <li><p><code>Reflect.ownKeys(obj)</code>: 返回一个数组，包含对象自身的（不含继承的）所有键名，不管键名是 Symbol 或字符串，也不管是否可枚举</p></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token punctuation">[</span>Symbol<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> a<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">}</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>value<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> 
<span class="token comment">// a: 1</span>
<span class="token comment">// Symbol(): 0</span>
<span class="token comment">// b: 2</span>

Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token comment">// [&quot;a&quot;]</span>
Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyNames</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token comment">//  [&quot;a&quot;, &quot;b&quot;]</span>
Object<span class="token punctuation">.</span><span class="token function">getOwnPropertySymbols</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token comment">// [Symbol()]</span>
Reflect<span class="token punctuation">.</span><span class="token function">ownKeys</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token comment">//  [&quot;a&quot;, &quot;b&quot;, Symbol()]</span>
</code></pre></div><h2 id="super-关键字"><a href="#super-关键字" class="header-anchor">#</a> super 关键字</h2> <p>我们知道，<code>this</code> 关键字总是指向函数所在的当前对象，ES6 又新增了另一个类似的关键字 <code>super</code>，指向当前对象的原型对象</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> proto <span class="token operator">=</span> <span class="token punctuation">{</span>
  foo<span class="token operator">:</span> <span class="token string">'hello'</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  foo<span class="token operator">:</span> <span class="token string">'world'</span><span class="token punctuation">,</span>
  <span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span>foo<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

Object<span class="token punctuation">.</span><span class="token function">setPrototypeOf</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> proto<span class="token punctuation">)</span><span class="token punctuation">;</span>
obj<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// &quot;hello&quot;</span>
</code></pre></div><p>上面代码中，对象 <code>obj.find()</code> 方法之中，通过 <code>super.foo</code> 引用了原型对象 <code>proto</code> 的 <code>foo</code> 属性。</p> <p>注意，<code>super</code> 关键字表示原型对象时，只能用在对象的方法之中，用在其他地方都会报错</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 报错</span>
<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  foo<span class="token operator">:</span> <span class="token keyword">super</span><span class="token punctuation">.</span>foo
<span class="token punctuation">}</span>

<span class="token comment">// 报错</span>
<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">foo</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">super</span><span class="token punctuation">.</span>foo
<span class="token punctuation">}</span>

<span class="token comment">// 报错</span>
<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">foo</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span>foo
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>JavaScript 引擎内部，<code>super.foo</code> 等同于 <code>Object.getPrototypeOf(this).foo</code> （属性）或 <code>Object.getPrototypeOf(this).foo.call(this)</code> （方法）</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> proto <span class="token operator">=</span> <span class="token punctuation">{</span>
  x<span class="token operator">:</span> <span class="token string">'hello'</span><span class="token punctuation">,</span>
  <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  x<span class="token operator">:</span> <span class="token string">'world'</span><span class="token punctuation">,</span>
  <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

Object<span class="token punctuation">.</span><span class="token function">setPrototypeOf</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> proto<span class="token punctuation">)</span><span class="token punctuation">;</span>

obj<span class="token punctuation">.</span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// &quot;world&quot;</span>
</code></pre></div><p>上面代码中，<code>super.foo</code> 指向原型对象 <code>proto</code> 的 <code>foo</code> 方法，但是绑定的this却还是当前对象 <code>obj</code> ，因此输出的就是 <code>world</code></p> <h2 id="扩展运算符"><a href="#扩展运算符" class="header-anchor">#</a> 扩展运算符</h2> <p>对象的扩展运算符（<code>...</code>）用于取出参数对象的所有可遍历属性，拷贝到当前对象之中</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> z <span class="token operator">=</span> <span class="token punctuation">{</span> a<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> b<span class="token operator">:</span> <span class="token number">4</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> n <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token operator">...</span>z <span class="token punctuation">}</span><span class="token punctuation">;</span>
n <span class="token comment">// { a: 3, b: 4 }</span>
</code></pre></div><p>如果扩展运算符后面是一个空对象，则没有任何效果</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> a<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">}</span>
<span class="token comment">// { a: 1 }</span>
</code></pre></div><p>上面代码中，扩展运算符后面是整数 1，会自动转为数值的包装对象 <code>Number{1}</code> 。由于该对象没有自身属性，所以返回一个空对象</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 等同于 {...Object(true)}</span>
<span class="token punctuation">{</span><span class="token operator">...</span><span class="token boolean">true</span><span class="token punctuation">}</span> <span class="token comment">// {}</span>

<span class="token comment">// 等同于 {...Object(undefined)}</span>
<span class="token punctuation">{</span><span class="token operator">...</span><span class="token keyword">undefined</span><span class="token punctuation">}</span> <span class="token comment">// {}</span>

<span class="token comment">// 等同于 {...Object(null)}</span>
<span class="token punctuation">{</span><span class="token operator">...</span><span class="token keyword">null</span><span class="token punctuation">}</span> <span class="token comment">// {}</span>
</code></pre></div><p>但是，如果扩展运算符后面是字符串，它会自动转成一个类似数组的对象，因此返回的不是空对象</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span><span class="token operator">...</span><span class="token string">'hello'</span><span class="token punctuation">}</span>
<span class="token comment">// {0: &quot;h&quot;, 1: &quot;e&quot;, 2: &quot;l&quot;, 3: &quot;l&quot;, 4: &quot;o&quot;}</span>
</code></pre></div><p>对象的扩展运算符等同于使用 <code>Object.assign()</code> 方法</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> aClone <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token operator">...</span>a <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 等同于</span>
<span class="token keyword">let</span> aClone <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>上面的例子只是拷贝了对象实例的属性，如果想完整克隆一个对象，还拷贝对象原型的属性，可以采用下面的写法</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 写法一</span>
<span class="token keyword">const</span> clone1 <span class="token operator">=</span> <span class="token punctuation">{</span>
  __proto__<span class="token operator">:</span> Object<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token operator">...</span>obj
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 写法二</span>
<span class="token keyword">const</span> clone2 <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>
  Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  obj
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 写法三</span>
<span class="token keyword">const</span> clone3 <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>
  Object<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">,</span>
  Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptors</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
<span class="token punctuation">)</span>
</code></pre></div><p>与数组的扩展运算符一样，对象的扩展运算符后面可以跟表达式</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span><span class="token punctuation">(</span>x <span class="token operator">&gt;</span> <span class="token number">1</span> <span class="token operator">?</span> <span class="token punctuation">{</span>a<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">}</span> <span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  b<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>扩展运算符的参数对象之中，如果有取值函数 <code>get</code> ，这个函数是会执行的</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token keyword">get</span> <span class="token function">x</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'not throw yet'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> aWithXGetter <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token operator">...</span>a <span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// 报错</span>
</code></pre></div><p>上面例子中，取值函数 <code>get</code> 在扩展 <code>a</code> 对象时会自动执行，导致报错</p> <h2 id="链判断运算符"><a href="#链判断运算符" class="header-anchor">#</a> 链判断运算符</h2> <p>编程实务中，如果读取对象内部的某个属性，往往需要判断一下该对象是否存在。比如，要读取 <code>message.body.user.firstName</code> ，安全的写法是写成下面这样</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 错误的写法</span>
<span class="token keyword">const</span>  firstName <span class="token operator">=</span> message<span class="token punctuation">.</span>body<span class="token punctuation">.</span>user<span class="token punctuation">.</span>firstName<span class="token punctuation">;</span>

<span class="token comment">// 正确的写法</span>
<span class="token keyword">const</span> firstName <span class="token operator">=</span> <span class="token punctuation">(</span>message
  <span class="token operator">&amp;&amp;</span> message<span class="token punctuation">.</span>body
  <span class="token operator">&amp;&amp;</span> message<span class="token punctuation">.</span>body<span class="token punctuation">.</span>user
  <span class="token operator">&amp;&amp;</span> message<span class="token punctuation">.</span>body<span class="token punctuation">.</span>user<span class="token punctuation">.</span>firstName<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token string">'default'</span><span class="token punctuation">;</span>
</code></pre></div><p>上面例子中，<code>firstName</code> 属性在对象的第四层，所以需要判断四次，每一层是否有值。</p> <p>三元运算符 <code>?:</code> 也常用于判断对象是否存在</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> fooInput <span class="token operator">=</span> myForm<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'input[name=foo]'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> fooValue <span class="token operator">=</span> fooInput <span class="token operator">?</span> fooInput<span class="token punctuation">.</span>value <span class="token operator">:</span> <span class="token keyword">undefined</span>
</code></pre></div><p>这样的层层判断非常麻烦，因此 ES2020 引入了“链判断运算符”（optional chaining operator） <code>?.</code> ，简化上面的写法</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> firstName <span class="token operator">=</span> message<span class="token operator">?.</span>body<span class="token operator">?.</span>user<span class="token operator">?.</span>firstName <span class="token operator">||</span> <span class="token string">'default'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> fooValue <span class="token operator">=</span> myForm<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'input[name=foo]'</span><span class="token punctuation">)</span><span class="token operator">?.</span>value
</code></pre></div><p>上面代码使用了 <code>?.</code> 运算符，直接在链式调用的时候判断，左侧的对象是否为 <code>null</code> 或 <code>undefined</code> 。如果是的，就不再往下运算，而是返回 <code>undefined</code></p> <p>下面是判断对象方法是否存在，如果存在就立即执行的例子</p> <div class="language-js extra-class"><pre class="language-js"><code>iterator<span class="token punctuation">.</span>return<span class="token operator">?.</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>上面代码中，<code>iterator.return</code> 如果有定义，就会调用该方法，否则 <code>iterator.return</code> 直接返回 <code>undefined</code> ，不再执行 <code>?.</code> 后面的部分</p> <p>对于那些可能没有实现的方法，这个运算符尤其有用</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>myForm<span class="token punctuation">.</span>checkValidity<span class="token operator">?.</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 表单校验失败</span>
  <span class="token keyword">return</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>上面代码中，老式浏览器的表单可能没有 <code>checkValidity</code> 这个方法，这时 <code>?.</code> 运算符就会返回undefined，判断语句就变成了 <code>undefined === false</code> ，所以就会跳过下面的代码</p> <p>链判断运算符有三种用法</p> <ul><li><code>obj?.prop</code> // 对象属性</li> <li><code>obj?.[expr]</code> // 同上</li> <li><code>func?.(...args)</code> // 函数或对象方法的调用</li></ul> <p>下面是 <code>obj?.[expr]</code> 用法的一个例子</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> hex <span class="token operator">=</span> <span class="token string">&quot;#C0FFEE&quot;</span><span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">#([A-Z]+)</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">)</span><span class="token operator">?.</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><p>上面例子中，字符串的 <code>match()</code> 方法，如果没有发现匹配会返回 <code>null</code> ，如果发现匹配会返回一个数组，<code>?.</code> 运算符起到了判断作用。</p> <p>下面是 <code>?.</code> 运算符常见形式，以及不使用该运算符时的等价形式。</p> <div class="language-js extra-class"><pre class="language-js"><code>a<span class="token operator">?.</span>b
<span class="token comment">// 等同于</span>
a <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">?</span> <span class="token keyword">undefined</span> <span class="token operator">:</span> a<span class="token punctuation">.</span>b

a<span class="token operator">?.</span><span class="token punctuation">[</span>x<span class="token punctuation">]</span>
<span class="token comment">// 等同于</span>
a <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">?</span> <span class="token keyword">undefined</span> <span class="token operator">:</span> a<span class="token punctuation">[</span>x<span class="token punctuation">]</span>

a<span class="token operator">?.</span><span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 等同于</span>
a <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">?</span> <span class="token keyword">undefined</span> <span class="token operator">:</span> a<span class="token punctuation">.</span><span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

a<span class="token operator">?.</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 等同于</span>
a <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">?</span> <span class="token keyword">undefined</span> <span class="token operator">:</span> <span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>上面代码中，特别注意后两种形式，如果 <code>a?.b()</code> 里面的 <code>a.b</code> 不是函数，不可调用，那么 <code>a?.b()</code> 是会报错的。 <code>a?.()</code> 也是如此，如果 <code>a</code> 不是 <code>null</code> 或 <code>undefined</code> ，但也不是函数，那么 <code>a?.()</code> 会报错</p> <p>使用这个运算符，有几个注意点</p> <p><strong>短路机制</strong></p> <p><code>?.</code> 运算符相当于一种短路机制，只要不满足条件，就不再往下执行</p> <div class="language-js extra-class"><pre class="language-js"><code>a<span class="token operator">?.</span><span class="token punctuation">[</span><span class="token operator">++</span>x<span class="token punctuation">]</span>
<span class="token comment">// 等同于</span>
a <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">?</span> <span class="token keyword">undefined</span> <span class="token operator">:</span> a<span class="token punctuation">[</span><span class="token operator">++</span>x<span class="token punctuation">]</span>
</code></pre></div><p>上面代码中，如果 <code>a</code> 是 <code>undefined</code> 或 <code>null</code> ，那么 <code>x</code> 不会进行递增运算。也就是说，链判断运算符一旦为真，右侧的表达式就不再求值</p> <p><strong>delete 运算符</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">delete</span> a<span class="token operator">?.</span>b
<span class="token comment">// 等同于</span>
a <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">?</span> <span class="token keyword">undefined</span> <span class="token operator">:</span> <span class="token keyword">delete</span> a<span class="token punctuation">.</span>b
</code></pre></div><p>上面代码中，如果 <code>a</code> 是 <code>undefined</code> 或 <code>null</code> ，会直接返回 <code>undefined</code> ，而不会进行 <code>delete</code> 运算</p> <p><strong>括号的影响</strong></p> <p>如果属性链有圆括号，链判断运算符对圆括号外部没有影响，只对圆括号内部有影响</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">(</span>a<span class="token operator">?.</span>b<span class="token punctuation">)</span><span class="token punctuation">.</span>c
<span class="token comment">// 等价于</span>
<span class="token punctuation">(</span>a <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">?</span> <span class="token keyword">undefined</span> <span class="token operator">:</span> a<span class="token punctuation">.</span>b<span class="token punctuation">)</span><span class="token punctuation">.</span>c
</code></pre></div><p>上面代码中，<code>?.</code> 对圆括号外部没有影响，不管 <code>a</code> 对象是否存在，圆括号后面的 <code>.c</code> 总是会执行。</p> <p>一般来说，使用 <code>?.</code> 运算符的场合，不应该使用圆括号</p> <p><strong>报错场合</strong></p> <p>以下写法是禁止的，会报错</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 构造函数</span>
<span class="token keyword">new</span> <span class="token class-name">a</span><span class="token operator">?.</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">new</span> <span class="token class-name">a</span><span class="token operator">?.</span><span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// 链判断运算符的右侧有模板字符串</span>
a<span class="token operator">?.</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">{b}</span><span class="token template-punctuation string">`</span></span>
a<span class="token operator">?.</span>b<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">{c}</span><span class="token template-punctuation string">`</span></span>

<span class="token comment">// 链判断运算符的左侧是 super</span>
<span class="token keyword">super</span><span class="token operator">?.</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">super</span><span class="token operator">?.</span>foo

<span class="token comment">// 链运算符用于赋值运算符左侧</span>
a<span class="token operator">?.</span>b <span class="token operator">=</span> c
</code></pre></div><p><strong>右侧不得为十进制数值</strong></p> <p>为了保证兼容以前的代码，允许 <code>foo?.3:0</code> 被解析成 <code>foo ? .3 : 0</code> ，因此规定如果 <code>?.</code> 后面紧跟一个十进制数字，那么 <code>?.</code> 不再被看成是一个完整的运算符，而会按照三元运算符进行处理，也就是说，那个小数点会归属于后面的十进制数字，形成一个小数</p> <h2 id="null-判断运算符"><a href="#null-判断运算符" class="header-anchor">#</a> Null 判断运算符</h2> <p>读取对象属性的时候，如果某个属性的值是 <code>null</code> 或 <code>undefined</code> ，有时候需要为它们指定默认值。常见做法是通过 <code>||</code> 运算符指定默认值</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> headerText <span class="token operator">=</span> response<span class="token punctuation">.</span>settings<span class="token punctuation">.</span>headerText <span class="token operator">||</span> <span class="token string">'Hello, world!'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> animationDuration <span class="token operator">=</span> response<span class="token punctuation">.</span>settings<span class="token punctuation">.</span>animationDuration <span class="token operator">||</span> <span class="token number">300</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> showSplashScreen <span class="token operator">=</span> response<span class="token punctuation">.</span>settings<span class="token punctuation">.</span>showSplashScreen <span class="token operator">||</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
</code></pre></div><p>上面的三行代码都通过 <code>||</code> 运算符指定默认值，但是这样写是错的。开发者的原意是，只要属性的值为 <code>null</code> 或 <code>undefined</code> ，默认值就会生效，但是属性的值如果为空字符串或 <code>false</code> 或 <code>0</code> ，默认值也会生效</p> <p>为了避免这种情况，ES2020 引入了一个新的 <code>Null</code> 判断运算符 <code>??</code> 。它的行为类似 <code>||</code> ，但是只有运算符左侧的值为 <code>null</code> 或 <code>undefined</code> 时，才会返回右侧的值</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> headerText <span class="token operator">=</span> response<span class="token punctuation">.</span>settings<span class="token punctuation">.</span>headerText <span class="token operator">??</span> <span class="token string">'Hello, world!'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> animationDuration <span class="token operator">=</span> response<span class="token punctuation">.</span>settings<span class="token punctuation">.</span>animationDuration <span class="token operator">??</span> <span class="token number">300</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> showSplashScreen <span class="token operator">=</span> response<span class="token punctuation">.</span>settings<span class="token punctuation">.</span>showSplashScreen <span class="token operator">??</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
</code></pre></div><p>上面代码中，默认值只有在左侧属性值为 <code>null</code> 或 <code>undefined</code> 时，才会生效。</p> <p>这个运算符的一个目的，就是跟链判断运算符 <code>?.</code> 配合使用，为 <code>null</code> 或 <code>undefined</code> 的值设置默认值。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> animationDuration <span class="token operator">=</span> response<span class="token punctuation">.</span>settings<span class="token operator">?.</span>animationDuration <span class="token operator">??</span> <span class="token number">300</span><span class="token punctuation">;</span>
</code></pre></div><p>上面代码中，<code>response.settings</code> 如果是 <code>null</code> 或 <code>undefined</code> ，就会返回默认值 <code>300</code> 。</p> <p>这个运算符很适合判断函数参数是否赋值</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Component</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> enable <span class="token operator">=</span> props<span class="token punctuation">.</span>enabled <span class="token operator">??</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token comment">// …</span>
<span class="token punctuation">}</span>
</code></pre></div><p>上面代码判断 <code>props</code> 参数的 <code>enabled</code> 属性是否赋值，等同于下面的写法</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Component</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span>
    enabled<span class="token operator">:</span> enable <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span> <span class="token operator">=</span> props<span class="token punctuation">;</span>
  <span class="token comment">// …</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>??</code> 有一个运算优先级问题，它与 <code>&amp;&amp;</code> 和 <code>||</code> 的优先级孰高孰低。现在的规则是，如果多个逻辑运算符一起使用，必须用括号表明优先级，否则会报错</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 报错</span>
lhs <span class="token operator">&amp;&amp;</span> middle <span class="token operator">??</span> rhs
lhs <span class="token operator">??</span> middle <span class="token operator">&amp;&amp;</span> rhs
lhs <span class="token operator">||</span> middle <span class="token operator">??</span> rhs
lhs <span class="token operator">??</span> middle <span class="token operator">||</span> rhs

<span class="token comment">// 上面四个表达式都会报错，必须加入表明优先级的括号</span>

<span class="token punctuation">(</span>lhs <span class="token operator">&amp;&amp;</span> middle<span class="token punctuation">)</span> <span class="token operator">??</span> rhs<span class="token punctuation">;</span>
lhs <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>middle <span class="token operator">??</span> rhs<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">(</span>lhs <span class="token operator">??</span> middle<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> rhs<span class="token punctuation">;</span>
lhs <span class="token operator">??</span> <span class="token punctuation">(</span>middle <span class="token operator">&amp;&amp;</span> rhs<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">(</span>lhs <span class="token operator">||</span> middle<span class="token punctuation">)</span> <span class="token operator">??</span> rhs<span class="token punctuation">;</span>
lhs <span class="token operator">||</span> <span class="token punctuation">(</span>middle <span class="token operator">??</span> rhs<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">(</span>lhs <span class="token operator">??</span> middle<span class="token punctuation">)</span> <span class="token operator">||</span> rhs<span class="token punctuation">;</span>
lhs <span class="token operator">??</span> <span class="token punctuation">(</span>middle <span class="token operator">||</span> rhs<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="对象的新增方法"><a href="#对象的新增方法" class="header-anchor">#</a> 对象的新增方法</h2> <h3 id="object-is"><a href="#object-is" class="header-anchor">#</a> Object.is()</h3> <p>ES5 比较两个值是否相等，只有两个运算符：相等运算符（ <code>==</code> ）和严格相等运算符（ <code>===</code> ）。它们都有缺点，前者会自动转换数据类型，后者的 <code>NaN</code> 不等于自身，以及 <code>+0</code> 等于 <code>-0</code> 。JavaScript 缺乏一种运算，在所有环境中，只要两个值是一样的，它们就应该相等。</p> <p>ES6 提出“Same-value equality”（同值相等）算法，用来解决这个问题。<code>Object.is</code> 就是部署这个算法的新方法。它用来比较两个值是否严格相等，与严格比较运算符（ <code>===</code> ）的行为基本一致。</p> <div class="language-js extra-class"><pre class="language-js"><code>Object<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">,</span> <span class="token string">'foo'</span><span class="token punctuation">)</span>
<span class="token comment">// true</span>
Object<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// false</span>

<span class="token operator">+</span><span class="token number">0</span> <span class="token operator">===</span> <span class="token operator">-</span><span class="token number">0</span> <span class="token comment">//true</span>
<span class="token number">NaN</span> <span class="token operator">===</span> <span class="token number">NaN</span> <span class="token comment">// false</span>

Object<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span><span class="token operator">+</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
Object<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span><span class="token number">NaN</span><span class="token punctuation">,</span> <span class="token number">NaN</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
</code></pre></div><p>ES5 可以通过下面的代码，部署 <code>Object.is</code></p> <div class="language-js extra-class"><pre class="language-js"><code>Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>Object<span class="token punctuation">,</span> <span class="token string">'is'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">value</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>x <span class="token operator">===</span> y<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 针对+0 不等于 -0的情况</span>
      <span class="token keyword">return</span> x <span class="token operator">!==</span> <span class="token number">0</span> <span class="token operator">||</span> <span class="token number">1</span> <span class="token operator">/</span> x <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">/</span> y<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 针对NaN的情况</span>
    <span class="token keyword">return</span> x <span class="token operator">!==</span> x <span class="token operator">&amp;&amp;</span> y <span class="token operator">!==</span> y<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  configurable<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  enumerable<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  writable<span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="object-assign"><a href="#object-assign" class="header-anchor">#</a> Object.assign()</h3> <p><code>Object.assign()</code> 方法用于将所有可枚举属性的值从一个或多个源对象复制到目标对象。它将返回目标对象</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> target <span class="token operator">=</span> <span class="token punctuation">{</span> a<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> b<span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> source <span class="token operator">=</span> <span class="token punctuation">{</span> b<span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span> c<span class="token operator">:</span> <span class="token number">5</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> returnedTarget <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> source<span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// expected output: Object { a: 1, b: 4, c: 5 }</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>returnedTarget<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// expected output: Object { a: 1, b: 4, c: 5 }</span>
</code></pre></div><p>使用<code>Object.assign</code> 的注意点：</p> <ul><li><p>如果只有一个参数，<code>Object.assign</code> 会直接返回该参数</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>a<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token operator">===</span> obj <span class="token comment">// true</span>
</code></pre></div></li> <li><p>如果目标对象与源对象有同名属性，或多个源对象有同名属性，则后面的属性会覆盖前面的属性</p></li> <li><p>如果该参数不是对象，则会先转成对象，然后返回</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">// Number {2}</span>
</code></pre></div></li> <li><p>关于在 <code>Object.assign</code> 使用 <code>undefined</code> 和 <code>null</code></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// `undefined` 和 `null` 无法转成对象，所以如果它们放在参数首位，就会报错</span>
Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token comment">// 报错</span>
Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token comment">// 报错</span>

<span class="token comment">// 如果undefined和null 不在首参数, 就不会报错，而是直接略过过</span>
<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>a<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token operator">===</span> obj <span class="token comment">// true</span>
Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token operator">===</span> obj <span class="token comment">// true</span>

<span class="token comment">// 其他类型的值（即数值、字符串和布尔值）不在首参数，也不会报错。但是，除了字符串会以数组形式，拷贝入目标对象，其他值都不会产生效果</span>
<span class="token keyword">const</span> v1 <span class="token operator">=</span> <span class="token string">'abc'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> v2 <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> v3 <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> obj <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> v1<span class="token punctuation">,</span> v2<span class="token punctuation">,</span> v3<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// { &quot;0&quot;: &quot;a&quot;, &quot;1&quot;: &quot;b&quot;, &quot;2&quot;: &quot;c&quot; }</span>
</code></pre></div><p>上面代码中，<code>v1</code> 、<code>v2</code> 、<code>v3</code> 分别是字符串、布尔值和数值，结果只有字符串合入目标对象（以字符数组的形式），数值和布尔值都会被忽略。这是因为只有字符串的包装对象，会产生可枚举属性</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">Object</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token comment">// {[[PrimitiveValue]]: true}</span>
<span class="token function">Object</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>  <span class="token comment">//  {[[PrimitiveValue]]: 10}</span>
<span class="token function">Object</span><span class="token punctuation">(</span><span class="token string">'abc'</span><span class="token punctuation">)</span> <span class="token comment">// {0: &quot;a&quot;, 1: &quot;b&quot;, 2: &quot;c&quot;, length: 3, [[PrimitiveValue]]: &quot;abc&quot;}</span>
</code></pre></div></li> <li><p>数组的处理</p> <div class="language-js extra-class"><pre class="language-js"><code>Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment">// [4, 5, 3]</span>
<span class="token comment">// 等同于</span>
Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">{</span><span class="token number">1</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></li> <li><p>取值函数的处理</p> <p><code>Object.assign</code> 只能进行值的复制，如果要复制的值是一个取值函数，那么将求值后再复制</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> source <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token keyword">get</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token number">1</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> target <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> source<span class="token punctuation">)</span>
<span class="token comment">// { foo: 1 }</span>
</code></pre></div></li></ul> <h3 id="object-getownpropertydescriptors"><a href="#object-getownpropertydescriptors" class="header-anchor">#</a> Object.getOwnPropertyDescriptors()</h3> <p>ES5 的 <code>Object.getOwnPropertyDescriptor()</code> 方法会返回某个对象属性的描述对象（descriptor）。ES2017 引入了<code>Object.getOwnPropertyDescriptors()</code> 方法，返回指定对象所有自身属性（非继承属性）的描述对象</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  foo<span class="token operator">:</span> <span class="token number">123</span><span class="token punctuation">,</span>
  <span class="token keyword">get</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token string">'abc'</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptors</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
<span class="token comment">// { foo:</span>
<span class="token comment">//    { value: 123,</span>
<span class="token comment">//      writable: true,</span>
<span class="token comment">//      enumerable: true,</span>
<span class="token comment">//      configurable: true },</span>
<span class="token comment">//   bar:</span>
<span class="token comment">//    { get: [Function: get bar],</span>
<span class="token comment">//      set: undefined,</span>
<span class="token comment">//      enumerable: true,</span>
<span class="token comment">//      configurable: true } }</span>
</code></pre></div><p>该方法的引入目的，主要是为了解决 <code>Object.assign()</code> 无法正确拷贝 <code>get</code> 属性和 <code>set</code> 属性的问题</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> source <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token keyword">set</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> target1 <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>target1<span class="token punctuation">,</span> source<span class="token punctuation">)</span><span class="token punctuation">;</span>

Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptor</span><span class="token punctuation">(</span>target1<span class="token punctuation">,</span> <span class="token string">'foo'</span><span class="token punctuation">)</span>
<span class="token comment">// { value: undefined,</span>
<span class="token comment">//   writable: true,</span>
<span class="token comment">//   enumerable: true,</span>
<span class="token comment">//   configurable: true }</span>

</code></pre></div><p>上面代码中，<code>source</code> 对象的 <code>foo</code> 属性的值是一个赋值函数，<code>Object.assign方</code> 法将这个属性拷贝给 <code>target1</code> 对象，结果该属性的值变成了 <code>undefined</code> 。这是因为 <code>Object.assign</code> 方法总是拷贝一个属性的值，而不会拷贝它背后的赋值方法或取值方法</p> <p>这时，<code>Object.getOwnPropertyDescriptors()</code> 方法配合 <code>Object.defineProperties()</code> 方法，就可以实现正确拷贝</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> source <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token keyword">set</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> target2 <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperties</span><span class="token punctuation">(</span>target2<span class="token punctuation">,</span> Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptors</span><span class="token punctuation">(</span>source<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptor</span><span class="token punctuation">(</span>target2<span class="token punctuation">,</span> <span class="token string">'foo'</span><span class="token punctuation">)</span>
<span class="token comment">// { get: undefined,</span>
<span class="token comment">//   set: [Function: set foo],</span>
<span class="token comment">//   enumerable: true,</span>
<span class="token comment">//   configurable: true }</span>

</code></pre></div><h3 id="proto-属性"><a href="#proto-属性" class="header-anchor">#</a> __proto__属性</h3> <p><code>__proto__</code> 属性（前后各两个下划线），用来读取或设置当前对象的原型对象（prototype）。目前，所有浏览器（包括 IE11）都部署了这个属性</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// es5 的写法</span>
<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">method</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
obj<span class="token punctuation">.</span>__proto__ <span class="token operator">=</span> someOtherObj<span class="token punctuation">;</span>

<span class="token comment">// es6 的写法</span>
<span class="token keyword">var</span> obj <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>someOtherObj<span class="token punctuation">)</span><span class="token punctuation">;</span>
obj<span class="token punctuation">.</span><span class="token function-variable function">method</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="object-setprototypeof"><a href="#object-setprototypeof" class="header-anchor">#</a> Object.setPrototypeOf()</h3> <p><code>Object.setPrototypeOf</code> 方法的作用与 <code>__proto__</code> 相同，用来设置一个对象的原型对象（prototype），返回参数对象本身。它是 ES6 正式推荐的设置原型对象的方法</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 格式</span>
Object<span class="token punctuation">.</span><span class="token function">setPrototypeOf</span><span class="token punctuation">(</span>object<span class="token punctuation">,</span> prototype<span class="token punctuation">)</span>

<span class="token comment">// 用法</span>
<span class="token keyword">const</span> o <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">setPrototypeOf</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 该方法等同于下面的函数</span>
<span class="token keyword">function</span> <span class="token function">setPrototypeOf</span><span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span> proto</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  obj<span class="token punctuation">.</span>__proto__ <span class="token operator">=</span> proto<span class="token punctuation">;</span>
  <span class="token keyword">return</span> obj<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>如果第一个参数不是对象，会自动转为对象。但是由于返回的还是第一个参数，所以这个操作不会产生任何效果</p> <div class="language-js extra-class"><pre class="language-js"><code>Object<span class="token punctuation">.</span><span class="token function">setPrototypeOf</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token number">1</span> <span class="token comment">// true</span>
Object<span class="token punctuation">.</span><span class="token function">setPrototypeOf</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'foo'</span> <span class="token comment">// true</span>
Object<span class="token punctuation">.</span><span class="token function">setPrototypeOf</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token boolean">true</span> <span class="token comment">// true</span>

</code></pre></div><p>由于 <code>undefined</code> 和 <code>null</code> 无法转为对象，所以如果第一个参数是 <code>undefined</code> 或 <code>null</code> ，就会报错</p> <div class="language-js extra-class"><pre class="language-js"><code>Object<span class="token punctuation">.</span><span class="token function">setPrototypeOf</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// TypeError: Object.setPrototypeOf called on null or undefined</span>

Object<span class="token punctuation">.</span><span class="token function">setPrototypeOf</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// TypeError: Object.setPrototypeOf called on null or undefined</span>

</code></pre></div><h3 id="object-getprototypeof"><a href="#object-getprototypeof" class="header-anchor">#</a> Object.getPrototypeOf()</h3> <p>该方法与 <code>Object.setPrototypeOf</code> 方法配套，用于读取一个对象的原型对象</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Rectangle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> rec <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Rectangle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Object<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span>rec<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token class-name">Rectangle</span><span class="token punctuation">.</span>prototype
<span class="token comment">// true</span>

Object<span class="token punctuation">.</span><span class="token function">setPrototypeOf</span><span class="token punctuation">(</span>rec<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span>
Object<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span>rec<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token class-name">Rectangle</span><span class="token punctuation">.</span>prototype
<span class="token comment">// false</span>
</code></pre></div><p>如果参数不是对象，会被自动转为对象</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 等同于 Object.getPrototypeOf(Number(1))</span>
Object<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token comment">// Number {[[PrimitiveValue]]: 0}</span>

<span class="token comment">// 等同于 Object.getPrototypeOf(String('foo'))</span>
Object<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span>
<span class="token comment">// String {length: 0, [[PrimitiveValue]]: &quot;&quot;}</span>

<span class="token comment">// 等同于 Object.getPrototypeOf(Boolean(true))</span>
Object<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
<span class="token comment">// Boolean {[[PrimitiveValue]]: false}</span>

Object<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token class-name">Number</span><span class="token punctuation">.</span>prototype <span class="token comment">// true</span>
Object<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token class-name">String</span><span class="token punctuation">.</span>prototype <span class="token comment">// true</span>
Object<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token class-name">Boolean</span><span class="token punctuation">.</span>prototype <span class="token comment">// true</span>
</code></pre></div><p>如果参数是 <code>undefined</code> 或 <code>null</code>，它们无法转为对象，所以会报错</p> <div class="language-js extra-class"><pre class="language-js"><code>Object<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>
<span class="token comment">// TypeError: Cannot convert undefined or null to object</span>

Object<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">)</span>
<span class="token comment">// TypeError: Cannot convert undefined or null to object</span>

</code></pre></div><h3 id="object-fromentries"><a href="#object-fromentries" class="header-anchor">#</a> Object.fromEntries()</h3> <p><code>Object.fromEntries()</code> 方法是 <code>Object.entries()</code> 的逆操作，用于将一个键值对数组转为对象</p> <div class="language-js extra-class"><pre class="language-js"><code>Object<span class="token punctuation">.</span><span class="token function">fromEntries</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">[</span><span class="token string">'foo'</span><span class="token punctuation">,</span> <span class="token string">'bar'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token string">'baz'</span><span class="token punctuation">,</span> <span class="token number">42</span><span class="token punctuation">]</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment">// { foo: &quot;bar&quot;, baz: 42 }</span>
</code></pre></div><p>该方法的主要目的，是将键值对的数据结构还原为对象，因此特别适合将 <code>Map</code> 结构转为对象</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 例一</span>
<span class="token keyword">const</span> entries <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">[</span><span class="token string">'foo'</span><span class="token punctuation">,</span> <span class="token string">'bar'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token string">'baz'</span><span class="token punctuation">,</span> <span class="token number">42</span><span class="token punctuation">]</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Object<span class="token punctuation">.</span><span class="token function">fromEntries</span><span class="token punctuation">(</span>entries<span class="token punctuation">)</span>
<span class="token comment">// { foo: &quot;bar&quot;, baz: 42 }</span>

<span class="token comment">// 例二</span>
<span class="token keyword">const</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'bar'</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Object<span class="token punctuation">.</span><span class="token function">fromEntries</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span>
<span class="token comment">// { foo: true, bar: false }</span>
</code></pre></div><p>该方法的一个用处是配合 <code>URLSearchParams</code> 对象，将查询字符串转为对象</p> <div class="language-js extra-class"><pre class="language-js"><code>Object<span class="token punctuation">.</span><span class="token function">fromEntries</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">URLSearchParams</span><span class="token punctuation">(</span><span class="token string">'foo=bar&amp;baz=qux'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// { foo: &quot;bar&quot;, baz: &quot;qux&quot; }</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/lanjz/ES6/数组.html" class="prev">
        数组
      </a></span> <span class="next"><a href="/lanjz/ES6/Set和WeakSet.html">
        Set和WeakSet
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/lanjz/assets/js/app.c1b7622d.js" defer></script><script src="/lanjz/assets/js/2.76a29515.js" defer></script><script src="/lanjz/assets/js/70.b07da230.js" defer></script>
  </body>
</html>
