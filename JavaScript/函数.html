<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>函数 | Hello Wold</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="Just playing around">
    
    <link rel="preload" href="/lanjz/assets/css/0.styles.5dda244b.css" as="style"><link rel="preload" href="/lanjz/assets/js/app.e671314c.js" as="script"><link rel="preload" href="/lanjz/assets/js/2.99360f9e.js" as="script"><link rel="preload" href="/lanjz/assets/js/105.fa7a0f76.js" as="script"><link rel="prefetch" href="/lanjz/assets/js/10.884f59a7.js"><link rel="prefetch" href="/lanjz/assets/js/100.a2f64ef3.js"><link rel="prefetch" href="/lanjz/assets/js/101.895a0baa.js"><link rel="prefetch" href="/lanjz/assets/js/102.921b4946.js"><link rel="prefetch" href="/lanjz/assets/js/103.93c92a94.js"><link rel="prefetch" href="/lanjz/assets/js/104.7e32ba63.js"><link rel="prefetch" href="/lanjz/assets/js/106.d85a916b.js"><link rel="prefetch" href="/lanjz/assets/js/107.5e41a005.js"><link rel="prefetch" href="/lanjz/assets/js/108.6bbd0fa5.js"><link rel="prefetch" href="/lanjz/assets/js/109.b1f60622.js"><link rel="prefetch" href="/lanjz/assets/js/11.3bd6f902.js"><link rel="prefetch" href="/lanjz/assets/js/110.b893046f.js"><link rel="prefetch" href="/lanjz/assets/js/111.f6132674.js"><link rel="prefetch" href="/lanjz/assets/js/112.e1fdbcaa.js"><link rel="prefetch" href="/lanjz/assets/js/113.42738a46.js"><link rel="prefetch" href="/lanjz/assets/js/114.8640f60b.js"><link rel="prefetch" href="/lanjz/assets/js/115.5ecbe90b.js"><link rel="prefetch" href="/lanjz/assets/js/116.f21853df.js"><link rel="prefetch" href="/lanjz/assets/js/117.29334c9b.js"><link rel="prefetch" href="/lanjz/assets/js/118.3014050f.js"><link rel="prefetch" href="/lanjz/assets/js/119.77446951.js"><link rel="prefetch" href="/lanjz/assets/js/12.dc0e98fd.js"><link rel="prefetch" href="/lanjz/assets/js/120.e9bdc555.js"><link rel="prefetch" href="/lanjz/assets/js/121.1df300ec.js"><link rel="prefetch" href="/lanjz/assets/js/122.df3934d0.js"><link rel="prefetch" href="/lanjz/assets/js/123.29c7e3ca.js"><link rel="prefetch" href="/lanjz/assets/js/124.3bb987f8.js"><link rel="prefetch" href="/lanjz/assets/js/125.90b57c2d.js"><link rel="prefetch" href="/lanjz/assets/js/126.bca03d38.js"><link rel="prefetch" href="/lanjz/assets/js/127.ec3c0be6.js"><link rel="prefetch" href="/lanjz/assets/js/128.2f74b23a.js"><link rel="prefetch" href="/lanjz/assets/js/129.cc83f84f.js"><link rel="prefetch" href="/lanjz/assets/js/13.874eb56b.js"><link rel="prefetch" href="/lanjz/assets/js/130.47970eab.js"><link rel="prefetch" href="/lanjz/assets/js/131.53503fae.js"><link rel="prefetch" href="/lanjz/assets/js/132.85194f4d.js"><link rel="prefetch" href="/lanjz/assets/js/133.79916dd0.js"><link rel="prefetch" href="/lanjz/assets/js/134.eff77e41.js"><link rel="prefetch" href="/lanjz/assets/js/135.4976e595.js"><link rel="prefetch" href="/lanjz/assets/js/136.2a3969da.js"><link rel="prefetch" href="/lanjz/assets/js/137.5b4b42a5.js"><link rel="prefetch" href="/lanjz/assets/js/138.a20522b5.js"><link rel="prefetch" href="/lanjz/assets/js/139.f38b993e.js"><link rel="prefetch" href="/lanjz/assets/js/14.f80f6759.js"><link rel="prefetch" href="/lanjz/assets/js/140.9e58d322.js"><link rel="prefetch" href="/lanjz/assets/js/141.7e81e9e1.js"><link rel="prefetch" href="/lanjz/assets/js/142.47dbb94a.js"><link rel="prefetch" href="/lanjz/assets/js/143.5856864f.js"><link rel="prefetch" href="/lanjz/assets/js/144.7da38937.js"><link rel="prefetch" href="/lanjz/assets/js/145.3126f6b5.js"><link rel="prefetch" href="/lanjz/assets/js/146.19da4e25.js"><link rel="prefetch" href="/lanjz/assets/js/147.e6ae3989.js"><link rel="prefetch" href="/lanjz/assets/js/148.2ce87cf8.js"><link rel="prefetch" href="/lanjz/assets/js/149.d309c323.js"><link rel="prefetch" href="/lanjz/assets/js/15.4ddf44bc.js"><link rel="prefetch" href="/lanjz/assets/js/150.5db1082c.js"><link rel="prefetch" href="/lanjz/assets/js/151.20fcac88.js"><link rel="prefetch" href="/lanjz/assets/js/152.f8642c4f.js"><link rel="prefetch" href="/lanjz/assets/js/153.7b0fd1c5.js"><link rel="prefetch" href="/lanjz/assets/js/154.3b8b9d43.js"><link rel="prefetch" href="/lanjz/assets/js/155.36b606e2.js"><link rel="prefetch" href="/lanjz/assets/js/156.88c28d57.js"><link rel="prefetch" href="/lanjz/assets/js/157.9e556652.js"><link rel="prefetch" href="/lanjz/assets/js/158.c7858e3f.js"><link rel="prefetch" href="/lanjz/assets/js/159.4e5059ea.js"><link rel="prefetch" href="/lanjz/assets/js/16.8ea6530a.js"><link rel="prefetch" href="/lanjz/assets/js/160.efcd576d.js"><link rel="prefetch" href="/lanjz/assets/js/161.efecdfe4.js"><link rel="prefetch" href="/lanjz/assets/js/162.5668c2a9.js"><link rel="prefetch" href="/lanjz/assets/js/163.7563c26b.js"><link rel="prefetch" href="/lanjz/assets/js/164.31c9b244.js"><link rel="prefetch" href="/lanjz/assets/js/165.7e52e7dc.js"><link rel="prefetch" href="/lanjz/assets/js/166.649b3fc6.js"><link rel="prefetch" href="/lanjz/assets/js/167.5ec69649.js"><link rel="prefetch" href="/lanjz/assets/js/168.db89bd4b.js"><link rel="prefetch" href="/lanjz/assets/js/169.3a28f1d8.js"><link rel="prefetch" href="/lanjz/assets/js/17.c76a247a.js"><link rel="prefetch" href="/lanjz/assets/js/170.f2e2deed.js"><link rel="prefetch" href="/lanjz/assets/js/171.5fcaafae.js"><link rel="prefetch" href="/lanjz/assets/js/172.8ff399bf.js"><link rel="prefetch" href="/lanjz/assets/js/173.fc939499.js"><link rel="prefetch" href="/lanjz/assets/js/174.0b62de96.js"><link rel="prefetch" href="/lanjz/assets/js/175.ebc2f423.js"><link rel="prefetch" href="/lanjz/assets/js/176.77710388.js"><link rel="prefetch" href="/lanjz/assets/js/177.7955192d.js"><link rel="prefetch" href="/lanjz/assets/js/178.823819be.js"><link rel="prefetch" href="/lanjz/assets/js/179.050700d8.js"><link rel="prefetch" href="/lanjz/assets/js/18.a875b93f.js"><link rel="prefetch" href="/lanjz/assets/js/180.0669ef46.js"><link rel="prefetch" href="/lanjz/assets/js/181.477db872.js"><link rel="prefetch" href="/lanjz/assets/js/182.678eb746.js"><link rel="prefetch" href="/lanjz/assets/js/183.2a48bdaf.js"><link rel="prefetch" href="/lanjz/assets/js/184.830056b0.js"><link rel="prefetch" href="/lanjz/assets/js/185.2f8fd204.js"><link rel="prefetch" href="/lanjz/assets/js/186.ef6e5af0.js"><link rel="prefetch" href="/lanjz/assets/js/187.8210db0d.js"><link rel="prefetch" href="/lanjz/assets/js/188.82f1c136.js"><link rel="prefetch" href="/lanjz/assets/js/189.89daaddb.js"><link rel="prefetch" href="/lanjz/assets/js/19.922361c7.js"><link rel="prefetch" href="/lanjz/assets/js/190.8e8a4128.js"><link rel="prefetch" href="/lanjz/assets/js/191.7971a83e.js"><link rel="prefetch" href="/lanjz/assets/js/192.0862c9d1.js"><link rel="prefetch" href="/lanjz/assets/js/193.77f24d88.js"><link rel="prefetch" href="/lanjz/assets/js/194.3e9fa4b1.js"><link rel="prefetch" href="/lanjz/assets/js/195.6f6ed368.js"><link rel="prefetch" href="/lanjz/assets/js/196.51364525.js"><link rel="prefetch" href="/lanjz/assets/js/197.2b3a6cee.js"><link rel="prefetch" href="/lanjz/assets/js/198.d0aba014.js"><link rel="prefetch" href="/lanjz/assets/js/199.656e095a.js"><link rel="prefetch" href="/lanjz/assets/js/20.4e35998e.js"><link rel="prefetch" href="/lanjz/assets/js/200.cb4edef0.js"><link rel="prefetch" href="/lanjz/assets/js/201.be4d1447.js"><link rel="prefetch" href="/lanjz/assets/js/202.3eee6b99.js"><link rel="prefetch" href="/lanjz/assets/js/203.ef49e1e9.js"><link rel="prefetch" href="/lanjz/assets/js/204.31e07ea0.js"><link rel="prefetch" href="/lanjz/assets/js/205.7e401c6c.js"><link rel="prefetch" href="/lanjz/assets/js/206.91810705.js"><link rel="prefetch" href="/lanjz/assets/js/207.5f8e82ba.js"><link rel="prefetch" href="/lanjz/assets/js/208.7d723b72.js"><link rel="prefetch" href="/lanjz/assets/js/209.3b358874.js"><link rel="prefetch" href="/lanjz/assets/js/21.2c8384ec.js"><link rel="prefetch" href="/lanjz/assets/js/210.181e5898.js"><link rel="prefetch" href="/lanjz/assets/js/211.d2a97764.js"><link rel="prefetch" href="/lanjz/assets/js/212.70f8338b.js"><link rel="prefetch" href="/lanjz/assets/js/213.d8de725b.js"><link rel="prefetch" href="/lanjz/assets/js/214.887e5e07.js"><link rel="prefetch" href="/lanjz/assets/js/215.f1cc1848.js"><link rel="prefetch" href="/lanjz/assets/js/22.04834192.js"><link rel="prefetch" href="/lanjz/assets/js/23.7f95ce6b.js"><link rel="prefetch" href="/lanjz/assets/js/24.4e789406.js"><link rel="prefetch" href="/lanjz/assets/js/25.734fbef1.js"><link rel="prefetch" href="/lanjz/assets/js/26.5a78f470.js"><link rel="prefetch" href="/lanjz/assets/js/27.b84cffd2.js"><link rel="prefetch" href="/lanjz/assets/js/28.37ef4f69.js"><link rel="prefetch" href="/lanjz/assets/js/29.0812a4e0.js"><link rel="prefetch" href="/lanjz/assets/js/3.068f5fb9.js"><link rel="prefetch" href="/lanjz/assets/js/30.c159c169.js"><link rel="prefetch" href="/lanjz/assets/js/31.0430d5c6.js"><link rel="prefetch" href="/lanjz/assets/js/32.739958ac.js"><link rel="prefetch" href="/lanjz/assets/js/33.0cc3c0e1.js"><link rel="prefetch" href="/lanjz/assets/js/34.38047369.js"><link rel="prefetch" href="/lanjz/assets/js/35.0ea3454a.js"><link rel="prefetch" href="/lanjz/assets/js/36.51b9178b.js"><link rel="prefetch" href="/lanjz/assets/js/37.75252beb.js"><link rel="prefetch" href="/lanjz/assets/js/38.cfa0500b.js"><link rel="prefetch" href="/lanjz/assets/js/39.59e84b7b.js"><link rel="prefetch" href="/lanjz/assets/js/4.4493f292.js"><link rel="prefetch" href="/lanjz/assets/js/40.ad085688.js"><link rel="prefetch" href="/lanjz/assets/js/41.d46cfd17.js"><link rel="prefetch" href="/lanjz/assets/js/42.3f75559c.js"><link rel="prefetch" href="/lanjz/assets/js/43.5a5712b1.js"><link rel="prefetch" href="/lanjz/assets/js/44.240ab927.js"><link rel="prefetch" href="/lanjz/assets/js/45.98db3666.js"><link rel="prefetch" href="/lanjz/assets/js/46.c3bfc545.js"><link rel="prefetch" href="/lanjz/assets/js/47.d87a7b51.js"><link rel="prefetch" href="/lanjz/assets/js/48.2329d2a5.js"><link rel="prefetch" href="/lanjz/assets/js/49.a47e113b.js"><link rel="prefetch" href="/lanjz/assets/js/5.a383bda1.js"><link rel="prefetch" href="/lanjz/assets/js/50.1fd26d44.js"><link rel="prefetch" href="/lanjz/assets/js/51.48f32df0.js"><link rel="prefetch" href="/lanjz/assets/js/52.12f0975f.js"><link rel="prefetch" href="/lanjz/assets/js/53.3b9f8b3b.js"><link rel="prefetch" href="/lanjz/assets/js/54.5cfd8f1a.js"><link rel="prefetch" href="/lanjz/assets/js/55.0947cf4a.js"><link rel="prefetch" href="/lanjz/assets/js/56.702c3051.js"><link rel="prefetch" href="/lanjz/assets/js/57.9f5624b5.js"><link rel="prefetch" href="/lanjz/assets/js/58.367e02ad.js"><link rel="prefetch" href="/lanjz/assets/js/59.b14c94a7.js"><link rel="prefetch" href="/lanjz/assets/js/6.b5f20986.js"><link rel="prefetch" href="/lanjz/assets/js/60.348e9687.js"><link rel="prefetch" href="/lanjz/assets/js/61.db7b738a.js"><link rel="prefetch" href="/lanjz/assets/js/62.94dc01d2.js"><link rel="prefetch" href="/lanjz/assets/js/63.eddcecfd.js"><link rel="prefetch" href="/lanjz/assets/js/64.f700c29c.js"><link rel="prefetch" href="/lanjz/assets/js/65.7857e90b.js"><link rel="prefetch" href="/lanjz/assets/js/66.edf41891.js"><link rel="prefetch" href="/lanjz/assets/js/67.34f1e3cf.js"><link rel="prefetch" href="/lanjz/assets/js/68.d6b8342f.js"><link rel="prefetch" href="/lanjz/assets/js/69.779b946d.js"><link rel="prefetch" href="/lanjz/assets/js/7.36d4d222.js"><link rel="prefetch" href="/lanjz/assets/js/70.bfa35510.js"><link rel="prefetch" href="/lanjz/assets/js/71.fec70cd7.js"><link rel="prefetch" href="/lanjz/assets/js/72.1d8d0909.js"><link rel="prefetch" href="/lanjz/assets/js/73.9948df3d.js"><link rel="prefetch" href="/lanjz/assets/js/74.8c2aabef.js"><link rel="prefetch" href="/lanjz/assets/js/75.5ae90b1a.js"><link rel="prefetch" href="/lanjz/assets/js/76.32265366.js"><link rel="prefetch" href="/lanjz/assets/js/77.2b86f7c1.js"><link rel="prefetch" href="/lanjz/assets/js/78.f7210c42.js"><link rel="prefetch" href="/lanjz/assets/js/79.12fd2eb3.js"><link rel="prefetch" href="/lanjz/assets/js/8.7223634d.js"><link rel="prefetch" href="/lanjz/assets/js/80.2dcc264f.js"><link rel="prefetch" href="/lanjz/assets/js/81.bc840e62.js"><link rel="prefetch" href="/lanjz/assets/js/82.9d275f3f.js"><link rel="prefetch" href="/lanjz/assets/js/83.3ff7359c.js"><link rel="prefetch" href="/lanjz/assets/js/84.e217d497.js"><link rel="prefetch" href="/lanjz/assets/js/85.d053d0a9.js"><link rel="prefetch" href="/lanjz/assets/js/86.047999d0.js"><link rel="prefetch" href="/lanjz/assets/js/87.5c0a1cd8.js"><link rel="prefetch" href="/lanjz/assets/js/88.be6d2f66.js"><link rel="prefetch" href="/lanjz/assets/js/89.97e034c8.js"><link rel="prefetch" href="/lanjz/assets/js/9.0d56332c.js"><link rel="prefetch" href="/lanjz/assets/js/90.7bac6a5e.js"><link rel="prefetch" href="/lanjz/assets/js/91.947e81e1.js"><link rel="prefetch" href="/lanjz/assets/js/92.c36c58d7.js"><link rel="prefetch" href="/lanjz/assets/js/93.4f313eee.js"><link rel="prefetch" href="/lanjz/assets/js/94.0a7d809f.js"><link rel="prefetch" href="/lanjz/assets/js/95.1127b82d.js"><link rel="prefetch" href="/lanjz/assets/js/96.5379f38f.js"><link rel="prefetch" href="/lanjz/assets/js/97.859b5e5f.js"><link rel="prefetch" href="/lanjz/assets/js/98.c0208d09.js"><link rel="prefetch" href="/lanjz/assets/js/99.cee222bd.js">
    <link rel="stylesheet" href="/lanjz/assets/css/0.styles.5dda244b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/lanjz/" class="home-link router-link-active"><!----> <span class="site-name">Hello Wold</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/lanjz/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端基础" class="dropdown-title"><span class="title">前端基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端基础" class="mobile-dropdown-title"><span class="title">前端基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/JavaScript/" class="nav-link router-link-active">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/ES6/" class="nav-link">
  ES6
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/HTML5/" class="nav-link">
  HTML5
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/CSS/" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Browser/" class="nav-link">
  Browser
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="网络&amp;算法" class="dropdown-title"><span class="title">网络&amp;算法</span> <span class="arrow down"></span></button> <button type="button" aria-label="网络&amp;算法" class="mobile-dropdown-title"><span class="title">网络&amp;算法</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/network/" class="nav-link">
  网络
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Algorithm/" class="nav-link">
  算法
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/secure/" class="nav-link">
  Web安全
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架" class="dropdown-title"><span class="title">框架</span> <span class="arrow down"></span></button> <button type="button" aria-label="框架" class="mobile-dropdown-title"><span class="title">框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/Vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Vue3/" class="nav-link">
  Vue3
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/React/" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/qiankun/" class="nav-link">
  qiankun
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/NA/" class="nav-link">
  跨平台
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Node" class="dropdown-title"><span class="title">Node</span> <span class="arrow down"></span></button> <button type="button" aria-label="Node" class="mobile-dropdown-title"><span class="title">Node</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/Node/基础/" class="nav-link">
  基础
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Node/Api/" class="nav-link">
  API
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Node/Package/" class="nav-link">
  yarn&amp;npm
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Node/Webpack/" class="nav-link">
  Webpack
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Node/Vite/" class="nav-link">
  Vite
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Node/ESBuild/" class="nav-link">
  esbuild
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Node/数据库/" class="nav-link">
  SQL
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工程化" class="dropdown-title"><span class="title">工程化</span> <span class="arrow down"></span></button> <button type="button" aria-label="工程化" class="mobile-dropdown-title"><span class="title">工程化</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/工程化/前端优化总结/" class="nav-link">
  前端优化总结
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/系统设计/" class="nav-link">
  系统设计
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/预加载&amp;预解析.html" class="nav-link">
  预加载&amp;预解析
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/重构改善既有代码的设计.html" class="nav-link">
  重构代码原则
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/开发与调试技巧.html" class="nav-link">
  开发与调试
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/组件设计的基本原则.html" class="nav-link">
  组件设计
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/公共模块管理.html" class="nav-link">
  公共模块管理
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/内存泄漏.html" class="nav-link">
  内存泄漏
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/前端异常捕获.html" class="nav-link">
  前端异常捕获
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/自动化部署.html" class="nav-link">
  自动化部署
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/疑难杂症.html" class="nav-link">
  问题小计
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/性能指标.html" class="nav-link">
  性能指标
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="利其器" class="dropdown-title"><span class="title">利其器</span> <span class="arrow down"></span></button> <button type="button" aria-label="利其器" class="mobile-dropdown-title"><span class="title">利其器</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/利其器/Mac.html" class="nav-link">
  Mac
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/利其器/Github.html" class="nav-link">
  Github
</a></li></ul></div></div><div class="nav-item"><a href="/lanjz/Im/" class="nav-link">
  关于我
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/lanjz/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端基础" class="dropdown-title"><span class="title">前端基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端基础" class="mobile-dropdown-title"><span class="title">前端基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/JavaScript/" class="nav-link router-link-active">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/ES6/" class="nav-link">
  ES6
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/HTML5/" class="nav-link">
  HTML5
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/CSS/" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Browser/" class="nav-link">
  Browser
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="网络&amp;算法" class="dropdown-title"><span class="title">网络&amp;算法</span> <span class="arrow down"></span></button> <button type="button" aria-label="网络&amp;算法" class="mobile-dropdown-title"><span class="title">网络&amp;算法</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/network/" class="nav-link">
  网络
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Algorithm/" class="nav-link">
  算法
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/secure/" class="nav-link">
  Web安全
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架" class="dropdown-title"><span class="title">框架</span> <span class="arrow down"></span></button> <button type="button" aria-label="框架" class="mobile-dropdown-title"><span class="title">框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/Vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Vue3/" class="nav-link">
  Vue3
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/React/" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/qiankun/" class="nav-link">
  qiankun
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/NA/" class="nav-link">
  跨平台
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Node" class="dropdown-title"><span class="title">Node</span> <span class="arrow down"></span></button> <button type="button" aria-label="Node" class="mobile-dropdown-title"><span class="title">Node</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/Node/基础/" class="nav-link">
  基础
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Node/Api/" class="nav-link">
  API
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Node/Package/" class="nav-link">
  yarn&amp;npm
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Node/Webpack/" class="nav-link">
  Webpack
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Node/Vite/" class="nav-link">
  Vite
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Node/ESBuild/" class="nav-link">
  esbuild
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Node/数据库/" class="nav-link">
  SQL
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工程化" class="dropdown-title"><span class="title">工程化</span> <span class="arrow down"></span></button> <button type="button" aria-label="工程化" class="mobile-dropdown-title"><span class="title">工程化</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/工程化/前端优化总结/" class="nav-link">
  前端优化总结
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/系统设计/" class="nav-link">
  系统设计
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/预加载&amp;预解析.html" class="nav-link">
  预加载&amp;预解析
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/重构改善既有代码的设计.html" class="nav-link">
  重构代码原则
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/开发与调试技巧.html" class="nav-link">
  开发与调试
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/组件设计的基本原则.html" class="nav-link">
  组件设计
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/公共模块管理.html" class="nav-link">
  公共模块管理
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/内存泄漏.html" class="nav-link">
  内存泄漏
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/前端异常捕获.html" class="nav-link">
  前端异常捕获
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/自动化部署.html" class="nav-link">
  自动化部署
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/疑难杂症.html" class="nav-link">
  问题小计
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/性能指标.html" class="nav-link">
  性能指标
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="利其器" class="dropdown-title"><span class="title">利其器</span> <span class="arrow down"></span></button> <button type="button" aria-label="利其器" class="mobile-dropdown-title"><span class="title">利其器</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/利其器/Mac.html" class="nav-link">
  Mac
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/利其器/Github.html" class="nav-link">
  Github
</a></li></ul></div></div><div class="nav-item"><a href="/lanjz/Im/" class="nav-link">
  关于我
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/lanjz/JavaScript/JS基础.html" class="sidebar-link">JS基础</a></li><li><a href="/lanjz/JavaScript/JS核心.html" class="sidebar-link">JS执行机制</a></li><li><a href="/lanjz/JavaScript/编写高质量JavaScript代码的基本要点.html" class="sidebar-link">编写高质量JavaScript代码的基本要点</a></li><li><a href="/lanjz/JavaScript/函数.html" class="active sidebar-link">函数</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/lanjz/JavaScript/函数.html#函数声明" class="sidebar-link">函数声明</a></li><li class="sidebar-sub-header"><a href="/lanjz/JavaScript/函数.html#函数表达式" class="sidebar-link">函数表达式</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/lanjz/JavaScript/函数.html#函数表达式作用" class="sidebar-link">函数表达式作用</a></li><li class="sidebar-sub-header"><a href="/lanjz/JavaScript/函数.html#命名函数表达式" class="sidebar-link">命名函数表达式</a></li><li class="sidebar-sub-header"><a href="/lanjz/JavaScript/函数.html#函数语句" class="sidebar-link">函数语句</a></li></ul></li><li class="sidebar-sub-header"><a href="/lanjz/JavaScript/函数.html#通过函数构造器创建的函数" class="sidebar-link">通过函数构造器创建的函数</a></li><li class="sidebar-sub-header"><a href="/lanjz/JavaScript/函数.html#立即调用的函数表达式" class="sidebar-link">立即调用的函数表达式</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/lanjz/JavaScript/函数.html#用闭包保存状态" class="sidebar-link">用闭包保存状态</a></li><li class="sidebar-sub-header"><a href="/lanjz/JavaScript/函数.html#最后的旁白-module模式" class="sidebar-link">最后的旁白：Module模式</a></li></ul></li><li class="sidebar-sub-header"><a href="/lanjz/JavaScript/函数.html#总结" class="sidebar-link">总结</a></li></ul></li><li><a href="/lanjz/JavaScript/全面解析Module模式.html" class="sidebar-link">全面解析Module模式</a></li><li><a href="/lanjz/JavaScript/闭包.html" class="sidebar-link">闭包</a></li><li><a href="/lanjz/JavaScript/设计模式.html" class="sidebar-link">设计模式</a></li><li><a href="/lanjz/JavaScript/对象创建模式.html" class="sidebar-link">对象创建模式</a></li><li><a href="/lanjz/JavaScript/JS面象对象.html" class="sidebar-link">JS 面向对象编程</a></li><li><a href="/lanjz/JavaScript/正则.html" class="sidebar-link">正则</a></li><li><a href="/lanjz/JavaScript/事件.html" class="sidebar-link">事件</a></li><li><a href="/lanjz/JavaScript/吱不吱.html" class="sidebar-link">问答</a></li><li><a href="/lanjz/JavaScript/吱不吱二.html" class="sidebar-link">吱不吱二</a></li><li><a href="/lanjz/JavaScript/代码实现.html" class="sidebar-link">代码实现</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="函数"><a href="#函数" class="header-anchor">#</a> 函数</h1> <p>在 ECMAScript 中有三种函数类型：函数声明，函数表达式和函数构造器创建的函数</p> <h2 id="函数声明"><a href="#函数声明" class="header-anchor">#</a> 函数声明</h2> <p>格式：<code>function 函数名称 (参数：可选){ 函数体 }</code></p> <p>函数声明（缩写为FD）的特征：</p> <ul><li><p>有一个特定的名称</p></li> <li><p>在源码中的位置：要么处于程序级（Pr函数表达式是出现在表达示的位置ogram level），要么处于其它函数的主体（FunctionBody）中</p></li> <li><p>在进入上下文阶段创建</p></li> <li><p>影响变量对象</p></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">exampleFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span>
</code></pre></div><p>函数声明的主要特点在于它对变量对象的影响，在代码执行阶段它们已经可用（因为FD在进入上下文阶段已经存在于VO中——代码执行之前）</p> <p>例如（函数在其声明之前被调用）</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>另外一个重点知识点是上述定义中的第二点——函数声明在源码中的位置：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 函数可以在如下地方声明：</span>
<span class="token comment">// 1) 直接在全局上下文中</span>
<span class="token keyword">function</span> <span class="token function">globalFD</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 2) 或者在一个函数的函数体内</span>
  <span class="token keyword">function</span> <span class="token function">innerFD</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>只有这2个位置可以声明函数，也就是说: 不可能在表达式位置或一个代码块中定义它</p> <blockquote><p>函数声明只能出现在程序或函数体内。从句法上讲,它们不能出现在 <code>Block（块）({ ... })</code>中，例如不能出现在 <code>if</code>、<code>while</code> 或 <code>for</code> 语句中。因为 <code>Block</code> （块） 中只能包含 <code>Statement</code> 语句， 而不能包含函数声明这样的源元素。</p></blockquote> <h2 id="函数表达式"><a href="#函数表达式" class="header-anchor">#</a> 函数表达式</h2> <p>格式：<code>function 函数名称（可选）(参数：可选){ 函数体 }</code></p> <p>函数表达式（缩写为FE）的特征：</p> <ul><li><p>出现在表达式的位置</p></li> <li><p>有可选的名称</p></li> <li><p>不会影响变量对象</p></li> <li><p>在代码执行阶段创建</p></li></ul> <p><strong>函数表达式是出现在表达式的位置:</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// 声明，因为它是程序的一部分</span>

<span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">function</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// 声明，因为它是函数体的一部分</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> <span class="token function-variable function">bar</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// 表达式，因为它是赋值表达式的一部分</span>

<span class="token comment">// 例子三</span>
<span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 函数表达式：包含在分组操作符内</span>


<span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token function">baz</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// 表达式 逗号也是操作符</span>
 
<span class="token comment">// 在数组初始化器内只能是表达式</span>
<span class="token punctuation">[</span><span class="token keyword">function</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">new</span> <span class="token class-name">function</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// 表达式，因为它是new表达式</span>

</code></pre></div><p>上面 例子三 之所以是函数表达式，原因是因为括号 <strong><code>()</code> 是一个分组操作符，它的内部只能包含表达式</strong>，我们来看几个例子：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// 函数声明</span>
<span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 函数表达式：包含在分组操作符内</span>
  
<span class="token keyword">try</span> <span class="token punctuation">{</span>
  <span class="token punctuation">(</span><span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 分组操作符，只能包含表达式而不能包含语句：这里的var就是语句</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// SyntaxError</span>
<span class="token punctuation">}</span>
</code></pre></div><p>你可以会想到，在使用<code>eval</code>对<code>JSON</code>进行执行的时候，<code>JSON</code>字符串通常被包含在一个圆括号里：<code>eval('(' + json + ')')</code>，这样做的原因就是因为使用分组操作符让解析器强制将<code>JSON</code>的花括号解析成表达式而不是代码块</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">try</span> <span class="token punctuation">{</span>
  <span class="token punctuation">{</span> <span class="token string">&quot;x&quot;</span><span class="token operator">:</span> <span class="token number">5</span> <span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// &quot;{&quot; 和 &quot;}&quot; 做解析成代码块</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// SyntaxError</span>
<span class="token punctuation">}</span>

<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">&quot;x&quot;</span><span class="token operator">:</span> <span class="token number">5</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 分组操作符强制将&quot;{&quot; 和 &quot;}&quot;作为对象字面量来解析</span>
</code></pre></div><p><strong>函数表达式只能在代码执行阶段创建而且不存在于变量对象中，让我们来看一个示例行为：</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// FE在定义阶段之前不可用（因为它是在代码执行阶段创建）</span>
 
<span class="token function">alert</span><span class="token punctuation">(</span>foo<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 报错 VM14656:3 Uncaught ReferenceError: foo is not defined</span>
 
<span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token comment">// 定义阶段之后也不可用，因为他不在变量对象VO中</span>
 
<span class="token function">alert</span><span class="token punctuation">(</span>foo<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 报错 VM14656:3 Uncaught ReferenceError: foo is not defined</span>
</code></pre></div><h3 id="函数表达式作用"><a href="#函数表达式作用" class="header-anchor">#</a> 函数表达式作用</h3> <p><strong>1. 在表达式中使用它们，”不会污染”变量对象。最简单的例子是将一个函数作为参数传递给其它函数</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter">callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
 
<span class="token comment">// 将 bar 函赋值给参数</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'foo.bar'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 将 baz 函赋值给参数</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">baz</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'foo.baz'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>2. 在代码执行阶段通过条件语句进行创建FE，不会污染变量对象VO。</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> foo <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
 
<span class="token keyword">var</span> bar <span class="token operator">=</span> <span class="token punctuation">(</span>foo <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span>
  <span class="token operator">?</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">alert</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
  <span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">alert</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0</span>
</code></pre></div><p><strong>3. 使用表达式创建闭包</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> foo <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
 
<span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">initialize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 
  <span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
 
  foo<span class="token punctuation">.</span><span class="token function-variable function">bar</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
 
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
foo<span class="token punctuation">.</span><span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 10;</span>
 
<span class="token function">alert</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;x&quot; 未定义</span>
</code></pre></div><p><code>initialize</code> 的内部变量 <code>“x”</code> 在外部不能直接访问的, 但是通过 <code>foo.bar</code> （通过 <code>[[Scope]]</code> 属性）就可以访问得到</p> <h3 id="命名函数表达式"><a href="#命名函数表达式" class="header-anchor">#</a> 命名函数表达式</h3> <p>命名函数表达式就是带有名字的表达式，如 <code>var bar = function foo(){}</code></p> <p>但有一点需要记住：这个名字（上例中的 <code>foo</code> ）只在新定义的函数作用域内有效，因为规范规定了标示符不能在外围的作用域内有效：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> <span class="token function-variable function">f</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">typeof</span> foo<span class="token punctuation">;</span> <span class="token comment">// foo是在内部作用域内有效</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// foo在外部是不可见的</span>
<span class="token keyword">typeof</span> foo<span class="token punctuation">;</span> <span class="token comment">// &quot;undefined&quot;, 如果使用 console.log(foo)，就会直接报错了</span>
<span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;function&quot;</span>
</code></pre></div><h3 id="函数语句"><a href="#函数语句" class="header-anchor">#</a> 函数语句</h3> <p>如果函数声明在块中如 <code>if</code> , <code>while</code> 等语句中，这些就是函数语句, 在块中声明的函数跟正常的函数表现也有点区别</p> <p><strong>函数语句不是在变量初始化期间声明的，而是在运行时声明的</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 此刻，foo还没用声明</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fofo<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;undefined&quot;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 进入这里以后，foo就被声明在整个作用域内了</span>
  <span class="token keyword">function</span> <span class="token function">fofo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">else</span> <span class="token punctuation">{</span>
  <span class="token comment">// 从来不会走到这里，所以这里的foo也不会被声明</span>
  <span class="token keyword">function</span> <span class="token function">fofo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fofo<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;ƒ fofo(){ return 1; }&quot;</span>
</code></pre></div><h2 id="通过函数构造器创建的函数"><a href="#通过函数构造器创建的函数" class="header-anchor">#</a> 通过函数构造器创建的函数</h2> <p>既然这种函数对象也有自己的特色，我们将它与函数声明和函数表达式区分开来。其主要特点在于这种函数的 <code>[[Scope]]</code> 属性仅包含全局对象：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
 
<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 
  <span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> y <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span>
 
  <span class="token keyword">var</span> bar <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Function</span><span class="token punctuation">(</span><span class="token string">'alert(x); alert(y);'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
  <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 10, &quot;y&quot; 未定义</span>
 
<span class="token punctuation">}</span>
</code></pre></div><p>我们看到，函数 <code>bar</code> 的 <code>[[Scope]]</code> 属性不包含 <code>foo</code> 上下文的 <code>Ao</code> ——变量 <code>”y”</code> 不能访问，变量 <code>”x”</code> 从全局对象中取得。顺便提醒一句，<code>Function</code> 构造器既可使用<code>new</code> 关键字也可以没有</p> <h2 id="立即调用的函数表达式"><a href="#立即调用的函数表达式" class="header-anchor">#</a> 立即调用的函数表达式</h2> <p>立即调用的函数表达式即函数定义之后就直接执行函数，也叫自执行函数</p> <p>当你声明类似 <code>function foo(){}</code> 或 <code>var foo = function(){}</code> 函数的时候，通过在后面加个括弧就可以实现自执行，但不是像下面这么使用</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">/* code */</span> <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Uncaught SyntaxError: Function statements require a function name</span>
</code></pre></div><p>上面代码会出错，是因为在解析器解析全局的 <code>function</code> 或者 <code>function</code> 内部 <code>function</code> 关键字的时候，默认认为是函数声明，而不是函数表达式，如果你不显示告诉编译器，它默认会声明成一个缺少名字的 <code>function</code> ，并且抛出一个语法错误信息，因为 <code>function</code> 声明需要一个名字</p> <p>那就算加个名字，也是会出错的</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 下面运行后还是出错</span>
<span class="token comment">// 其实这个function在语法上是没问题的，出错的是 右边的 ()</span>
 
<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">/* code */</span> <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// SyntaxError: Unexpected token )</span>
<span class="token comment">// 上面代码 相当于</span>
<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">/* code */</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// SyntaxError: Unexpected token )</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 但是如果你在括弧()里传入一个表达式，将不会有异常抛出</span>
<span class="token comment">// 但是foo函数依然不会执行</span>
<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">/* code */</span> <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// (1)这只是一个分组操作符，不是函数调用！</span>
 
<span class="token comment">// 因为它完全等价于下面这个代码，一个function声明后面，又声明了一个毫无关系的表达式： </span>
<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">/* code */</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 直接在控制台输出 ()</span>
<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 报错</span>
<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// 1</span>
</code></pre></div><p>所以这是一个没有任何表达式的分组操作符错误，而不是函数声明错误，也就浊说此时在函数声明后面的 <code>()</code> 他是一个分组操作符，而不是一个函数调用所使用的圆括号</p> <p><strong>自执行函数表达式</strong></p> <p>要解决上述问题，我们只需要在函数外围添加一个大括弧就行了，因为 JavaScript 里括弧 <code>()</code> 里面不是语句而是表达示，所以在这一点上，解析器在解析 <code>function</code> 关键字的时候，会将相应的代码解析成 表达式(这里就是函数表达)，而不是函数声明。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 下面2个括弧()都会立即执行</span>

<span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* code */</span> <span class="token punctuation">}</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 推荐使用这个</span>
<span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* code */</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 但是这个也是可以用的</span>
</code></pre></div><p><strong>所以能立即执行的函数本质是需要这个函数是函数表达式</strong>， 除了 <code>()</code> 能生成表达式，JS 的 <code>&amp;&amp;</code> ，<code>异或</code>，<code>逗号</code> 等操作符等可以生成表达式</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 由于括弧()和JS的&amp;&amp;，异或，逗号等操作符是在函数表达式和函数声明上消除歧义的</span>
<span class="token comment">// 所以一旦解析器知道其中一个已经是表达式了，其它的也都默认为表达式了</span>

<span class="token keyword">var</span> <span class="token function-variable function">i</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token number">10</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token boolean">true</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* code */</span> <span class="token punctuation">}</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* code */</span> <span class="token punctuation">}</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 如果你不在意返回值，或者不怕难以阅读</span>
<span class="token comment">// 你甚至可以在function前面加一元操作符号</span>

<span class="token operator">!</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* code */</span> <span class="token punctuation">}</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">~</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* code */</span> <span class="token punctuation">}</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">-</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* code */</span> <span class="token punctuation">}</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* code */</span> <span class="token punctuation">}</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 还有一个情况，使用new关键字,也可以用，但我不确定它的效率</span>
<span class="token comment">// http://twitter.com/kuvos/status/18209252090847232</span>

<span class="token keyword">new</span> <span class="token class-name">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* code */</span> <span class="token punctuation">}</span>
<span class="token keyword">new</span> <span class="token class-name">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* code */</span> <span class="token punctuation">}</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 如果需要传递参数，只需要加上括弧()</span>

</code></pre></div><p>注意，下面一个立即执行的函数，周围的括号不是必须的，因为函数已经处在表达式的位置，解析器知道它处理的是在函数执行阶段应该被创建的FE，这样在函数创建后立即调用了函数</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> foo <span class="token operator">=</span> <span class="token punctuation">{</span>
 
  <span class="token function-variable function">bar</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> x <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">!=</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token string">'yes'</span> <span class="token operator">:</span> <span class="token string">'no'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
 
<span class="token punctuation">}</span><span class="token punctuation">;</span>
 
<span class="token function">alert</span><span class="token punctuation">(</span>foo<span class="token punctuation">.</span>bar<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'yes'</span>
</code></pre></div><blockquote><p>因此，”关于圆括号”问题完整的答案如下：当函数不在表达式的位置的时候，分组操作符圆括号是必须的——也就是手工将函数转化成FE。
如果解析器知道它处理的是FE，就没必要用圆括号。</p></blockquote> <h3 id="用闭包保存状态"><a href="#用闭包保存状态" class="header-anchor">#</a> 用闭包保存状态</h3> <p>来个常见利用特循给DOM节点添加事件的例子：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> elems <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> elems<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    elems<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'I am link #'</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">'false'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre></div><p>上面代码中，成功给 <code>elems</code> 节点都添加了点击事件，但是实际上每次 <code>alert</code> 输出的 <code>i</code> 总是最后一个，因为上面的循环中 <code>i</code> 是共享的， 所以循环内存的代码块使用的是同一个 <code>i</code></p> <p>接下使用闭包解决来这个问题</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 这个是可以用的，因为他在自执行函数表达式闭包内部</span>
<span class="token comment">// i的值作为locked的索引存在，在循环执行结束以后，尽管最后i的值变成了a元素总数（例如10）</span>
<span class="token comment">// 但闭包内部的lockedInIndex值是没有改变，因为他已经执行完毕了</span>
<span class="token comment">// 所以当点击连接的时候，结果是正确的</span>

<span class="token keyword">var</span> elems <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> elems<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">lockedInIndex</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        elems<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'I am link #'</span> <span class="token operator">+</span> lockedInIndex<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">'false'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>

<span class="token comment">// 你也可以像下面这样应用，在处理函数那里使用自执行函数表达式</span>
<span class="token comment">// 而不是在addEventListener外部</span>
<span class="token comment">// 但是相对来说，上面的代码更具可读性</span>

<span class="token keyword">var</span> elems <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> elems<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    elems<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">lockedInIndex</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'I am link #'</span> <span class="token operator">+</span> lockedInIndex<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'false'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre></div><p>使用闭包直接可以引用传入的这些参数， 闭包内相当于锁住传入的参数，所以利用自执行函数表达式可以有效地保存状态</p> <h3 id="最后的旁白-module模式"><a href="#最后的旁白-module模式" class="header-anchor">#</a> 最后的旁白：Module模式</h3> <p>自执行函数除了上面所说的锁住参数的功能以外，还有一个作用就是实现 Module 模式</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 创建一个立即调用的匿名函数表达式</span>
<span class="token comment">// return一个变量，其中这个变量里包含你要暴露的东西</span>
<span class="token comment">// 返回的这个变量将赋值给counter，而不是外面声明的function自身</span>

<span class="token keyword">var</span> counter <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> i<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function-variable function">set</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            i <span class="token operator">=</span> val<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function-variable function">increment</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token operator">++</span>i<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// counter是一个带有多个属性的对象，上面的代码对于属性的体现其实是方法</span>

counter<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0</span>
counter<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
counter<span class="token punctuation">.</span><span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 4</span>
counter<span class="token punctuation">.</span><span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 5</span>

counter<span class="token punctuation">.</span>i<span class="token punctuation">;</span> <span class="token comment">// undefined 因为i不是返回对象的属性</span>
i<span class="token punctuation">;</span> <span class="token comment">// 引用错误: i 没有定义（因为i只存在于闭包）</span>
</code></pre></div><h2 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h2> <p><strong>函数声明与函数表达式区别</strong></p> <p>定义函数的方法有函数表达式和函数声明两种，两者的区别 ECMA规范 只明确了一点：函数声明必须带有标示符（Identifier）（就是大家常说的函数名称），而函数表达式则可以省略这个标示符：</p> <ul><li><p>函数声明: <code>function 函数名称 (参数：可选){ 函数体 }</code></p></li> <li><p>函数表达式： <code>function 函数名称（可选）(参数：可选){ 函数体 }</code></p></li></ul> <p>那如果这个函都带了函数名称呢，如何判断是函数声明还是函数表达式呢？其实 ECMAScript 实质是通过上下文来区分的，如果 <code>function foo(){}</code> 是作为表达式的一部分的话，那它就是一个函数表达式，如果 <code>function foo(){}</code> 被包含在一个函数体内，或者位于程序的最顶部的话，那它就是一个函数声明</p> <p><strong>函数声明存在变量提升</strong></p> <p>函数声明会在任何表达式被解析和求值之前先被解析和求值：</p> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ƒ fn() {return 'Hello world!';}</span>
<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token string">'Hello world!'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fn2<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// undefined</span>
<span class="token keyword">var</span> <span class="token function-variable function">fn2</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token string">'Hello world!'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>另外，还有一点需要提醒一下，函数声明在条件语句内虽然可以用，但是没有被标准化，也就是说不同的环境可能有不同的执行结果，所以这样情况下，最好使用函数表达式：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">'first'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">else</span> <span class="token punctuation">{</span>
  <span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">'second'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 相反，这样情况，我们要用函数表达式</span>
<span class="token keyword">var</span> foo<span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">foo</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">'first'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">else</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">foo</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">'second'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/lanjz/JavaScript/编写高质量JavaScript代码的基本要点.html" class="prev">
        编写高质量JavaScript代码的基本要点
      </a></span> <span class="next"><a href="/lanjz/JavaScript/全面解析Module模式.html">
        全面解析Module模式
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/lanjz/assets/js/app.e671314c.js" defer></script><script src="/lanjz/assets/js/2.99360f9e.js" defer></script><script src="/lanjz/assets/js/105.fa7a0f76.js" defer></script>
  </body>
</html>
