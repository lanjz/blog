<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>CodeView | Hello Wold</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="Just playing around">
    
    <link rel="preload" href="/lanjz/assets/css/0.styles.5dda244b.css" as="style"><link rel="preload" href="/lanjz/assets/js/app.84d7d4c1.js" as="script"><link rel="preload" href="/lanjz/assets/js/2.6c8e4dcc.js" as="script"><link rel="preload" href="/lanjz/assets/js/184.13b2dd65.js" as="script"><link rel="prefetch" href="/lanjz/assets/js/10.6c646ad4.js"><link rel="prefetch" href="/lanjz/assets/js/100.87b19bf9.js"><link rel="prefetch" href="/lanjz/assets/js/101.6e9515c2.js"><link rel="prefetch" href="/lanjz/assets/js/102.af085cfc.js"><link rel="prefetch" href="/lanjz/assets/js/103.ea351bbf.js"><link rel="prefetch" href="/lanjz/assets/js/104.33b2c1fa.js"><link rel="prefetch" href="/lanjz/assets/js/105.0bebd84c.js"><link rel="prefetch" href="/lanjz/assets/js/106.385c8236.js"><link rel="prefetch" href="/lanjz/assets/js/107.f85d5ab6.js"><link rel="prefetch" href="/lanjz/assets/js/108.f4a58b9d.js"><link rel="prefetch" href="/lanjz/assets/js/109.c6801a58.js"><link rel="prefetch" href="/lanjz/assets/js/11.32d8eb79.js"><link rel="prefetch" href="/lanjz/assets/js/110.1c9d728e.js"><link rel="prefetch" href="/lanjz/assets/js/111.2f053003.js"><link rel="prefetch" href="/lanjz/assets/js/112.22344538.js"><link rel="prefetch" href="/lanjz/assets/js/113.df2ce144.js"><link rel="prefetch" href="/lanjz/assets/js/114.68982266.js"><link rel="prefetch" href="/lanjz/assets/js/115.b12452e8.js"><link rel="prefetch" href="/lanjz/assets/js/116.dfa5fa44.js"><link rel="prefetch" href="/lanjz/assets/js/117.eb8779b1.js"><link rel="prefetch" href="/lanjz/assets/js/118.7fd3885a.js"><link rel="prefetch" href="/lanjz/assets/js/119.e19ac71e.js"><link rel="prefetch" href="/lanjz/assets/js/12.7960739e.js"><link rel="prefetch" href="/lanjz/assets/js/120.6f54538b.js"><link rel="prefetch" href="/lanjz/assets/js/121.b929151d.js"><link rel="prefetch" href="/lanjz/assets/js/122.9d96c28d.js"><link rel="prefetch" href="/lanjz/assets/js/123.8e84a10d.js"><link rel="prefetch" href="/lanjz/assets/js/124.86640547.js"><link rel="prefetch" href="/lanjz/assets/js/125.c3c6fef1.js"><link rel="prefetch" href="/lanjz/assets/js/126.016350f4.js"><link rel="prefetch" href="/lanjz/assets/js/127.4b3d234a.js"><link rel="prefetch" href="/lanjz/assets/js/128.3fd3bbc5.js"><link rel="prefetch" href="/lanjz/assets/js/129.1f2b1b39.js"><link rel="prefetch" href="/lanjz/assets/js/13.6488e799.js"><link rel="prefetch" href="/lanjz/assets/js/130.b987d1fa.js"><link rel="prefetch" href="/lanjz/assets/js/131.44164ecf.js"><link rel="prefetch" href="/lanjz/assets/js/132.0520a1fa.js"><link rel="prefetch" href="/lanjz/assets/js/133.9b30da6e.js"><link rel="prefetch" href="/lanjz/assets/js/134.ac5737f6.js"><link rel="prefetch" href="/lanjz/assets/js/135.d6859a6e.js"><link rel="prefetch" href="/lanjz/assets/js/136.71f21146.js"><link rel="prefetch" href="/lanjz/assets/js/137.03ceade9.js"><link rel="prefetch" href="/lanjz/assets/js/138.a00a44f6.js"><link rel="prefetch" href="/lanjz/assets/js/139.8306c476.js"><link rel="prefetch" href="/lanjz/assets/js/14.02167080.js"><link rel="prefetch" href="/lanjz/assets/js/140.1766ccbb.js"><link rel="prefetch" href="/lanjz/assets/js/141.3e3c79d0.js"><link rel="prefetch" href="/lanjz/assets/js/142.e75730ff.js"><link rel="prefetch" href="/lanjz/assets/js/143.a021a9a7.js"><link rel="prefetch" href="/lanjz/assets/js/144.5c2380f9.js"><link rel="prefetch" href="/lanjz/assets/js/145.2977a658.js"><link rel="prefetch" href="/lanjz/assets/js/146.9e286115.js"><link rel="prefetch" href="/lanjz/assets/js/147.31c749bf.js"><link rel="prefetch" href="/lanjz/assets/js/148.8424b2c0.js"><link rel="prefetch" href="/lanjz/assets/js/149.e0f748a3.js"><link rel="prefetch" href="/lanjz/assets/js/15.4ffc9ba3.js"><link rel="prefetch" href="/lanjz/assets/js/150.f339e909.js"><link rel="prefetch" href="/lanjz/assets/js/151.355eb85a.js"><link rel="prefetch" href="/lanjz/assets/js/152.85e9ddd9.js"><link rel="prefetch" href="/lanjz/assets/js/153.ee64d133.js"><link rel="prefetch" href="/lanjz/assets/js/154.b3f66184.js"><link rel="prefetch" href="/lanjz/assets/js/155.9eafc78f.js"><link rel="prefetch" href="/lanjz/assets/js/156.045c33dc.js"><link rel="prefetch" href="/lanjz/assets/js/157.eb87e4b3.js"><link rel="prefetch" href="/lanjz/assets/js/158.bd8afdff.js"><link rel="prefetch" href="/lanjz/assets/js/159.c85f400d.js"><link rel="prefetch" href="/lanjz/assets/js/16.df9532ad.js"><link rel="prefetch" href="/lanjz/assets/js/160.3a68c536.js"><link rel="prefetch" href="/lanjz/assets/js/161.f4090279.js"><link rel="prefetch" href="/lanjz/assets/js/162.7caa9687.js"><link rel="prefetch" href="/lanjz/assets/js/163.0ed9ad30.js"><link rel="prefetch" href="/lanjz/assets/js/164.d2b04711.js"><link rel="prefetch" href="/lanjz/assets/js/165.06451feb.js"><link rel="prefetch" href="/lanjz/assets/js/166.2570cf28.js"><link rel="prefetch" href="/lanjz/assets/js/167.8fc37b25.js"><link rel="prefetch" href="/lanjz/assets/js/168.83c7317f.js"><link rel="prefetch" href="/lanjz/assets/js/169.f0e00c83.js"><link rel="prefetch" href="/lanjz/assets/js/17.ccfa3d3d.js"><link rel="prefetch" href="/lanjz/assets/js/170.c4218cba.js"><link rel="prefetch" href="/lanjz/assets/js/171.9c2c875c.js"><link rel="prefetch" href="/lanjz/assets/js/172.88be3e70.js"><link rel="prefetch" href="/lanjz/assets/js/173.673a02e8.js"><link rel="prefetch" href="/lanjz/assets/js/174.dddc71dd.js"><link rel="prefetch" href="/lanjz/assets/js/175.9998579a.js"><link rel="prefetch" href="/lanjz/assets/js/176.25ae14f8.js"><link rel="prefetch" href="/lanjz/assets/js/177.51b1dad6.js"><link rel="prefetch" href="/lanjz/assets/js/178.0f6e9ee9.js"><link rel="prefetch" href="/lanjz/assets/js/179.15ada15c.js"><link rel="prefetch" href="/lanjz/assets/js/18.361a256c.js"><link rel="prefetch" href="/lanjz/assets/js/180.a639fdd1.js"><link rel="prefetch" href="/lanjz/assets/js/181.20bfb079.js"><link rel="prefetch" href="/lanjz/assets/js/182.5b0270a7.js"><link rel="prefetch" href="/lanjz/assets/js/183.7a338376.js"><link rel="prefetch" href="/lanjz/assets/js/185.d63b728e.js"><link rel="prefetch" href="/lanjz/assets/js/186.4311deb6.js"><link rel="prefetch" href="/lanjz/assets/js/187.1d6d4d48.js"><link rel="prefetch" href="/lanjz/assets/js/188.9a7204af.js"><link rel="prefetch" href="/lanjz/assets/js/189.f61a2422.js"><link rel="prefetch" href="/lanjz/assets/js/19.2f8555cc.js"><link rel="prefetch" href="/lanjz/assets/js/190.285a9382.js"><link rel="prefetch" href="/lanjz/assets/js/191.2637db5c.js"><link rel="prefetch" href="/lanjz/assets/js/192.bb206762.js"><link rel="prefetch" href="/lanjz/assets/js/193.c4dd3053.js"><link rel="prefetch" href="/lanjz/assets/js/194.7c4ab2ae.js"><link rel="prefetch" href="/lanjz/assets/js/195.9b3c6f96.js"><link rel="prefetch" href="/lanjz/assets/js/196.99d2da0f.js"><link rel="prefetch" href="/lanjz/assets/js/197.5f4ac674.js"><link rel="prefetch" href="/lanjz/assets/js/198.0d4bfd1f.js"><link rel="prefetch" href="/lanjz/assets/js/199.ea5425f8.js"><link rel="prefetch" href="/lanjz/assets/js/20.f60ff1ba.js"><link rel="prefetch" href="/lanjz/assets/js/200.65b33e61.js"><link rel="prefetch" href="/lanjz/assets/js/201.179ec2ea.js"><link rel="prefetch" href="/lanjz/assets/js/202.59c164e7.js"><link rel="prefetch" href="/lanjz/assets/js/203.b995258c.js"><link rel="prefetch" href="/lanjz/assets/js/204.0ddff92c.js"><link rel="prefetch" href="/lanjz/assets/js/21.d39779f4.js"><link rel="prefetch" href="/lanjz/assets/js/22.aa33cab2.js"><link rel="prefetch" href="/lanjz/assets/js/23.4f54771e.js"><link rel="prefetch" href="/lanjz/assets/js/24.c28abb7f.js"><link rel="prefetch" href="/lanjz/assets/js/25.44e169f2.js"><link rel="prefetch" href="/lanjz/assets/js/26.239f8bd2.js"><link rel="prefetch" href="/lanjz/assets/js/27.a5dc6c82.js"><link rel="prefetch" href="/lanjz/assets/js/28.f2832c94.js"><link rel="prefetch" href="/lanjz/assets/js/29.e6d9708b.js"><link rel="prefetch" href="/lanjz/assets/js/3.db88cad2.js"><link rel="prefetch" href="/lanjz/assets/js/30.a7b7a139.js"><link rel="prefetch" href="/lanjz/assets/js/31.e2ced13f.js"><link rel="prefetch" href="/lanjz/assets/js/32.655cfa6c.js"><link rel="prefetch" href="/lanjz/assets/js/33.b177acdd.js"><link rel="prefetch" href="/lanjz/assets/js/34.6b5b3d16.js"><link rel="prefetch" href="/lanjz/assets/js/35.4fd2dc81.js"><link rel="prefetch" href="/lanjz/assets/js/36.edd12070.js"><link rel="prefetch" href="/lanjz/assets/js/37.8b969b15.js"><link rel="prefetch" href="/lanjz/assets/js/38.0cc4bd7a.js"><link rel="prefetch" href="/lanjz/assets/js/39.841ea2a1.js"><link rel="prefetch" href="/lanjz/assets/js/4.9b53d015.js"><link rel="prefetch" href="/lanjz/assets/js/40.ce3ca255.js"><link rel="prefetch" href="/lanjz/assets/js/41.60b0873e.js"><link rel="prefetch" href="/lanjz/assets/js/42.ec5cb154.js"><link rel="prefetch" href="/lanjz/assets/js/43.6ca19df3.js"><link rel="prefetch" href="/lanjz/assets/js/44.eb6e9dd8.js"><link rel="prefetch" href="/lanjz/assets/js/45.60c2dfe1.js"><link rel="prefetch" href="/lanjz/assets/js/46.0fc37434.js"><link rel="prefetch" href="/lanjz/assets/js/47.f11716d9.js"><link rel="prefetch" href="/lanjz/assets/js/48.2b161051.js"><link rel="prefetch" href="/lanjz/assets/js/49.dc9c77de.js"><link rel="prefetch" href="/lanjz/assets/js/5.4f413204.js"><link rel="prefetch" href="/lanjz/assets/js/50.6ab9d3a7.js"><link rel="prefetch" href="/lanjz/assets/js/51.5df74f56.js"><link rel="prefetch" href="/lanjz/assets/js/52.09418408.js"><link rel="prefetch" href="/lanjz/assets/js/53.c1633492.js"><link rel="prefetch" href="/lanjz/assets/js/54.cf9495d2.js"><link rel="prefetch" href="/lanjz/assets/js/55.3a191c93.js"><link rel="prefetch" href="/lanjz/assets/js/56.347a0839.js"><link rel="prefetch" href="/lanjz/assets/js/57.712739c2.js"><link rel="prefetch" href="/lanjz/assets/js/58.762bcadc.js"><link rel="prefetch" href="/lanjz/assets/js/59.da668da4.js"><link rel="prefetch" href="/lanjz/assets/js/6.02af52b7.js"><link rel="prefetch" href="/lanjz/assets/js/60.d307d3f2.js"><link rel="prefetch" href="/lanjz/assets/js/61.aeaa2b12.js"><link rel="prefetch" href="/lanjz/assets/js/62.8491add1.js"><link rel="prefetch" href="/lanjz/assets/js/63.579d1cc6.js"><link rel="prefetch" href="/lanjz/assets/js/64.25aaacbd.js"><link rel="prefetch" href="/lanjz/assets/js/65.166e1d36.js"><link rel="prefetch" href="/lanjz/assets/js/66.2c284eed.js"><link rel="prefetch" href="/lanjz/assets/js/67.0f696ab0.js"><link rel="prefetch" href="/lanjz/assets/js/68.514f82b7.js"><link rel="prefetch" href="/lanjz/assets/js/69.79b60530.js"><link rel="prefetch" href="/lanjz/assets/js/7.9be40287.js"><link rel="prefetch" href="/lanjz/assets/js/70.c1e8fbbb.js"><link rel="prefetch" href="/lanjz/assets/js/71.a1d47b1c.js"><link rel="prefetch" href="/lanjz/assets/js/72.549cd821.js"><link rel="prefetch" href="/lanjz/assets/js/73.3dfcf00e.js"><link rel="prefetch" href="/lanjz/assets/js/74.631dede0.js"><link rel="prefetch" href="/lanjz/assets/js/75.996fe1d2.js"><link rel="prefetch" href="/lanjz/assets/js/76.ed67b599.js"><link rel="prefetch" href="/lanjz/assets/js/77.7697f808.js"><link rel="prefetch" href="/lanjz/assets/js/78.6a489109.js"><link rel="prefetch" href="/lanjz/assets/js/79.0fe9f711.js"><link rel="prefetch" href="/lanjz/assets/js/8.9015a7bc.js"><link rel="prefetch" href="/lanjz/assets/js/80.de93d819.js"><link rel="prefetch" href="/lanjz/assets/js/81.f1de07f3.js"><link rel="prefetch" href="/lanjz/assets/js/82.80bf4b53.js"><link rel="prefetch" href="/lanjz/assets/js/83.c0e2c2fc.js"><link rel="prefetch" href="/lanjz/assets/js/84.553989bb.js"><link rel="prefetch" href="/lanjz/assets/js/85.bf7aa6e1.js"><link rel="prefetch" href="/lanjz/assets/js/86.029dbb63.js"><link rel="prefetch" href="/lanjz/assets/js/87.965e25e0.js"><link rel="prefetch" href="/lanjz/assets/js/88.17d6ca1c.js"><link rel="prefetch" href="/lanjz/assets/js/89.f06590ed.js"><link rel="prefetch" href="/lanjz/assets/js/9.b77e88ca.js"><link rel="prefetch" href="/lanjz/assets/js/90.9b962067.js"><link rel="prefetch" href="/lanjz/assets/js/91.2a00ef13.js"><link rel="prefetch" href="/lanjz/assets/js/92.1775b586.js"><link rel="prefetch" href="/lanjz/assets/js/93.0b379cb2.js"><link rel="prefetch" href="/lanjz/assets/js/94.2ed1a698.js"><link rel="prefetch" href="/lanjz/assets/js/95.9eaef201.js"><link rel="prefetch" href="/lanjz/assets/js/96.a7bf4c69.js"><link rel="prefetch" href="/lanjz/assets/js/97.5bc07a4f.js"><link rel="prefetch" href="/lanjz/assets/js/98.d43f64a6.js"><link rel="prefetch" href="/lanjz/assets/js/99.95ad3644.js">
    <link rel="stylesheet" href="/lanjz/assets/css/0.styles.5dda244b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/lanjz/" class="home-link router-link-active"><!----> <span class="site-name">Hello Wold</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/lanjz/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端基础" class="dropdown-title"><span class="title">前端基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端基础" class="mobile-dropdown-title"><span class="title">前端基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/JavaScript/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/ES6/" class="nav-link">
  ES6
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/HTML5/" class="nav-link">
  HTML5
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/CSS/" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Browser/" class="nav-link">
  Browser
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="网络&amp;算法" class="dropdown-title"><span class="title">网络&amp;算法</span> <span class="arrow down"></span></button> <button type="button" aria-label="网络&amp;算法" class="mobile-dropdown-title"><span class="title">网络&amp;算法</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/network/" class="nav-link">
  网络
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Algorithm/" class="nav-link">
  算法
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/secure/" class="nav-link">
  Web安全
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架" class="dropdown-title"><span class="title">框架</span> <span class="arrow down"></span></button> <button type="button" aria-label="框架" class="mobile-dropdown-title"><span class="title">框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/Vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Vue3/" class="nav-link">
  Vue3
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/React/" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/qiankun/" class="nav-link">
  qiankun
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/NA/" class="nav-link">
  跨平台
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Node" class="dropdown-title"><span class="title">Node</span> <span class="arrow down"></span></button> <button type="button" aria-label="Node" class="mobile-dropdown-title"><span class="title">Node</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/Node/基础/" class="nav-link">
  基础
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Node/Api/" class="nav-link">
  API
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Node/Package/" class="nav-link">
  yarn&amp;npm
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Node/Webpack/" class="nav-link">
  Webpack
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Node/Vite/" class="nav-link">
  Vite
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工程化" class="dropdown-title"><span class="title">工程化</span> <span class="arrow down"></span></button> <button type="button" aria-label="工程化" class="mobile-dropdown-title"><span class="title">工程化</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/工程化/前端优化总结/" class="nav-link">
  前端优化总结
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/系统设计/" class="nav-link">
  系统设计
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/预加载&amp;预解析.html" class="nav-link">
  预加载&amp;预解析
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/重构改善既有代码的设计.html" class="nav-link">
  重构代码原则
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/开发与调试技巧.html" class="nav-link">
  开发与调试
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/组件设计的基本原则.html" class="nav-link">
  组件设计
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/公共模块管理.html" class="nav-link">
  公共模块管理
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/内存泄漏.html" class="nav-link">
  内存泄漏
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/前端异常捕获.html" class="nav-link">
  前端异常捕获
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/自动化部署.html" class="nav-link">
  自动化部署
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/疑难杂症.html" class="nav-link">
  问题小计
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="利其器" class="dropdown-title"><span class="title">利其器</span> <span class="arrow down"></span></button> <button type="button" aria-label="利其器" class="mobile-dropdown-title"><span class="title">利其器</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/利其器/Mac.html" class="nav-link">
  Mac
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/利其器/Github.html" class="nav-link">
  Github
</a></li></ul></div></div><div class="nav-item"><a href="/lanjz/Im/" class="nav-link">
  关于我
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/lanjz/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端基础" class="dropdown-title"><span class="title">前端基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端基础" class="mobile-dropdown-title"><span class="title">前端基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/JavaScript/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/ES6/" class="nav-link">
  ES6
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/HTML5/" class="nav-link">
  HTML5
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/CSS/" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Browser/" class="nav-link">
  Browser
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="网络&amp;算法" class="dropdown-title"><span class="title">网络&amp;算法</span> <span class="arrow down"></span></button> <button type="button" aria-label="网络&amp;算法" class="mobile-dropdown-title"><span class="title">网络&amp;算法</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/network/" class="nav-link">
  网络
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Algorithm/" class="nav-link">
  算法
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/secure/" class="nav-link">
  Web安全
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架" class="dropdown-title"><span class="title">框架</span> <span class="arrow down"></span></button> <button type="button" aria-label="框架" class="mobile-dropdown-title"><span class="title">框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/Vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Vue3/" class="nav-link">
  Vue3
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/React/" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/qiankun/" class="nav-link">
  qiankun
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/NA/" class="nav-link">
  跨平台
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Node" class="dropdown-title"><span class="title">Node</span> <span class="arrow down"></span></button> <button type="button" aria-label="Node" class="mobile-dropdown-title"><span class="title">Node</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/Node/基础/" class="nav-link">
  基础
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Node/Api/" class="nav-link">
  API
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Node/Package/" class="nav-link">
  yarn&amp;npm
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Node/Webpack/" class="nav-link">
  Webpack
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Node/Vite/" class="nav-link">
  Vite
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工程化" class="dropdown-title"><span class="title">工程化</span> <span class="arrow down"></span></button> <button type="button" aria-label="工程化" class="mobile-dropdown-title"><span class="title">工程化</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/工程化/前端优化总结/" class="nav-link">
  前端优化总结
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/系统设计/" class="nav-link">
  系统设计
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/预加载&amp;预解析.html" class="nav-link">
  预加载&amp;预解析
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/重构改善既有代码的设计.html" class="nav-link">
  重构代码原则
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/开发与调试技巧.html" class="nav-link">
  开发与调试
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/组件设计的基本原则.html" class="nav-link">
  组件设计
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/公共模块管理.html" class="nav-link">
  公共模块管理
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/内存泄漏.html" class="nav-link">
  内存泄漏
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/前端异常捕获.html" class="nav-link">
  前端异常捕获
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/自动化部署.html" class="nav-link">
  自动化部署
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/疑难杂症.html" class="nav-link">
  问题小计
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="利其器" class="dropdown-title"><span class="title">利其器</span> <span class="arrow down"></span></button> <button type="button" aria-label="利其器" class="mobile-dropdown-title"><span class="title">利其器</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/利其器/Mac.html" class="nav-link">
  Mac
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/利其器/Github.html" class="nav-link">
  Github
</a></li></ul></div></div><div class="nav-item"><a href="/lanjz/Im/" class="nav-link">
  关于我
</a></div> <!----></nav>  <!----> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="codeview"><a href="#codeview" class="header-anchor">#</a> CodeView</h1> <h3 id="代码"><a href="#代码" class="header-anchor">#</a> 代码</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token constant">PORTS</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'9780'</span><span class="token punctuation">,</span> <span class="token string">'9700'</span><span class="token punctuation">,</span> <span class="token string">'9750'</span><span class="token punctuation">,</span> <span class="token string">'9740'</span><span class="token punctuation">,</span> <span class="token string">'9741'</span><span class="token punctuation">]</span>
<span class="token keyword">const</span> <span class="token constant">PORTS_MAP_PREFIX</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token number">9780</span><span class="token operator">:</span> <span class="token string">'pos-user'</span><span class="token punctuation">,</span>
	<span class="token number">9700</span><span class="token operator">:</span> <span class="token string">'pos-main'</span><span class="token punctuation">,</span>
	<span class="token number">9750</span><span class="token operator">:</span> <span class="token string">'pos-price'</span><span class="token punctuation">,</span>
	<span class="token number">9740</span><span class="token operator">:</span> <span class="token string">'pos-order'</span><span class="token punctuation">,</span>
	<span class="token number">9741</span><span class="token operator">:</span> <span class="token string">'pos-site'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> serviceMapPorts <span class="token operator">=</span> <span class="token punctuation">{</span>
	feedback<span class="token operator">:</span> <span class="token constant">PORTS</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	car<span class="token operator">:</span> <span class="token constant">PORTS</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	friend<span class="token operator">:</span> <span class="token constant">PORTS</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	dict<span class="token operator">:</span> <span class="token constant">PORTS</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	fleetMember<span class="token operator">:</span> <span class="token constant">PORTS</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	fleet<span class="token operator">:</span> <span class="token constant">PORTS</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	fleetShare<span class="token operator">:</span> <span class="token constant">PORTS</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	target<span class="token operator">:</span> <span class="token constant">PORTS</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	address<span class="token operator">:</span> <span class="token constant">PORTS</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	driverScore<span class="token operator">:</span> <span class="token constant">PORTS</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	file<span class="token operator">:</span> <span class="token constant">PORTS</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	city<span class="token operator">:</span> <span class="token constant">PORTS</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	configCarType<span class="token operator">:</span> <span class="token constant">PORTS</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	popup<span class="token operator">:</span> <span class="token constant">PORTS</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	orderTrack<span class="token operator">:</span> <span class="token constant">PORTS</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	fees<span class="token operator">:</span> <span class="token constant">PORTS</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	order<span class="token operator">:</span> <span class="token constant">PORTS</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	orderShare<span class="token operator">:</span> <span class="token constant">PORTS</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	orderMidway<span class="token operator">:</span> <span class="token constant">PORTS</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	pay<span class="token operator">:</span> <span class="token constant">PORTS</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	driverScoreLog<span class="token operator">:</span> <span class="token constant">PORTS</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> baseUrl <span class="token operator">=</span> <span class="token punctuation">{</span>
	local<span class="token operator">:</span> <span class="token string">'http://10.129.35.47'</span><span class="token punctuation">,</span>
	dev<span class="token operator">:</span> <span class="token string">'https://pos-dev.huogigi.com/gateway'</span><span class="token punctuation">,</span>
	test<span class="token operator">:</span> <span class="token string">'https://pos-stg.huogigi.com/gateway'</span><span class="token punctuation">,</span>
	pro<span class="token operator">:</span> <span class="token string">'https://pos.huogigi.com/gateway'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> ocrUrl <span class="token operator">=</span> <span class="token punctuation">{</span>
	local<span class="token operator">:</span> <span class="token string">'http://172.30.192.61:8500/autotools/identify/api'</span><span class="token punctuation">,</span>
	dev<span class="token operator">:</span> <span class="token string">'https://ocr-dev.huolala.cn/autotools/identify/api'</span><span class="token punctuation">,</span>
	test<span class="token operator">:</span> <span class="token string">'https://ocr-stg.huolala.cn/autotools/identify/api'</span><span class="token punctuation">,</span>
	pro<span class="token operator">:</span> <span class="token string">'https://ocr.huolala.cn/autotools/identify/api'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>


<span class="token keyword">function</span> <span class="token function">getApiUrl</span><span class="token punctuation">(</span><span class="token parameter">url</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>url<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">'/idCard'</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">||</span> url<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">'/vehiclePlate'</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">||</span> url<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">'/vehicleLicense'</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">return</span> ocrUrl<span class="token punctuation">[</span><span class="token constant">ENV</span><span class="token punctuation">]</span>
		<span class="token comment">// return ocrUrl['local']</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">let</span> base <span class="token operator">=</span> url<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
	base <span class="token operator">=</span> base<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> base<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token keyword">const</span> port <span class="token operator">=</span> serviceMapPorts<span class="token punctuation">[</span>base<span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token constant">PORTS</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token constant">ENV</span> <span class="token operator">!==</span> <span class="token string">'local'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token comment">// #ifdef MP-WEIXIN</span>
		<span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>baseUrl<span class="token punctuation">[</span><span class="token constant">ENV</span><span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">PORTS_MAP_PREFIX</span><span class="token punctuation">[</span>port<span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
		<span class="token comment">// #endif</span>
		<span class="token comment">// #ifdef H5</span>
		<span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/gateway/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">PORTS_MAP_PREFIX</span><span class="token punctuation">[</span>port<span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
		<span class="token comment">// #endif</span>
	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> baseUrl<span class="token punctuation">[</span><span class="token constant">ENV</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">':'</span><span class="token operator">+</span> port
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>问题</strong></p> <ul><li>接口地址与最终域名的映射过程不够清晰</li></ul> <h3 id="代码-2"><a href="#代码-2" class="header-anchor">#</a> 代码</h3> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-show</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.showDetailMsg<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>(val,idx) in subMsgTotalData[item.id]<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>idx<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">display</span><span class="token punctuation">:</span>inline-block<span class="token punctuation">;</span> <span class="token property">color</span><span class="token punctuation">:</span> #606266<span class="token punctuation">;</span><span class="token property">padding</span><span class="token punctuation">:</span>3px<span class="token punctuation">;</span> 5px<span class="token punctuation">;</span></span><span class="token punctuation">&quot;</span></span></span> <span class="token attr-name">@click.prevent</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>handleNone<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>{{`${val.status2Str}`}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>{{`${val.status3Str}`}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>{{`${val.realName}`}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>{{`${val.comName}`}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">display</span><span class="token punctuation">:</span>inline-block<span class="token punctuation">;</span><span class="token property">color</span><span class="token punctuation">:</span>#007dff<span class="token punctuation">;</span></span><span class="token punctuation">&quot;</span></span></span> <span class="token attr-name">@click.prevent</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jumpToDetail(val)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>去查看<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="代码-3"><a href="#代码-3" class="header-anchor">#</a> 代码</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">'axios'</span>
<span class="token keyword">let</span> token <span class="token operator">=</span> sessionStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">'token'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> roleId <span class="token operator">=</span> sessionStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">'roleId'</span><span class="token punctuation">)</span>
<span class="token comment">// export</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">downFile</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">url<span class="token punctuation">,</span> params<span class="token punctuation">,</span> type<span class="token punctuation">,</span> downloadName</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    method<span class="token operator">:</span> <span class="token string">'post'</span><span class="token punctuation">,</span>
    url<span class="token punctuation">,</span>
    data<span class="token operator">:</span> params<span class="token punctuation">,</span>
    headers<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">'Content-Type'</span><span class="token operator">:</span> <span class="token string">'application/json'</span><span class="token punctuation">,</span>
      <span class="token string">'filename'</span><span class="token operator">:</span> <span class="token string">'utf-8'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    responseType<span class="token operator">:</span> <span class="token string">'arraybuffer'</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">response</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>response<span class="token punctuation">,</span> <span class="token string">'response'</span><span class="token punctuation">)</span>
    <span class="token keyword">var</span> blob <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Blob</span><span class="token punctuation">(</span><span class="token punctuation">[</span>response<span class="token punctuation">.</span>data<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=utf-8'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//application/vnd.openxmlformats-officedocument.spreadsheetml.sheet这里表示xlsx类型</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">===</span> <span class="token string">'zip'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      blob <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Blob</span><span class="token punctuation">(</span><span class="token punctuation">[</span>response<span class="token punctuation">.</span>data<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">'application/x-zip-compressed;charset=utf-8'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">===</span> <span class="token string">'pdf'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      blob <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Blob</span><span class="token punctuation">(</span><span class="token punctuation">[</span>response<span class="token punctuation">.</span>data<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">'application/pdf'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">var</span> downloadElement <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> href <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token constant">URL</span><span class="token punctuation">.</span><span class="token function">createObjectURL</span><span class="token punctuation">(</span>blob<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//创建下载的链接</span>
    downloadElement<span class="token punctuation">.</span>href <span class="token operator">=</span> href<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">===</span> <span class="token string">'pdf'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      downloadElement<span class="token punctuation">.</span>download <span class="token operator">=</span> <span class="token string">'金融进件'</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>type <span class="token operator">===</span> <span class="token string">'fileManage'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      downloadElement<span class="token punctuation">.</span>download <span class="token operator">=</span> <span class="token string">'档案信息列表导出'</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span> type <span class="token operator">===</span> <span class="token string">'transferList'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      downloadElement<span class="token punctuation">.</span>download <span class="token operator">=</span> <span class="token function">decodeURIComponent</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>headers<span class="token punctuation">[</span><span class="token string">'filename'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//下载后文件名</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span><span class="token punctuation">{</span>
      downloadElement<span class="token punctuation">.</span>download <span class="token operator">=</span> response<span class="token punctuation">.</span>headers<span class="token punctuation">[</span><span class="token string">'filename'</span><span class="token punctuation">]</span> <span class="token operator">||</span> downloadName<span class="token punctuation">;</span> <span class="token comment">//下载后文件名</span>
    <span class="token punctuation">}</span>
    document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>downloadElement<span class="token punctuation">)</span><span class="token punctuation">;</span>
    downloadElement<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//点击下载</span>
    document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>downloadElement<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//下载完成移除元素</span>
    window<span class="token punctuation">.</span><span class="token constant">URL</span><span class="token punctuation">.</span><span class="token function">revokeObjectURL</span><span class="token punctuation">(</span>href<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//释放掉blob对象</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">getLoadExcel</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">url<span class="token punctuation">,</span> params<span class="token punctuation">,</span> type</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    method<span class="token operator">:</span> <span class="token string">'get'</span><span class="token punctuation">,</span>
    url<span class="token punctuation">,</span>
    headers<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">'Content-Type'</span><span class="token operator">:</span> <span class="token string">'application/json'</span><span class="token punctuation">,</span>
      <span class="token comment">//</span>
      <span class="token string">'filename'</span><span class="token operator">:</span> <span class="token string">'utf-8'</span><span class="token punctuation">,</span>
      token<span class="token punctuation">,</span>
      roleId
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    params<span class="token punctuation">,</span>
    responseType<span class="token operator">:</span> <span class="token string">'arraybuffer'</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">response</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> blob <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Blob</span><span class="token punctuation">(</span><span class="token punctuation">[</span>response<span class="token punctuation">.</span>data<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=utf-8'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//application/vnd.openxmlformats-officedocument.spreadsheetml.sheet这里表示xlsx类型</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">===</span> <span class="token string">'zip'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      blob <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Blob</span><span class="token punctuation">(</span><span class="token punctuation">[</span>response<span class="token punctuation">.</span>data<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">'application/x-zip-compressed;charset=utf-8'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">var</span> downloadElement <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> href <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token constant">URL</span><span class="token punctuation">.</span><span class="token function">createObjectURL</span><span class="token punctuation">(</span>blob<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//创建下载的链接</span>
    downloadElement<span class="token punctuation">.</span>href <span class="token operator">=</span> href<span class="token punctuation">;</span>
    downloadElement<span class="token punctuation">.</span>download <span class="token operator">=</span> <span class="token string">'订单业务流耗时明细'</span><span class="token punctuation">;</span> <span class="token comment">// response.headers['filename']; //下载后文件名</span>
    document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>downloadElement<span class="token punctuation">)</span><span class="token punctuation">;</span>
    downloadElement<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//点击下载</span>
    document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>downloadElement<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//下载完成移除元素</span>
    window<span class="token punctuation">.</span><span class="token constant">URL</span><span class="token punctuation">.</span><span class="token function">revokeObjectURL</span><span class="token punctuation">(</span>href<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//释放掉blob对象</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>问题</strong></p> <ul><li>封装</li></ul> <div class="language- extra-class"><pre class="language-text"><code>┌─/utils
│------ downFile.js
│------ downFile-pdf.js
│------ downFileByGet.js
│------ downFileSpary.js
│------ downFileTraffic.js

</code></pre></div><h3 id="代码-4"><a href="#代码-4" class="header-anchor">#</a> 代码</h3> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token function">filterDataCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">'Today'</span><span class="token punctuation">,</span> volume<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> rentcarvolume<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> llpvolume<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> llp3volume<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> todayCount<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> GMVCount<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">'MTD'</span><span class="token punctuation">,</span> volume<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> rentcarvolume<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> llpvolume<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> llp3volume<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> todayCount<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> GMVCount<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">'Last M'</span><span class="token punctuation">,</span> volume<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> rentcarvolume<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> llpvolume<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> llp3volume<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> todayCount<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> GMVCount<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">'MOM'</span><span class="token punctuation">,</span> volume<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> rentcarvolume<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> llpvolume<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> llp3volume<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> todayCount<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> GMVCount<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span>
      <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> item <span class="token keyword">of</span> <span class="token keyword">this</span><span class="token punctuation">.</span>tableData<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">const</span> <span class="token punctuation">{</span>comname<span class="token punctuation">,</span> vdoing<span class="token punctuation">}</span> <span class="token operator">=</span> item
        <span class="token keyword">if</span><span class="token punctuation">(</span>comname <span class="token operator">===</span> <span class="token string">'合计'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
          <span class="token keyword">if</span><span class="token punctuation">(</span>vdoing <span class="token operator">===</span> <span class="token string">'Today'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>volume <span class="token operator">=</span> <span class="token operator">+</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>volume<span class="token operator">||</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// 卖车</span>
            data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>rentcarvolume <span class="token operator">=</span> <span class="token operator">+</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>rentcarvolume<span class="token operator">||</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// 租车</span>
            data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>llpvolume <span class="token operator">=</span> <span class="token operator">+</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>llpvolume<span class="token operator">||</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// LLP</span>
            data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>llp3volume <span class="token operator">=</span> <span class="token operator">+</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>llp3volume<span class="token operator">||</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// LLP3</span>
            data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>todayCount <span class="token operator">=</span> data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>volume <span class="token operator">+</span> data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>rentcarvolume <span class="token operator">+</span> data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>llpvolume <span class="token operator">+</span> data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>llp3volume <span class="token comment">// Total</span>
            data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>GMVCount <span class="token operator">=</span> <span class="token operator">+</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>volumesum<span class="token operator">||</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token operator">+</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>rentcarvolumesum<span class="token operator">||</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token operator">+</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>llpvolumesum<span class="token operator">||</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token operator">+</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>llp3volumesum<span class="token operator">||</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// GMV</span>
            data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>GMVCount <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">formatterCell</span><span class="token punctuation">(</span>data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>GMVCount<span class="token punctuation">,</span> <span class="token string">'wan'</span> <span class="token punctuation">)</span>
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>vdoing <span class="token operator">===</span> <span class="token string">'MTD'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            data<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>volume <span class="token operator">=</span> <span class="token operator">+</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>volume<span class="token operator">||</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// 卖车</span>
            data<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>rentcarvolume <span class="token operator">=</span> <span class="token operator">+</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>rentcarvolume<span class="token operator">||</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// 租车</span>
            data<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>llpvolume <span class="token operator">=</span> <span class="token operator">+</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>llpvolume<span class="token operator">||</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// LLP</span>
            data<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>llp3volume <span class="token operator">=</span> <span class="token operator">+</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>llp3volume<span class="token operator">||</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// LLP3</span>
            data<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>todayCount <span class="token operator">=</span> data<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>volume <span class="token operator">+</span> data<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>rentcarvolume <span class="token operator">+</span> data<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>llpvolume <span class="token operator">+</span> data<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>llp3volume <span class="token comment">// Total</span>
            data<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>GMVCountTem <span class="token operator">=</span> <span class="token operator">+</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>volumesum<span class="token operator">||</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token operator">+</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>rentcarvolumesum<span class="token operator">||</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token operator">+</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>llpvolumesum<span class="token operator">||</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token operator">+</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>llp3volumesum<span class="token operator">||</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// GMV</span>
            data<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>GMVCount <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">formatterCell</span><span class="token punctuation">(</span>data<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>GMVCountTem<span class="token punctuation">,</span> <span class="token string">'wan'</span> <span class="token punctuation">)</span>
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>vdoing <span class="token operator">===</span> <span class="token string">'Last M'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            data<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span>volume <span class="token operator">=</span> <span class="token operator">+</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>volume<span class="token operator">||</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// 卖车</span>
            data<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span>rentcarvolume <span class="token operator">=</span> <span class="token operator">+</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>rentcarvolume<span class="token operator">||</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// 租车</span>
            data<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span>llpvolume <span class="token operator">=</span> <span class="token operator">+</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>llpvolume<span class="token operator">||</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// LLP</span>
            data<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span>llp3volume <span class="token operator">=</span> <span class="token operator">+</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>llp3volume<span class="token operator">||</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// LLP3</span>
            data<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span>todayCount <span class="token operator">=</span> data<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span>volume <span class="token operator">+</span> data<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span>rentcarvolume <span class="token operator">+</span> data<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span>llpvolume <span class="token operator">+</span> data<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span>llp3volume <span class="token comment">// Total</span>
            data<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span>GMVCountTem <span class="token operator">=</span> <span class="token operator">+</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>volumesum<span class="token operator">||</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token operator">+</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>rentcarvolumesum<span class="token operator">||</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token operator">+</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>llpvolumesum<span class="token operator">||</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token operator">+</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>llp3volumesum<span class="token operator">||</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// GMV</span>
            data<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span>GMVCount <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">formatterCell</span><span class="token punctuation">(</span>data<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span>GMVCountTem<span class="token punctuation">,</span> <span class="token string">'wan'</span> <span class="token punctuation">)</span>
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>vdoing <span class="token operator">===</span> <span class="token string">'MOM'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            data<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span>volume <span class="token operator">=</span> item<span class="token punctuation">.</span>volume<span class="token comment">// 卖车</span>
            data<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span>rentcarvolume <span class="token operator">=</span> item<span class="token punctuation">.</span>rentcarvolume <span class="token comment">// 租车</span>
            data<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span>llpvolume <span class="token operator">=</span> item<span class="token punctuation">.</span>llpvolume <span class="token comment">// // LLP</span>
            data<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span>llp3volume <span class="token operator">=</span> item<span class="token punctuation">.</span>llp3volume <span class="token comment">// LLP3</span>
            data<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span>todayCount <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>data<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>todayCount<span class="token operator">-</span>data<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span>todayCount<span class="token punctuation">)</span><span class="token operator">/</span>data<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span>todayCount<span class="token operator">*</span><span class="token number">100</span><span class="token operator">|</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">'%'</span> <span class="token comment">// Total</span>
            data<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span>GMVCount <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>data<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>GMVCountTem<span class="token operator">-</span>data<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span>GMVCountTem<span class="token punctuation">)</span><span class="token operator">/</span>data<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span>GMVCountTem<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">100</span> <span class="token operator">+</span> <span class="token string">'%'</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>dataCount <span class="token operator">=</span> data
    <span class="token punctuation">}</span>
</code></pre></div><p><strong>问题</strong></p> <ul><li>利用逻辑的缺少注释</li></ul> <h3 id="问题"><a href="#问题" class="header-anchor">#</a> 问题</h3> <div class="language- extra-class"><pre class="language-text"><code>&lt;template&gt;
  &lt;div class=&quot;page-warp relative&quot; :class=&quot;{'page-warp-bg': !!reportSrc}&quot;&gt;
    &lt;canvas canvas-id=&quot;shareCanvas&quot; class=&quot;shareCanvas&quot; :style=&quot;{width: cWid, height: cHei}&quot; v-if=&quot;!reportSrc&quot;&gt;&lt;/canvas&gt;
    &lt;image :src=&quot;tempReport&quot; mode=&quot;widthFix&quot; class=&quot;report-img&quot; v-else&gt;&lt;/image&gt;
    &lt;view class=&quot;btn-layout&quot; v-if=&quot;reportSrc&quot;&gt;
      &lt;button class=&quot;share-button&quot; @click=&quot;btnShare&quot;&gt;&lt;/button&gt;
      &lt;view class=&quot;tips&quot;&gt;邀请您的好友一起加入啦啦快送大家庭吧！&lt;/view&gt;
    &lt;/view&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
  data () {
    return {
      QRUrl: '',
      show: false,
      cWid: 0,
      cHei: 0,
      bg: '',
      showAuthModal: false
    }
  }
  methods: {
    async drawShareImage () {
      uni.showLoading()
      let params = {
        f: 'q',
        c: APPTYPE(),
      }
      if(APPTYPE() === 'U'){
        params._f = 3
      }
      let scene = this.combineParamsFromMinxin(params, false)
      const fetchQR = this[ACTIONS.OWN_QR_POST]({ // 获取小程序二维码
        page: `subtree/pages/common/shareInDriver/index`,
        scene
      })
      const fetchShareConfig = this[ACTIONS.SHARE_CONFIG_GET]() // 获取分享背景图片
      const [res, res2] = await Promise.all([fetchQR, fetchShareConfig])
      this.bg = this.shareConfig.driverPic
      if(res.err &amp;&amp; !res.err.code){ // 二维码获取失败
        let base = uni.arrayBufferToBase64(res.data) // buffer转base64
        const { data:temPath } = await saveBase64ToTemPath(base, 'shareFriendQR.png') // 生在临时路径
        this.QRUrl = temPath
      }
    },
  },
}
&lt;/script&gt;
</code></pre></div><p><strong>问题</strong></p> <ul><li>多余的 <code>data</code> 属性</li></ul> <h3 id="代码-5"><a href="#代码-5" class="header-anchor">#</a> 代码</h3> <div class="language-html extra-class"><pre class="language-html"><code>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>page-padding<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>info<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{<span class="token punctuation">'</span>page-middle<span class="token punctuation">'</span>: openShare}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>canvas</span> <span class="token attr-name">canvas-id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>canvas<span class="token punctuation">&quot;</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">height</span><span class="token punctuation">:</span> 880rpx<span class="token punctuation">;</span><span class="token property">width</span><span class="token punctuation">:</span> 100%</span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>canvas</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!--   &lt;view class=&quot;qr-page&quot;&gt;
     &lt;view class=&quot;customer-des flex align-center&quot;&gt;
       &lt;view class=&quot;customer-avatar&quot;&gt;
         &lt;image class=&quot;avatar-img&quot; mode=&quot;scaleToFill&quot; :src=&quot;info.portrait&quot;/&gt;
       &lt;/view&gt;
       &lt;view class=&quot;customer-info&quot;&gt;
         &lt;view class=&quot;name flex align-center&quot;&gt;
           {{info.name}}
         &lt;/view&gt;
         &lt;view class=&quot;txt&quot;&gt;
           &lt;text&gt;{{info.manifesto}}&lt;/text&gt;
         &lt;/view&gt;
       &lt;/view&gt;
     &lt;/view&gt;
     &lt;view class=&quot;qr-box&quot;&gt;
       &lt;template&gt;
         &lt;view class=&quot;qr-img-box&quot;&gt;
           &lt;image class=&quot;qr-img&quot; mode=&quot;scaleToFill&quot; :src=&quot;QRUrl&quot; v-if=&quot;QRUrl&quot;/&gt;
         &lt;/view&gt;
         &lt;view class=&quot;txt&quot; v-if=&quot;QRUrl&quot;&gt;
           扫一扫上面的二维码图案，加入我的车队
         &lt;/view&gt;
       &lt;/template&gt;
     &lt;/view&gt;
   &lt;/view&gt;--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>action-layout<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>!pageFrom<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>action-1 btnpx relative<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@tap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>saveImageToPhotosAlbum<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        保存到手机
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>globalBurying</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>saveTeamQR<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>action-2 motorcade_card_click<span class="token punctuation">&quot;</span></span> <span class="token attr-name">open-type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>share<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>分享给微信好友<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>page-full-btn-layout<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-else</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>authBtn</span> <span class="token attr-name">phone</span> <span class="token attr-name">info</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>page-full-btn<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@tap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>joinTeam<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>加入车队<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>authBtn</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>u-modal</span>
        <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>showAuthModal<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>您未授权保存到相册权限，无法保存车队二维码<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span> <span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">show-cancel-button</span>
        <span class="token attr-name">confirm-color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#FF681D<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">confirm-text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>前往授权<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">:content-style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{padding: <span class="token punctuation">'</span>80rpx 40rpx 90rpx 40rpx<span class="token punctuation">'</span>, fontSize: <span class="token punctuation">'</span>36rpx<span class="token punctuation">'</span>, color: <span class="token punctuation">'</span>#171B25<span class="token punctuation">'</span>}<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">@confirm</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>confirmModal<span class="token punctuation">&quot;</span></span>
    <span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>u-modal</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>问题</strong></p> <ul><li>无用代码</li></ul> <h3 id="代码-6"><a href="#代码-6" class="header-anchor">#</a> 代码</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      pageButtons<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      tableData<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      searchForm<span class="token operator">:</span> <span class="token punctuation">{</span>
        businessType<span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span>
        mobile<span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span>
        name<span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span>
        orderSn<span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span>
        status<span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span>
        sn<span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span>
        date<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      pageNum<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
      pageSize<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
      total<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
      curComId<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>loginData<span class="token punctuation">.</span>optComId<span class="token punctuation">,</span> <span class="token comment">// 当前用户所在城市</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  computed<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">companyOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>companyData
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
    computed<span class="token operator">:</span><span class="token punctuation">{</span>
      <span class="token operator">...</span><span class="token function">mapState</span><span class="token punctuation">(</span><span class="token string">'team'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'teamsInfo'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token operator">...</span><span class="token function">mapState</span><span class="token punctuation">(</span><span class="token string">'userinfo'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'userinfo'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token comment">// 小程序事件上报使用</span>
      <span class="token function">curUserId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>userinfo<span class="token punctuation">.</span>userId <span class="token operator">||</span> <span class="token string">''</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
		methods<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token operator">...</span><span class="token function">mapActions</span><span class="token punctuation">(</span><span class="token string">'own'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
        <span class="token constant">ACTIONS</span><span class="token punctuation">.</span><span class="token constant">OWN_QR_POST</span>
      <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token operator">...</span><span class="token function">mapActions</span><span class="token punctuation">(</span><span class="token string">'team'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
        <span class="token constant">ACTIONS</span><span class="token punctuation">.</span><span class="token constant">TEAM_INFO_GET</span><span class="token punctuation">,</span>
        <span class="token constant">ACTIONS</span><span class="token punctuation">.</span><span class="token constant">TEAM_MEMBER_POST</span><span class="token punctuation">,</span>
        <span class="token constant">ACTIONS</span><span class="token punctuation">.</span><span class="token constant">TEAM_INFO_SHARE_GET</span>
      <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>


</code></pre></div><h3 id="代码-7"><a href="#代码-7" class="header-anchor">#</a> 代码</h3> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token function">saveOperation</span><span class="token punctuation">(</span><span class="token parameter">callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 非东莞、上海、佛山城市，车牌字段置空</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>showData<span class="token punctuation">.</span>comId <span class="token operator">!=</span> <span class="token number">10003</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>showData<span class="token punctuation">.</span>comId <span class="token operator">!=</span> <span class="token number">10004</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>showData<span class="token punctuation">.</span>comId <span class="token operator">!=</span> <span class="token number">10007</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>showData<span class="token punctuation">.</span>licenseLocation <span class="token operator">=</span> <span class="token keyword">null</span>
      <span class="token punctuation">}</span>
      <span class="token comment">// 临时处理 提车小计为负 验证提示</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>showData<span class="token punctuation">.</span>sumAmount <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'提车小计不能为负！'</span><span class="token punctuation">)</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>operationId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>showData<span class="token punctuation">.</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token parameter">valid</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>valid<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>showData<span class="token punctuation">.</span>type <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">this</span><span class="token punctuation">.</span>showData<span class="token punctuation">.</span>lastPayment <span class="token operator">=</span> <span class="token number">0</span>
            orderApi<span class="token punctuation">.</span><span class="token function">order</span><span class="token punctuation">(</span><span class="token string">'edit'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>showData<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
              <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">+</span>res<span class="token punctuation">.</span>code <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>callback<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                  <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                  <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>editSmallHllPopupBoxs<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                  <span class="token keyword">this</span><span class="token punctuation">.</span>$message<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token string">'订单编辑成功！'</span><span class="token punctuation">)</span>
                  <span class="token keyword">this</span><span class="token punctuation">.</span>editVisible <span class="token operator">=</span> <span class="token boolean">false</span>
                <span class="token punctuation">}</span>
              <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>$message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>msg<span class="token punctuation">)</span>
              <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>showData<span class="token punctuation">.</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token parameter">valid</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>valid<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">saveOrder</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>showData<span class="token punctuation">)</span>
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>$message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'请完善'</span><span class="token punctuation">)</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 查询订单</span>
    <span class="token function">queryOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      orderApi<span class="token punctuation">.</span><span class="token function">order</span><span class="token punctuation">(</span><span class="token string">'info'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        id<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>operationId
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">+</span>res<span class="token punctuation">.</span>code <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">let</span> datas <span class="token operator">=</span> res<span class="token punctuation">.</span>data
          <span class="token keyword">this</span><span class="token punctuation">.</span>showData <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> datas<span class="token punctuation">)</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>showData<span class="token punctuation">.</span>memberType <span class="token operator">=</span> <span class="token number">3</span> <span class="token comment">// 锁死 超级会员</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>baseMessageBox<span class="token punctuation">.</span><span class="token function">getTableData</span><span class="token punctuation">(</span><span class="token string">'edit'</span><span class="token punctuation">,</span> datas<span class="token punctuation">.</span>comId<span class="token punctuation">)</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>financingMessageBox<span class="token punctuation">.</span><span class="token function">selectBrandTrigger</span><span class="token punctuation">(</span>datas<span class="token punctuation">.</span>vehicleBrandId<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>financingMessageBox<span class="token punctuation">.</span><span class="token function">selectModelTrigger</span><span class="token punctuation">(</span>datas<span class="token punctuation">.</span>vehicleModelId<span class="token punctuation">)</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>$message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>msg<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 保存订单</span>
    <span class="token function">saveOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>loading <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
      orderApi<span class="token punctuation">.</span><span class="token function">order</span><span class="token punctuation">(</span><span class="token string">'add'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>showData<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">+</span>res<span class="token punctuation">.</span>code <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>editSmallHllPopupBoxs<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>$message<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token string">'订单添加成功！'</span><span class="token punctuation">)</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'update'</span><span class="token punctuation">)</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>loading <span class="token operator">=</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>$message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>msg<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/lanjz/assets/js/app.84d7d4c1.js" defer></script><script src="/lanjz/assets/js/2.6c8e4dcc.js" defer></script><script src="/lanjz/assets/js/184.13b2dd65.js" defer></script>
  </body>
</html>
