<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Vuex | Hello Wold</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="Just playing around">
    
    <link rel="preload" href="/lanjz/assets/css/0.styles.5dda244b.css" as="style"><link rel="preload" href="/lanjz/assets/js/app.30f34e3e.js" as="script"><link rel="preload" href="/lanjz/assets/js/2.9609252a.js" as="script"><link rel="preload" href="/lanjz/assets/js/164.794e8ba6.js" as="script"><link rel="prefetch" href="/lanjz/assets/js/10.e40d680a.js"><link rel="prefetch" href="/lanjz/assets/js/100.808bbd34.js"><link rel="prefetch" href="/lanjz/assets/js/101.a954ef01.js"><link rel="prefetch" href="/lanjz/assets/js/102.4693f69d.js"><link rel="prefetch" href="/lanjz/assets/js/103.9ebaeab7.js"><link rel="prefetch" href="/lanjz/assets/js/104.04fb9e80.js"><link rel="prefetch" href="/lanjz/assets/js/105.496e30de.js"><link rel="prefetch" href="/lanjz/assets/js/106.dd0c2312.js"><link rel="prefetch" href="/lanjz/assets/js/107.8316bd1a.js"><link rel="prefetch" href="/lanjz/assets/js/108.87757645.js"><link rel="prefetch" href="/lanjz/assets/js/109.8cec99e8.js"><link rel="prefetch" href="/lanjz/assets/js/11.b140014a.js"><link rel="prefetch" href="/lanjz/assets/js/110.02f90f7f.js"><link rel="prefetch" href="/lanjz/assets/js/111.18fd9d8e.js"><link rel="prefetch" href="/lanjz/assets/js/112.6e0f15d2.js"><link rel="prefetch" href="/lanjz/assets/js/113.d26906c1.js"><link rel="prefetch" href="/lanjz/assets/js/114.5369a3a8.js"><link rel="prefetch" href="/lanjz/assets/js/115.2e411f4f.js"><link rel="prefetch" href="/lanjz/assets/js/116.823bfc00.js"><link rel="prefetch" href="/lanjz/assets/js/117.25cf6a50.js"><link rel="prefetch" href="/lanjz/assets/js/118.5d1ceeb6.js"><link rel="prefetch" href="/lanjz/assets/js/119.0b6edeeb.js"><link rel="prefetch" href="/lanjz/assets/js/12.56945351.js"><link rel="prefetch" href="/lanjz/assets/js/120.2d7d4ef9.js"><link rel="prefetch" href="/lanjz/assets/js/121.b77f3b5c.js"><link rel="prefetch" href="/lanjz/assets/js/122.57ce443b.js"><link rel="prefetch" href="/lanjz/assets/js/123.afcbf8c3.js"><link rel="prefetch" href="/lanjz/assets/js/124.b9ccbbea.js"><link rel="prefetch" href="/lanjz/assets/js/125.42722df3.js"><link rel="prefetch" href="/lanjz/assets/js/126.14eb52a7.js"><link rel="prefetch" href="/lanjz/assets/js/127.5ab5aefd.js"><link rel="prefetch" href="/lanjz/assets/js/128.2c77b65d.js"><link rel="prefetch" href="/lanjz/assets/js/129.cce051a2.js"><link rel="prefetch" href="/lanjz/assets/js/13.1dbf92aa.js"><link rel="prefetch" href="/lanjz/assets/js/130.a224bbc7.js"><link rel="prefetch" href="/lanjz/assets/js/131.966b7895.js"><link rel="prefetch" href="/lanjz/assets/js/132.c102332a.js"><link rel="prefetch" href="/lanjz/assets/js/133.c877cb33.js"><link rel="prefetch" href="/lanjz/assets/js/134.c8a93c4b.js"><link rel="prefetch" href="/lanjz/assets/js/135.361f2a71.js"><link rel="prefetch" href="/lanjz/assets/js/136.ae19e08e.js"><link rel="prefetch" href="/lanjz/assets/js/137.fb793236.js"><link rel="prefetch" href="/lanjz/assets/js/138.ed103989.js"><link rel="prefetch" href="/lanjz/assets/js/139.2ca8bfd4.js"><link rel="prefetch" href="/lanjz/assets/js/14.bdd7b587.js"><link rel="prefetch" href="/lanjz/assets/js/140.98be06a7.js"><link rel="prefetch" href="/lanjz/assets/js/141.f79615cc.js"><link rel="prefetch" href="/lanjz/assets/js/142.10ccca5b.js"><link rel="prefetch" href="/lanjz/assets/js/143.c073de72.js"><link rel="prefetch" href="/lanjz/assets/js/144.78aefc97.js"><link rel="prefetch" href="/lanjz/assets/js/145.2d5ba8ef.js"><link rel="prefetch" href="/lanjz/assets/js/146.3d359669.js"><link rel="prefetch" href="/lanjz/assets/js/147.856dc7a7.js"><link rel="prefetch" href="/lanjz/assets/js/148.6ee4febf.js"><link rel="prefetch" href="/lanjz/assets/js/149.8e60412e.js"><link rel="prefetch" href="/lanjz/assets/js/15.07486be0.js"><link rel="prefetch" href="/lanjz/assets/js/150.1ac411c3.js"><link rel="prefetch" href="/lanjz/assets/js/151.594f4a44.js"><link rel="prefetch" href="/lanjz/assets/js/152.05f644b7.js"><link rel="prefetch" href="/lanjz/assets/js/153.76522787.js"><link rel="prefetch" href="/lanjz/assets/js/154.1fb594a4.js"><link rel="prefetch" href="/lanjz/assets/js/155.c0a7a216.js"><link rel="prefetch" href="/lanjz/assets/js/156.ea0b59a6.js"><link rel="prefetch" href="/lanjz/assets/js/157.724722ae.js"><link rel="prefetch" href="/lanjz/assets/js/158.2d2e23e7.js"><link rel="prefetch" href="/lanjz/assets/js/159.042ea86b.js"><link rel="prefetch" href="/lanjz/assets/js/16.d0c3406c.js"><link rel="prefetch" href="/lanjz/assets/js/160.d216e857.js"><link rel="prefetch" href="/lanjz/assets/js/161.5485d67e.js"><link rel="prefetch" href="/lanjz/assets/js/162.78cc6e03.js"><link rel="prefetch" href="/lanjz/assets/js/163.84f73989.js"><link rel="prefetch" href="/lanjz/assets/js/165.457d9763.js"><link rel="prefetch" href="/lanjz/assets/js/166.d6fca596.js"><link rel="prefetch" href="/lanjz/assets/js/167.07ff4dd1.js"><link rel="prefetch" href="/lanjz/assets/js/168.4eda7539.js"><link rel="prefetch" href="/lanjz/assets/js/169.09129980.js"><link rel="prefetch" href="/lanjz/assets/js/17.2e68f2a5.js"><link rel="prefetch" href="/lanjz/assets/js/170.a3eb855d.js"><link rel="prefetch" href="/lanjz/assets/js/171.f9a297b6.js"><link rel="prefetch" href="/lanjz/assets/js/172.bad18571.js"><link rel="prefetch" href="/lanjz/assets/js/173.15191e4c.js"><link rel="prefetch" href="/lanjz/assets/js/174.ad375cae.js"><link rel="prefetch" href="/lanjz/assets/js/175.65cf77d0.js"><link rel="prefetch" href="/lanjz/assets/js/176.67799144.js"><link rel="prefetch" href="/lanjz/assets/js/177.f61aeecf.js"><link rel="prefetch" href="/lanjz/assets/js/178.4336ced0.js"><link rel="prefetch" href="/lanjz/assets/js/179.5f9e7168.js"><link rel="prefetch" href="/lanjz/assets/js/18.b9471650.js"><link rel="prefetch" href="/lanjz/assets/js/180.9b3ac17b.js"><link rel="prefetch" href="/lanjz/assets/js/181.4ca7e0f0.js"><link rel="prefetch" href="/lanjz/assets/js/182.1c59ad01.js"><link rel="prefetch" href="/lanjz/assets/js/183.1fc0388c.js"><link rel="prefetch" href="/lanjz/assets/js/184.109f12f3.js"><link rel="prefetch" href="/lanjz/assets/js/185.543359f8.js"><link rel="prefetch" href="/lanjz/assets/js/186.80394c80.js"><link rel="prefetch" href="/lanjz/assets/js/187.bf15747d.js"><link rel="prefetch" href="/lanjz/assets/js/188.89ee4dd5.js"><link rel="prefetch" href="/lanjz/assets/js/189.8fb8dc61.js"><link rel="prefetch" href="/lanjz/assets/js/19.4afb243f.js"><link rel="prefetch" href="/lanjz/assets/js/190.e2bf5517.js"><link rel="prefetch" href="/lanjz/assets/js/191.816a3010.js"><link rel="prefetch" href="/lanjz/assets/js/192.e6f8b01d.js"><link rel="prefetch" href="/lanjz/assets/js/193.8545e1be.js"><link rel="prefetch" href="/lanjz/assets/js/194.c2908ce4.js"><link rel="prefetch" href="/lanjz/assets/js/195.2dcd9264.js"><link rel="prefetch" href="/lanjz/assets/js/196.6189fec2.js"><link rel="prefetch" href="/lanjz/assets/js/197.d3ce6368.js"><link rel="prefetch" href="/lanjz/assets/js/198.43f3d650.js"><link rel="prefetch" href="/lanjz/assets/js/199.5cc4037b.js"><link rel="prefetch" href="/lanjz/assets/js/20.ff12106d.js"><link rel="prefetch" href="/lanjz/assets/js/200.eb465b6c.js"><link rel="prefetch" href="/lanjz/assets/js/201.e4fc46e5.js"><link rel="prefetch" href="/lanjz/assets/js/202.3307d833.js"><link rel="prefetch" href="/lanjz/assets/js/203.7bc2aa19.js"><link rel="prefetch" href="/lanjz/assets/js/204.2e6f04ac.js"><link rel="prefetch" href="/lanjz/assets/js/205.e11cbd63.js"><link rel="prefetch" href="/lanjz/assets/js/206.b795bf13.js"><link rel="prefetch" href="/lanjz/assets/js/207.9a7b9a03.js"><link rel="prefetch" href="/lanjz/assets/js/208.de1740ad.js"><link rel="prefetch" href="/lanjz/assets/js/209.2803bb79.js"><link rel="prefetch" href="/lanjz/assets/js/21.1217a9c2.js"><link rel="prefetch" href="/lanjz/assets/js/210.396107ae.js"><link rel="prefetch" href="/lanjz/assets/js/211.a794d3e8.js"><link rel="prefetch" href="/lanjz/assets/js/212.1b2929c0.js"><link rel="prefetch" href="/lanjz/assets/js/213.3b476d9d.js"><link rel="prefetch" href="/lanjz/assets/js/214.377756e3.js"><link rel="prefetch" href="/lanjz/assets/js/215.d8ae10bf.js"><link rel="prefetch" href="/lanjz/assets/js/216.c83c9779.js"><link rel="prefetch" href="/lanjz/assets/js/22.a89bc4b2.js"><link rel="prefetch" href="/lanjz/assets/js/23.6f47bab6.js"><link rel="prefetch" href="/lanjz/assets/js/24.776bb6cf.js"><link rel="prefetch" href="/lanjz/assets/js/25.9075f2c2.js"><link rel="prefetch" href="/lanjz/assets/js/26.c14a3d2d.js"><link rel="prefetch" href="/lanjz/assets/js/27.7095b799.js"><link rel="prefetch" href="/lanjz/assets/js/28.3a14239c.js"><link rel="prefetch" href="/lanjz/assets/js/29.d976f4ce.js"><link rel="prefetch" href="/lanjz/assets/js/3.fce88964.js"><link rel="prefetch" href="/lanjz/assets/js/30.93f3c4a7.js"><link rel="prefetch" href="/lanjz/assets/js/31.a1073a13.js"><link rel="prefetch" href="/lanjz/assets/js/32.cec04c76.js"><link rel="prefetch" href="/lanjz/assets/js/33.0232da82.js"><link rel="prefetch" href="/lanjz/assets/js/34.128704d9.js"><link rel="prefetch" href="/lanjz/assets/js/35.a17c0137.js"><link rel="prefetch" href="/lanjz/assets/js/36.6ca844ee.js"><link rel="prefetch" href="/lanjz/assets/js/37.ca25b3f1.js"><link rel="prefetch" href="/lanjz/assets/js/38.48ec0d89.js"><link rel="prefetch" href="/lanjz/assets/js/39.41743fef.js"><link rel="prefetch" href="/lanjz/assets/js/4.a5c77f50.js"><link rel="prefetch" href="/lanjz/assets/js/40.0f436bed.js"><link rel="prefetch" href="/lanjz/assets/js/41.30b85d86.js"><link rel="prefetch" href="/lanjz/assets/js/42.402e5bc9.js"><link rel="prefetch" href="/lanjz/assets/js/43.3f3e3e8b.js"><link rel="prefetch" href="/lanjz/assets/js/44.47b849d4.js"><link rel="prefetch" href="/lanjz/assets/js/45.3507a9d8.js"><link rel="prefetch" href="/lanjz/assets/js/46.11323116.js"><link rel="prefetch" href="/lanjz/assets/js/47.bf2bc85c.js"><link rel="prefetch" href="/lanjz/assets/js/48.bb0a3b09.js"><link rel="prefetch" href="/lanjz/assets/js/49.eab77541.js"><link rel="prefetch" href="/lanjz/assets/js/5.5cc7368c.js"><link rel="prefetch" href="/lanjz/assets/js/50.e8952a78.js"><link rel="prefetch" href="/lanjz/assets/js/51.76332ce5.js"><link rel="prefetch" href="/lanjz/assets/js/52.4a85bde9.js"><link rel="prefetch" href="/lanjz/assets/js/53.7dc56ba7.js"><link rel="prefetch" href="/lanjz/assets/js/54.616b48ff.js"><link rel="prefetch" href="/lanjz/assets/js/55.3081d266.js"><link rel="prefetch" href="/lanjz/assets/js/56.840e5f4c.js"><link rel="prefetch" href="/lanjz/assets/js/57.142aa865.js"><link rel="prefetch" href="/lanjz/assets/js/58.37a54e75.js"><link rel="prefetch" href="/lanjz/assets/js/59.b160bf1f.js"><link rel="prefetch" href="/lanjz/assets/js/6.fa8c3a52.js"><link rel="prefetch" href="/lanjz/assets/js/60.2a1227c4.js"><link rel="prefetch" href="/lanjz/assets/js/61.b14ed3d6.js"><link rel="prefetch" href="/lanjz/assets/js/62.1360babd.js"><link rel="prefetch" href="/lanjz/assets/js/63.7ce13ef4.js"><link rel="prefetch" href="/lanjz/assets/js/64.75101d59.js"><link rel="prefetch" href="/lanjz/assets/js/65.69f4f7f8.js"><link rel="prefetch" href="/lanjz/assets/js/66.9d26340f.js"><link rel="prefetch" href="/lanjz/assets/js/67.933610df.js"><link rel="prefetch" href="/lanjz/assets/js/68.4d813413.js"><link rel="prefetch" href="/lanjz/assets/js/69.37fa33d7.js"><link rel="prefetch" href="/lanjz/assets/js/7.b54dbaed.js"><link rel="prefetch" href="/lanjz/assets/js/70.43c4e712.js"><link rel="prefetch" href="/lanjz/assets/js/71.1f2baed7.js"><link rel="prefetch" href="/lanjz/assets/js/72.bfbdfdc4.js"><link rel="prefetch" href="/lanjz/assets/js/73.4178ff4a.js"><link rel="prefetch" href="/lanjz/assets/js/74.c9f484bd.js"><link rel="prefetch" href="/lanjz/assets/js/75.10200774.js"><link rel="prefetch" href="/lanjz/assets/js/76.7bf3a0bd.js"><link rel="prefetch" href="/lanjz/assets/js/77.589134e7.js"><link rel="prefetch" href="/lanjz/assets/js/78.b3f34e90.js"><link rel="prefetch" href="/lanjz/assets/js/79.8475bd47.js"><link rel="prefetch" href="/lanjz/assets/js/8.c3511b42.js"><link rel="prefetch" href="/lanjz/assets/js/80.e15f5b75.js"><link rel="prefetch" href="/lanjz/assets/js/81.ed0300e9.js"><link rel="prefetch" href="/lanjz/assets/js/82.7a03474a.js"><link rel="prefetch" href="/lanjz/assets/js/83.d5bf580d.js"><link rel="prefetch" href="/lanjz/assets/js/84.9c1056a1.js"><link rel="prefetch" href="/lanjz/assets/js/85.cde0a344.js"><link rel="prefetch" href="/lanjz/assets/js/86.4a459d59.js"><link rel="prefetch" href="/lanjz/assets/js/87.af69874c.js"><link rel="prefetch" href="/lanjz/assets/js/88.df8cc1e7.js"><link rel="prefetch" href="/lanjz/assets/js/89.2c06583b.js"><link rel="prefetch" href="/lanjz/assets/js/9.bf169cbf.js"><link rel="prefetch" href="/lanjz/assets/js/90.179ea0c8.js"><link rel="prefetch" href="/lanjz/assets/js/91.60962729.js"><link rel="prefetch" href="/lanjz/assets/js/92.cdfafef6.js"><link rel="prefetch" href="/lanjz/assets/js/93.0c029d0b.js"><link rel="prefetch" href="/lanjz/assets/js/94.5e53beda.js"><link rel="prefetch" href="/lanjz/assets/js/95.0a029b66.js"><link rel="prefetch" href="/lanjz/assets/js/96.468e8eb8.js"><link rel="prefetch" href="/lanjz/assets/js/97.3d73afd9.js"><link rel="prefetch" href="/lanjz/assets/js/98.67d255f7.js"><link rel="prefetch" href="/lanjz/assets/js/99.196da4fd.js">
    <link rel="stylesheet" href="/lanjz/assets/css/0.styles.5dda244b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/lanjz/" class="home-link router-link-active"><!----> <span class="site-name">Hello Wold</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/lanjz/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端基础" class="dropdown-title"><span class="title">前端基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端基础" class="mobile-dropdown-title"><span class="title">前端基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/JavaScript/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/ES6/" class="nav-link">
  ES6
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/HTML5/" class="nav-link">
  HTML5
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/CSS/" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Browser/" class="nav-link">
  Browser
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="网络&amp;算法" class="dropdown-title"><span class="title">网络&amp;算法</span> <span class="arrow down"></span></button> <button type="button" aria-label="网络&amp;算法" class="mobile-dropdown-title"><span class="title">网络&amp;算法</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/network/" class="nav-link">
  网络
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Algorithm/" class="nav-link">
  算法
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/secure/" class="nav-link">
  Web安全
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架" class="dropdown-title"><span class="title">框架</span> <span class="arrow down"></span></button> <button type="button" aria-label="框架" class="mobile-dropdown-title"><span class="title">框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/Vue/" class="nav-link router-link-active">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Vue3/" class="nav-link">
  Vue3
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/React/" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/qiankun/" class="nav-link">
  qiankun
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/NA/" class="nav-link">
  跨平台
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Node" class="dropdown-title"><span class="title">Node</span> <span class="arrow down"></span></button> <button type="button" aria-label="Node" class="mobile-dropdown-title"><span class="title">Node</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/Node/基础/" class="nav-link">
  基础
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Node/Api/" class="nav-link">
  API
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Node/Package/" class="nav-link">
  yarn&amp;npm
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Node/Webpack/" class="nav-link">
  Webpack
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Node/Vite/" class="nav-link">
  Vite
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Node/ESBuild/" class="nav-link">
  esbuild
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Node/数据库/" class="nav-link">
  SQL
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工程化" class="dropdown-title"><span class="title">工程化</span> <span class="arrow down"></span></button> <button type="button" aria-label="工程化" class="mobile-dropdown-title"><span class="title">工程化</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/工程化/前端优化总结/" class="nav-link">
  前端优化总结
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/系统设计/" class="nav-link">
  系统设计
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/预加载&amp;预解析.html" class="nav-link">
  预加载&amp;预解析
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/重构改善既有代码的设计.html" class="nav-link">
  重构代码原则
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/开发与调试技巧.html" class="nav-link">
  开发与调试
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/组件设计的基本原则.html" class="nav-link">
  组件设计
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/公共模块管理.html" class="nav-link">
  公共模块管理
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/内存泄漏.html" class="nav-link">
  内存泄漏
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/前端异常捕获.html" class="nav-link">
  前端异常捕获
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/自动化部署.html" class="nav-link">
  自动化部署
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/疑难杂症.html" class="nav-link">
  问题小计
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/性能指标.html" class="nav-link">
  性能指标
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="利其器" class="dropdown-title"><span class="title">利其器</span> <span class="arrow down"></span></button> <button type="button" aria-label="利其器" class="mobile-dropdown-title"><span class="title">利其器</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/利其器/Mac.html" class="nav-link">
  Mac
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/利其器/Github.html" class="nav-link">
  Github
</a></li></ul></div></div><div class="nav-item"><a href="/lanjz/Im/" class="nav-link">
  关于我
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/lanjz/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端基础" class="dropdown-title"><span class="title">前端基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端基础" class="mobile-dropdown-title"><span class="title">前端基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/JavaScript/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/ES6/" class="nav-link">
  ES6
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/HTML5/" class="nav-link">
  HTML5
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/CSS/" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Browser/" class="nav-link">
  Browser
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="网络&amp;算法" class="dropdown-title"><span class="title">网络&amp;算法</span> <span class="arrow down"></span></button> <button type="button" aria-label="网络&amp;算法" class="mobile-dropdown-title"><span class="title">网络&amp;算法</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/network/" class="nav-link">
  网络
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Algorithm/" class="nav-link">
  算法
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/secure/" class="nav-link">
  Web安全
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架" class="dropdown-title"><span class="title">框架</span> <span class="arrow down"></span></button> <button type="button" aria-label="框架" class="mobile-dropdown-title"><span class="title">框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/Vue/" class="nav-link router-link-active">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Vue3/" class="nav-link">
  Vue3
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/React/" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/qiankun/" class="nav-link">
  qiankun
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/NA/" class="nav-link">
  跨平台
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Node" class="dropdown-title"><span class="title">Node</span> <span class="arrow down"></span></button> <button type="button" aria-label="Node" class="mobile-dropdown-title"><span class="title">Node</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/Node/基础/" class="nav-link">
  基础
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Node/Api/" class="nav-link">
  API
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Node/Package/" class="nav-link">
  yarn&amp;npm
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Node/Webpack/" class="nav-link">
  Webpack
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Node/Vite/" class="nav-link">
  Vite
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Node/ESBuild/" class="nav-link">
  esbuild
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Node/数据库/" class="nav-link">
  SQL
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工程化" class="dropdown-title"><span class="title">工程化</span> <span class="arrow down"></span></button> <button type="button" aria-label="工程化" class="mobile-dropdown-title"><span class="title">工程化</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/工程化/前端优化总结/" class="nav-link">
  前端优化总结
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/系统设计/" class="nav-link">
  系统设计
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/预加载&amp;预解析.html" class="nav-link">
  预加载&amp;预解析
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/重构改善既有代码的设计.html" class="nav-link">
  重构代码原则
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/开发与调试技巧.html" class="nav-link">
  开发与调试
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/组件设计的基本原则.html" class="nav-link">
  组件设计
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/公共模块管理.html" class="nav-link">
  公共模块管理
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/内存泄漏.html" class="nav-link">
  内存泄漏
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/前端异常捕获.html" class="nav-link">
  前端异常捕获
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/自动化部署.html" class="nav-link">
  自动化部署
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/疑难杂症.html" class="nav-link">
  问题小计
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/性能指标.html" class="nav-link">
  性能指标
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="利其器" class="dropdown-title"><span class="title">利其器</span> <span class="arrow down"></span></button> <button type="button" aria-label="利其器" class="mobile-dropdown-title"><span class="title">利其器</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/利其器/Mac.html" class="nav-link">
  Mac
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/利其器/Github.html" class="nav-link">
  Github
</a></li></ul></div></div><div class="nav-item"><a href="/lanjz/Im/" class="nav-link">
  关于我
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/lanjz/Vue/组件通信.html" class="sidebar-link">Vue 组件通信方式</a></li><li><a href="/lanjz/Vue/模板到DOM.html" class="sidebar-link">模板到真实DOM经历了什么？</a></li><li><a href="/lanjz/Vue/响应式原理.html" class="sidebar-link">响应式原理</a></li><li><a href="/lanjz/Vue/Watcher更新顺序.html" class="sidebar-link">Watcher更新顺序</a></li><li><a href="/lanjz/Vue/PatchNode.html" class="sidebar-link">组件更新机制(diff)</a></li><li><a href="/lanjz/Vue/Watch.html" class="sidebar-link">Watch</a></li><li><a href="/lanjz/Vue/Computed.html" class="sidebar-link">Computed</a></li><li><a href="/lanjz/Vue/v-model.html" class="sidebar-link">v-model</a></li><li><a href="/lanjz/Vue/$nextTick.html" class="sidebar-link">$nextTick</a></li><li><a href="/lanjz/Vue/$set.html" class="sidebar-link">$set</a></li><li><a href="/lanjz/Vue/数据代理.html" class="sidebar-link">数据代理</a></li><li><a href="/lanjz/Vue/VueRouter.html" class="sidebar-link">Vue-Router</a></li><li><a href="/lanjz/Vue/Vuex.html" aria-current="page" class="active sidebar-link">Vuex</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/lanjz/Vue/Vuex.html#vue-use-vuex" class="sidebar-link">Vue.use(vuex)</a></li><li class="sidebar-sub-header"><a href="/lanjz/Vue/Vuex.html#vuex的响应机制" class="sidebar-link">Vuex的响应机制</a></li><li class="sidebar-sub-header"><a href="/lanjz/Vue/Vuex.html#getter实现" class="sidebar-link">getter实现</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/lanjz/Vue/Vuex.html#创建-computed" class="sidebar-link">创建 computed</a></li></ul></li><li class="sidebar-sub-header"><a href="/lanjz/Vue/Vuex.html#q-a" class="sidebar-link">Q&amp;A</a></li></ul></li><li><a href="/lanjz/Vue/Extend.html" class="sidebar-link">Extend</a></li><li><a href="/lanjz/Vue/SSR.html" class="sidebar-link">VUE-SSR</a></li><li><a href="/lanjz/Vue/共享状态思想.html" class="sidebar-link">共享状态思想</a></li><li><a href="/lanjz/Vue/Paas应用.html" class="sidebar-link">PAAS应用</a></li><li><a href="/lanjz/Vue/吱不吱.html" class="sidebar-link">吱不吱</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="vuex"><a href="#vuex" class="header-anchor">#</a> Vuex</h1> <p>使用例子</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> Vuex <span class="token keyword">from</span> <span class="token string">'vuex'</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./app.js'</span>
Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Vuex<span class="token punctuation">)</span>
<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    state<span class="token operator">:</span> <span class="token punctuation">{</span>
        count<span class="token operator">:</span> <span class="token number">0</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    mutations<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token function">increment</span> <span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            state<span class="token punctuation">.</span>count<span class="token operator">++</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> root <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span>
root<span class="token punctuation">.</span>id <span class="token operator">=</span> <span class="token string">'app'</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span>
<span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    store<span class="token punctuation">,</span>
    <span class="token function-variable function">render</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token parameter">h</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> <span class="token function">h</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">$mount</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span>

</code></pre></div><h2 id="vue-use-vuex"><a href="#vue-use-vuex" class="header-anchor">#</a> Vue.use(vuex)</h2> <p><code>Vue.use(vuex)</code> 会执行 <code>vuex</code> 中的 <code>install</code> 方法，它的定义如下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">install</span> <span class="token punctuation">(</span><span class="token parameter">_Vue</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>Vue <span class="token operator">&amp;&amp;</span> _Vue <span class="token operator">===</span> Vue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">!==</span> <span class="token string">'production'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>
        <span class="token string">'[vuex] already installed. Vue.use(Vuex) should be called only once.'</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span>
  <span class="token punctuation">}</span>
  Vue <span class="token operator">=</span> _Vue<span class="token punctuation">;</span>
  <span class="token function">applyMixin</span><span class="token punctuation">(</span>Vue<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// applyMixin</span>
<span class="token keyword">function</span> <span class="token function">applyMixin</span> <span class="token punctuation">(</span><span class="token parameter">Vue</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> version <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span>Vue<span class="token punctuation">.</span>version<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>version <span class="token operator">&gt;=</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Vue<span class="token punctuation">.</span><span class="token function">mixin</span><span class="token punctuation">(</span><span class="token punctuation">{</span> beforeCreate<span class="token operator">:</span> vuexInit <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// vuexInit</span>
  <span class="token keyword">function</span> <span class="token function">vuexInit</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> options <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$options<span class="token punctuation">;</span>
    <span class="token comment">// store injection</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>options<span class="token punctuation">.</span>store<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$store <span class="token operator">=</span> <span class="token keyword">typeof</span> options<span class="token punctuation">.</span>store <span class="token operator">===</span> <span class="token string">'function'</span>
        <span class="token operator">?</span> options<span class="token punctuation">.</span><span class="token function">store</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token operator">:</span> options<span class="token punctuation">.</span>store<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>options<span class="token punctuation">.</span>parent <span class="token operator">&amp;&amp;</span> options<span class="token punctuation">.</span>parent<span class="token punctuation">.</span>$store<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$store <span class="token operator">=</span> options<span class="token punctuation">.</span>parent<span class="token punctuation">.</span>$store<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre></div><p>Vux 的 <code>install</code> 方法执行的就是 <code>applyMixin</code> 方法, <code>applyMixin</code> 方法的主要功能将初始化 Vue 实例时传入的 <code>store</code> 设置到 <code>this.$store</code> 属性上, 子组件则从其父组件引用 <code>$store</code> 属性, 层层嵌套进行设置. 这样,任何一个组件都能通过 <code>this.$store</code> 的方式访问 <code>store</code> 对象了</p> <p>单从这里会有疑问就是只在 <code>this</code> 上添加 <code>$store</code> 属性是不会有响应功能的，但是实现使用时修改 <code>state</code> 是可以触发视图更新，在哪做的了？</p> <h2 id="vuex的响应机制"><a href="#vuex的响应机制" class="header-anchor">#</a> Vuex的响应机制</h2> <p>在 <code>vuex.Store</code> 的构造方法中有以下代码：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 初始化 store 的响应机制（包括将 _wrappedGetters 初始为 compute）</span>
<span class="token function">resetStoreVM</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> state<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// resetStoreVM(this, state);</span>
<span class="token keyword">function</span> <span class="token function">resetStoreVM</span> <span class="token punctuation">(</span><span class="token parameter">store<span class="token punctuation">,</span> state<span class="token punctuation">,</span> hot</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> oldVm <span class="token operator">=</span> store<span class="token punctuation">.</span>_vm<span class="token punctuation">;</span>

  <span class="token comment">// bind store public getters</span>
  store<span class="token punctuation">.</span>getters <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token comment">// reset local getters cache</span>
  store<span class="token punctuation">.</span>_makeLocalGettersCache <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> wrappedGetters <span class="token operator">=</span> store<span class="token punctuation">.</span>_wrappedGetters<span class="token punctuation">;</span>
  <span class="token keyword">var</span> computed <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token function">forEachValue</span><span class="token punctuation">(</span>wrappedGetters<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> key</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// use computed to leverage its lazy-caching mechanism</span>
    <span class="token comment">// direct inline function use will lead to closure preserving oldVm.</span>
    <span class="token comment">// using partial to return function with only arguments preserved in closure environment.</span>
    computed<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">partial</span><span class="token punctuation">(</span>fn<span class="token punctuation">,</span> store<span class="token punctuation">)</span><span class="token punctuation">;</span>
    Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>store<span class="token punctuation">.</span>getters<span class="token punctuation">,</span> key<span class="token punctuation">,</span> <span class="token punctuation">{</span>
      <span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> store<span class="token punctuation">.</span>_vm<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      enumerable<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token comment">// for local getters</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// use a Vue instance to store the state tree</span>
  <span class="token comment">// suppress warnings just in case the user has added</span>
  <span class="token comment">// some funky global mixins</span>
  <span class="token keyword">var</span> silent <span class="token operator">=</span> Vue<span class="token punctuation">.</span>config<span class="token punctuation">.</span>silent<span class="token punctuation">;</span>
  Vue<span class="token punctuation">.</span>config<span class="token punctuation">.</span>silent <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  store<span class="token punctuation">.</span>_vm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    data<span class="token operator">:</span> <span class="token punctuation">{</span>
      $$state<span class="token operator">:</span> state
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    computed<span class="token operator">:</span> computed
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  Vue<span class="token punctuation">.</span>config<span class="token punctuation">.</span>silent <span class="token operator">=</span> silent<span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre></div><p>上面代码通过实例化一个新 <code>Vue</code> 实例，给 <code>$$state</code> 和 <code>computed</code> 添加响应机制，看到这里还是不明白这里 <code>new Vue</code> 添加的响应跟启动项目的 <code>new Vue</code> 有啥关系？</p> <p>下面通过一个例子理解一下：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>{{arr}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>{{$$obj}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>  <span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>a<span class="token operator">:</span> <span class="token string">'l'</span><span class="token punctuation">}</span>
  <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    data<span class="token operator">:</span> <span class="token punctuation">{</span>
      $obj<span class="token operator">:</span> obj
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">var</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    el<span class="token operator">:</span> <span class="token string">'#app'</span><span class="token punctuation">,</span>
    data<span class="token operator">:</span> <span class="token punctuation">{</span>
      arr<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    obj<span class="token punctuation">,</span>
    <span class="token function">beforeCreate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$$obj <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$options<span class="token punctuation">.</span>obj
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>上面例子中启动项目的 <code>Vue</code> 没有直接在 <code>data</code> 中定义 <code>$$obj</code> 属性，<code>$$obj</code> 属性是在 <code>beforeCreate</code> 钩子函数赋值的，取至 <code>$options</code> 上属性 <code>obj</code>，<code>$options.obj</code> 是在 <code>new Vue</code> 中传入的，且这个 <code>obj</code> 属性也在另一个 <code>new Vue</code> 中使用且是使用在 <code>data.$obj</code> 属性上，也在就说这个 <code>$obj</code> 属性在这个 <code>Vue</code> 中是响应式的。也因此在应用中访问<code>$$obj</code> 时，全局的 <code>Watcher</code> 将会被另一个 Vue 中的 <code>$obj</code> 属性收集</p> <p>不得不说这波操作有点骚～</p> <h2 id="getter实现"><a href="#getter实现" class="header-anchor">#</a> getter实现</h2> <p><strong><code>getters</code> 则是借助 Vue 的计算属性 <code>computed</code> 来实现的</strong></p> <p>先回顾一下 <code>getters</code> 的用法: <code>{ key: fn }</code></p> <p>然后先看这段代码逻辑：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> computed <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">forEachValue</span><span class="token punctuation">(</span>wrappedGetters<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> key</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// use computed to leverage its lazy-caching mechanism</span>
  <span class="token comment">// direct inline function use will lead to closure preserving oldVm.</span>
  <span class="token comment">// using partial to return function with only arguments preserved in closure environment.</span>
  computed<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">partial</span><span class="token punctuation">(</span>fn<span class="token punctuation">,</span> store<span class="token punctuation">)</span><span class="token punctuation">;</span>
  Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>store<span class="token punctuation">.</span>getters<span class="token punctuation">,</span> key<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> store<span class="token punctuation">.</span>_vm<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    enumerable<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token comment">// for local getters</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>上面的作用就是遍历 <code>wrappedGetters</code> 生成一个 <code>compunted</code> 的格式，先看下 <code>wrappedGetters</code> 怎么来的</p> <p>下面是跟 <code>wrappedGetters</code> 有关系的代码：</p> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token keyword">function</span> <span class="token function">registerGetter</span> <span class="token punctuation">(</span><span class="token parameter">store<span class="token punctuation">,</span> type<span class="token punctuation">,</span> rawGetter<span class="token punctuation">,</span> local</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>store<span class="token punctuation">.</span>_wrappedGetters<span class="token punctuation">[</span>type<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token string">&quot;[vuex] duplicate getter key: &quot;</span> <span class="token operator">+</span> type<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span>
    <span class="token punctuation">}</span>
    store<span class="token punctuation">.</span>_wrappedGetters<span class="token punctuation">[</span>type<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">wrappedGetter</span> <span class="token punctuation">(</span><span class="token parameter">store</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token function">rawGetter</span><span class="token punctuation">(</span>
        local<span class="token punctuation">.</span>state<span class="token punctuation">,</span> <span class="token comment">// local state</span>
        local<span class="token punctuation">.</span>getters<span class="token punctuation">,</span> <span class="token comment">// local getters</span>
        store<span class="token punctuation">.</span>state<span class="token punctuation">,</span> <span class="token comment">// root state</span>
        store<span class="token punctuation">.</span>getters <span class="token comment">// root getters</span>
      <span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  module<span class="token punctuation">.</span><span class="token function">forEachGetter</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">getter<span class="token punctuation">,</span> key</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> namespacedType <span class="token operator">=</span> namespace <span class="token operator">+</span> key<span class="token punctuation">;</span>
    <span class="token function">registerGetter</span><span class="token punctuation">(</span>store<span class="token punctuation">,</span> namespacedType<span class="token punctuation">,</span> getter<span class="token punctuation">,</span> local<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">Module</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">forEachGetter</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">forEachGetter</span> <span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>_rawModule<span class="token punctuation">.</span>getters<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">forEachValue</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>_rawModule<span class="token punctuation">.</span>getters<span class="token punctuation">,</span> fn<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">function</span> <span class="token function">forEachValue</span> <span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span> fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">key</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token function">fn</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre></div><p>代码分析：</p> <ol><li><p>首先 <code>Module</code> 原型上定义了一个 <code>forEachGetter</code> 方法，它接受一个参数 <code>fn</code>，函数主体中的 <code>this._rawModule.getters</code> 就是我们在 Vuex 定义的 <code>getters</code></p></li> <li><p>然后看 <code>module.forEachGetter</code> 的调用，此时传入了一个函数 <code>fn</code>，<code>forEachGetter</code> 内部执行 <code>forEachValue</code> 遍历我们的 <code>this._rawModule.getters(getters)</code>，对于每一个 <code>getters</code> 项都会执行传入的 <code>fn</code> 函数，执行 <code>fn</code> 时传入两个参数：第一个是 <code>getters</code> 对应的计算函数；第二参数对应 <code>getters</code> 的 <code>key</code></p></li> <li><p>回到这个 <code>fn</code> 方法本身，重点就是执行 <code>registerGetter(store, namespacedType, getter, local);</code>，它的功能就是重新打包了 <code>getters</code>，仍是已 <code>{key: fn}</code> 的格式将当前 <code>getters</code> 方法保存到 <code>store._wrappedGetters</code> 对象中。只是这时的 <code>getters-key</code> 加了命名空间， <code>getters-计算方法</code> 重新打包后注入了 <code>local.state</code>、<code>local.getters</code>、<code>store.state</code>、<code>store.getters</code> 四个参数，我们在使用 <code>getters</code> 可以访问到的四个参数就是从这里来的</p></li></ol> <h3 id="创建-computed"><a href="#创建-computed" class="header-anchor">#</a> 创建 computed</h3> <p>上面明白了 <code>wrappedGetters</code> 的由来，回到创建 <code>computed</code></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> computed <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">forEachValue</span><span class="token punctuation">(</span>wrappedGetters<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> key</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// use computed to leverage its lazy-caching mechanism</span>
  <span class="token comment">// direct inline function use will lead to closure preserving oldVm.</span>
  <span class="token comment">// using partial to return function with only arguments preserved in closure environment.</span>
  computed<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">partial</span><span class="token punctuation">(</span>fn<span class="token punctuation">,</span> store<span class="token punctuation">)</span><span class="token punctuation">;</span>
  Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>store<span class="token punctuation">.</span>getters<span class="token punctuation">,</span> key<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> store<span class="token punctuation">.</span>_vm<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    enumerable<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token comment">// for local getters</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/**
* forEach for object
*/</span>
<span class="token keyword">function</span> <span class="token function">forEachValue</span> <span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span> fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">key</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token function">fn</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// partial</span>
<span class="token keyword">function</span> <span class="token function">partial</span> <span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> arg</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">fn</span><span class="token punctuation">(</span>arg<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>根据代码可以看到也是使用 <code>forEachValue</code> 遍历 <code>wrappedGetters</code> 给 <code>computed</code> 赋值的，<code>forEachValue</code> 的作用就是遍历 <code>wrappedGetters</code>，然后执行传入的函数参数</p> <p>执行参数函数时第一个参数 <code>fn</code> 就是每个 <code>getter</code> 的计算函数，第二个参数就是 <code>getter</code> 的 <code>key</code>，内部就是通过 <code>computed[key] = partial(fn, store)</code> 给 <code>computed</code> 添加属性，通过 <code>partial(fn, store)</code> 再次打包 <code>getter</code> 的计算函数，并把 <code>store</code> 参数传入，也就是对应上文 <code>wrappedGetter</code> 中的 <code>store</code> 参数</p> <p>然后使用 <code>Object.defineProperty</code> 将 <code>store.getters</code> 属性的访问代理到 <code>store._vm</code> 中</p> <p>然后在实例 Vue 时，将上面的 <code>computed</code> 传入使用</p> <div class="language-js extra-class"><pre class="language-js"><code>  store<span class="token punctuation">.</span>_vm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    data<span class="token operator">:</span> <span class="token punctuation">{</span>
      $$state<span class="token operator">:</span> state
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    computed<span class="token operator">:</span> computed
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>总的来说 Vue 中的 <code>computed</code> 包含了我们的 <code>getters</code></p> <p>当我们直接使用  <code>store._vm[nameapce+key]</code> 访问 <code>getters</code> 时，会从<code>store._vm[nameapce+key]</code> 找，<code>store._vm</code> 就是 Vue 实例，也是会从 <code>computed[nameapce+key]</code> 中去找</p> <p>所以当我们通过 <code>store.getters[nameapce+key]</code> 去找 <code>getters</code> 时，之后由上</p> <h2 id="q-a"><a href="#q-a" class="header-anchor">#</a> Q&amp;A</h2> <p><strong>为什么 MUTATION 只能是同步的？</strong></p> <ol><li><p>为了 devtool 快照可以更正确得记录状态的变化</p></li> <li><p>异步操作是成功还是失败是不可预测的，会产生副作用</p></li></ol></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/lanjz/Vue/VueRouter.html" class="prev">
        Vue-Router
      </a></span> <span class="next"><a href="/lanjz/Vue/Extend.html">
        Extend
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/lanjz/assets/js/app.30f34e3e.js" defer></script><script src="/lanjz/assets/js/2.9609252a.js" defer></script><script src="/lanjz/assets/js/164.794e8ba6.js" defer></script>
  </body>
</html>
