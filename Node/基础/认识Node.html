<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.49">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <title>认识Node | LLL Blog</title><meta name="description" content="前端总结与记录">
    <link rel="modulepreload" href="/lanjz/assets/app.a61e5c82.js"><link rel="modulepreload" href="/lanjz/assets/认识Node.html.4d8cf65a.js"><link rel="modulepreload" href="/lanjz/assets/认识Node.html.73f4b348.js"><link rel="prefetch" href="/lanjz/assets/index.html.45be7b38.js"><link rel="prefetch" href="/lanjz/assets/index.html.f17f1648.js"><link rel="prefetch" href="/lanjz/assets/剑指offer二.html.2b46cade.js"><link rel="prefetch" href="/lanjz/assets/动态规划.html.4ca18543.js"><link rel="prefetch" href="/lanjz/assets/回文串.html.e3c3dc83.js"><link rel="prefetch" href="/lanjz/assets/回溯.html.8d529d1c.js"><link rel="prefetch" href="/lanjz/assets/字节前端.html.520414c6.js"><link rel="prefetch" href="/lanjz/assets/小题.html.b958e1ca.js"><link rel="prefetch" href="/lanjz/assets/时间_空间复杂度.html.c6bea22e.js"><link rel="prefetch" href="/lanjz/assets/树.html.590b3c73.js"><link rel="prefetch" href="/lanjz/assets/简单排序.html.7fe0dc90.js"><link rel="prefetch" href="/lanjz/assets/HTML渲染过程.html.19677f97.js"><link rel="prefetch" href="/lanjz/assets/index.html.a3ce1b03.js"><link rel="prefetch" href="/lanjz/assets/浏览器中的进程与线程.html.a60fe1b3.js"><link rel="prefetch" href="/lanjz/assets/BFC和IFC.html.cd916c54.js"><link rel="prefetch" href="/lanjz/assets/CSS3新特性.html.091598ad.js"><link rel="prefetch" href="/lanjz/assets/Flex.html.5aaf97ec.js"><link rel="prefetch" href="/lanjz/assets/Image.html.98d4936e.js"><link rel="prefetch" href="/lanjz/assets/index.html.c5614fcd.js"><link rel="prefetch" href="/lanjz/assets/多列.html.2fcf5c5d.js"><link rel="prefetch" href="/lanjz/assets/换肤.html.15380463.js"><link rel="prefetch" href="/lanjz/assets/样式实现.html.e4b4ad6c.js"><link rel="prefetch" href="/lanjz/assets/移动端一像素问题.html.2136f4a4.js"><link rel="prefetch" href="/lanjz/assets/移动端适配方案.html.d96581c3.js"><link rel="prefetch" href="/lanjz/assets/适配iponeX.html.3ca26362.js"><link rel="prefetch" href="/lanjz/assets/Class.html.8c30eb47.js"><link rel="prefetch" href="/lanjz/assets/Class继承.html.0ffa10c7.js"><link rel="prefetch" href="/lanjz/assets/Generater应用.html.3bf4cafe.js"><link rel="prefetch" href="/lanjz/assets/Generator.html.60ce39ed.js"><link rel="prefetch" href="/lanjz/assets/Iterator.html.0a26a36f.js"><link rel="prefetch" href="/lanjz/assets/Map和WeakMap.html.ccf26f18.js"><link rel="prefetch" href="/lanjz/assets/Module.html.2b2434bc.js"><link rel="prefetch" href="/lanjz/assets/Module的加载实现.html.92c27953.js"><link rel="prefetch" href="/lanjz/assets/Promise.html.f45b040c.js"><link rel="prefetch" href="/lanjz/assets/Proxy.html.d2411ef5.js"><link rel="prefetch" href="/lanjz/assets/index.html.3a785c2f.js"><link rel="prefetch" href="/lanjz/assets/Set和WeakSet.html.e935a7d2.js"><link rel="prefetch" href="/lanjz/assets/Symbol.html.31793ea6.js"><link rel="prefetch" href="/lanjz/assets/async函数.html.9347b690.js"><link rel="prefetch" href="/lanjz/assets/函数的扩展.html.9a9e2836.js"><link rel="prefetch" href="/lanjz/assets/对象.html.f12afb7b.js"><link rel="prefetch" href="/lanjz/assets/数组.html.6c0101bd.js"><link rel="prefetch" href="/lanjz/assets/装饰器.html.b9c0f4cf.js"><link rel="prefetch" href="/lanjz/assets/HTML5新特性.html.3492eace.js"><link rel="prefetch" href="/lanjz/assets/IntersectionObserver.html.639599b0.js"><link rel="prefetch" href="/lanjz/assets/Preload和Prefetch.html.a3bc9aff.js"><link rel="prefetch" href="/lanjz/assets/index.html.6091ee86.js"><link rel="prefetch" href="/lanjz/assets/SVG.html.e7bf3a5b.js"><link rel="prefetch" href="/lanjz/assets/Worker.html.0bca4b61.js"><link rel="prefetch" href="/lanjz/assets/requestIdleCallback和requestAnimationFrame.html.60a3f0aa.js"><link rel="prefetch" href="/lanjz/assets/index.html.4f071c6f.js"><link rel="prefetch" href="/lanjz/assets/DOM.html.2887b3f3.js"><link rel="prefetch" href="/lanjz/assets/JS基础.html.03f1e66d.js"><link rel="prefetch" href="/lanjz/assets/JS核心.html.78b4fadc.js"><link rel="prefetch" href="/lanjz/assets/JS面象对象.html.df468538.js"><link rel="prefetch" href="/lanjz/assets/index.html.edd93069.js"><link rel="prefetch" href="/lanjz/assets/事件.html.24141304.js"><link rel="prefetch" href="/lanjz/assets/代码实现.html.f7e66d69.js"><link rel="prefetch" href="/lanjz/assets/全面解析Module模式.html.bb2ff920.js"><link rel="prefetch" href="/lanjz/assets/函数.html.02b5042b.js"><link rel="prefetch" href="/lanjz/assets/吱不吱.html.0dfbb506.js"><link rel="prefetch" href="/lanjz/assets/吱不吱二.html.ec461d21.js"><link rel="prefetch" href="/lanjz/assets/对象创建模式.html.1fb507e8.js"><link rel="prefetch" href="/lanjz/assets/正则.html.2e2bc3ff.js"><link rel="prefetch" href="/lanjz/assets/编写高质量JavaScript代码的基本要点.html.026ccaa1.js"><link rel="prefetch" href="/lanjz/assets/设计模式.html.138debbe.js"><link rel="prefetch" href="/lanjz/assets/闭包.html.df013ff2.js"><link rel="prefetch" href="/lanjz/assets/JSBridge.html.de72008e.js"><link rel="prefetch" href="/lanjz/assets/index.html.18216315.js"><link rel="prefetch" href="/lanjz/assets/uniapp.html.d1638401.js"><link rel="prefetch" href="/lanjz/assets/微信小程序.html.8a1ee64c.js"><link rel="prefetch" href="/lanjz/assets/Component.html.f925bebd.js"><link rel="prefetch" href="/lanjz/assets/Diff.html.d10067a0.js"><link rel="prefetch" href="/lanjz/assets/Fiber.html.65bd3f52.js"><link rel="prefetch" href="/lanjz/assets/Hook.html.47594c25.js"><link rel="prefetch" href="/lanjz/assets/index.html.e1512ba2.js"><link rel="prefetch" href="/lanjz/assets/React-router5.html.56ce5a68.js"><link rel="prefetch" href="/lanjz/assets/React.html.40c6b4b5.js"><link rel="prefetch" href="/lanjz/assets/React16新特性.html.2e1229d4.js"><link rel="prefetch" href="/lanjz/assets/ReactDOM.render.html.c94f0bd8.js"><link rel="prefetch" href="/lanjz/assets/React高级指引.html.72c97dc0.js"><link rel="prefetch" href="/lanjz/assets/VirtualDom.html.979c9eb6.js"><link rel="prefetch" href="/lanjz/assets/vsVue.html.542e3191.js"><link rel="prefetch" href="/lanjz/assets/吱不吱.html.2a25c8d0.js"><link rel="prefetch" href="/lanjz/assets/性能优化.html.d35444c1.js"><link rel="prefetch" href="/lanjz/assets/时间切片.html.be3ee761.js"><link rel="prefetch" href="/lanjz/assets/更新机制.html.34f9c5fb.js"><link rel="prefetch" href="/lanjz/assets/服务端渲染.html.1bc62017.js"><link rel="prefetch" href="/lanjz/assets/渲染过程.html.c0e056f9.js"><link rel="prefetch" href="/lanjz/assets/高阶组件.html.bd0e9b1c.js"><link rel="prefetch" href="/lanjz/assets/_nextTick.html.09251e5d.js"><link rel="prefetch" href="/lanjz/assets/_set.html.2aa70485.js"><link rel="prefetch" href="/lanjz/assets/Computed.html.7f6da567.js"><link rel="prefetch" href="/lanjz/assets/Extend.html.d7560508.js"><link rel="prefetch" href="/lanjz/assets/Paas应用.html.6cf70315.js"><link rel="prefetch" href="/lanjz/assets/PatchNode.html.bf10b1a7.js"><link rel="prefetch" href="/lanjz/assets/index.html.803fe238.js"><link rel="prefetch" href="/lanjz/assets/SSR.html.8164c0f2.js"><link rel="prefetch" href="/lanjz/assets/VueRouter.html.57d24eea.js"><link rel="prefetch" href="/lanjz/assets/Vuex.html.aeb4aefa.js"><link rel="prefetch" href="/lanjz/assets/Vue性能优化.html.53bd7859.js"><link rel="prefetch" href="/lanjz/assets/Watch.html.2079f3f6.js"><link rel="prefetch" href="/lanjz/assets/Watcher更新顺序.html.8fabad10.js"><link rel="prefetch" href="/lanjz/assets/render.html.004dde5d.js"><link rel="prefetch" href="/lanjz/assets/v-model.html.033b1932.js"><link rel="prefetch" href="/lanjz/assets/共享状态思想.html.91b19779.js"><link rel="prefetch" href="/lanjz/assets/吱不吱.html.7d430f6e.js"><link rel="prefetch" href="/lanjz/assets/响应式原理.html.d753ef87.js"><link rel="prefetch" href="/lanjz/assets/数据代理.html.a6a08ead.js"><link rel="prefetch" href="/lanjz/assets/模板到DOM.html.6033aa05.js"><link rel="prefetch" href="/lanjz/assets/组件通信.html.057121d9.js"><link rel="prefetch" href="/lanjz/assets/Diff.html.b73b29ea.js"><link rel="prefetch" href="/lanjz/assets/index.html.049f377b.js"><link rel="prefetch" href="/lanjz/assets/SFC还是JSX.html.c673ed9c.js"><link rel="prefetch" href="/lanjz/assets/V3升级目的.html.8c0f85c0.js"><link rel="prefetch" href="/lanjz/assets/createApp.html.8bdde633.js"><link rel="prefetch" href="/lanjz/assets/setup.html.918624b2.js"><link rel="prefetch" href="/lanjz/assets/watch.html.96adae8a.js"><link rel="prefetch" href="/lanjz/assets/使用区别.html.4b25f062.js"><link rel="prefetch" href="/lanjz/assets/响应式API.html.1d43ac2a.js"><link rel="prefetch" href="/lanjz/assets/响应式原理.html.0a62c8db.js"><link rel="prefetch" href="/lanjz/assets/预渲染.html.f018ff6c.js"><link rel="prefetch" href="/lanjz/assets/CDN.html.cbef61a2.js"><link rel="prefetch" href="/lanjz/assets/Cookie.html.50f6f99c.js"><link rel="prefetch" href="/lanjz/assets/Cookie、Session、Token、JWT.html.41487c4b.js"><link rel="prefetch" href="/lanjz/assets/DNS.html.120d48e0.js"><link rel="prefetch" href="/lanjz/assets/HTTPS.html.001f188b.js"><link rel="prefetch" href="/lanjz/assets/HTTP及演变.html.36514997.js"><link rel="prefetch" href="/lanjz/assets/index.html.5ab9559d.js"><link rel="prefetch" href="/lanjz/assets/Socket.html.7df8ee4a.js"><link rel="prefetch" href="/lanjz/assets/TCP.html.6ffaf5ed.js"><link rel="prefetch" href="/lanjz/assets/WebSocket.html.4502ba43.js"><link rel="prefetch" href="/lanjz/assets/keep-alive.html.e7daab2c.js"><link rel="prefetch" href="/lanjz/assets/浏览器缓存.html.6f51e455.js"><link rel="prefetch" href="/lanjz/assets/网络层的优化.html.1e476ed6.js"><link rel="prefetch" href="/lanjz/assets/跨域.html.dd4113c6.js"><link rel="prefetch" href="/lanjz/assets/MD.html.f453ff0c.js"><link rel="prefetch" href="/lanjz/assets/index.html.1bdc5267.js"><link rel="prefetch" href="/lanjz/assets/importHtmlEntry.html.ca1cfd3a.js"><link rel="prefetch" href="/lanjz/assets/qiankun原理.html.007fee72.js"><link rel="prefetch" href="/lanjz/assets/微前端.html.40a26ae3.js"><link rel="prefetch" href="/lanjz/assets/index.html.d9b8aa43.js"><link rel="prefetch" href="/lanjz/assets/FE重构.html.bd08964a.js"><link rel="prefetch" href="/lanjz/assets/Performance.html.574c0b9e.js"><link rel="prefetch" href="/lanjz/assets/Webpack构建优化.html.feb8b6d9.js"><link rel="prefetch" href="/lanjz/assets/che.html.460b5606.js"><link rel="prefetch" href="/lanjz/assets/响应式原理分享.html.1aa5e80a.js"><link rel="prefetch" href="/lanjz/assets/埋点分享.html.9c9a1b04.js"><link rel="prefetch" href="/lanjz/assets/评审.html.d2b9b0f2.js"><link rel="prefetch" href="/lanjz/assets/Git.html.2161b440.js"><link rel="prefetch" href="/lanjz/assets/Mac.html.73666f12.js"><link rel="prefetch" href="/lanjz/assets/index.html.c261790d.js"><link rel="prefetch" href="/lanjz/assets/Lighthouse.html.30ae3628.js"><link rel="prefetch" href="/lanjz/assets/Spreadjs.html.1078d262.js"><link rel="prefetch" href="/lanjz/assets/公共模块管理.html.71945d24.js"><link rel="prefetch" href="/lanjz/assets/内存泄漏.html.02912372.js"><link rel="prefetch" href="/lanjz/assets/前端优化总结.html.bcd46ba1.js"><link rel="prefetch" href="/lanjz/assets/前端异常捕获.html.812a425e.js"><link rel="prefetch" href="/lanjz/assets/埋点方案.html.bdaba252.js"><link rel="prefetch" href="/lanjz/assets/开发与调试技巧.html.04f82228.js"><link rel="prefetch" href="/lanjz/assets/性能指标.html.580a12ac.js"><link rel="prefetch" href="/lanjz/assets/疑难杂症.html.6b8370f6.js"><link rel="prefetch" href="/lanjz/assets/组件设计的基本原则.html.0e0b9108.js"><link rel="prefetch" href="/lanjz/assets/自动化部署.html.6913bbb3.js"><link rel="prefetch" href="/lanjz/assets/重构改善既有代码的设计.html.fbb169b1.js"><link rel="prefetch" href="/lanjz/assets/预加载_预解析.html.b798f9ed.js"><link rel="prefetch" href="/lanjz/assets/WebStorage.html.91772f2e.js"><link rel="prefetch" href="/lanjz/assets/svgMap.html.a0dc6453.js"><link rel="prefetch" href="/lanjz/assets/index.html.b8ab6e72.js"><link rel="prefetch" href="/lanjz/assets/README2.html.58c85129.js"><link rel="prefetch" href="/lanjz/assets/使用小记.html.d2c2b0bb.js"><link rel="prefetch" href="/lanjz/assets/Buffer.html.5de9d0e1.js"><link rel="prefetch" href="/lanjz/assets/Node中的进程和线程.html.c6f9f6d7.js"><link rel="prefetch" href="/lanjz/assets/index.html.e16cb3ab.js"><link rel="prefetch" href="/lanjz/assets/流.html.126608e2.js"><link rel="prefetch" href="/lanjz/assets/待看.html.8f29572e.js"><link rel="prefetch" href="/lanjz/assets/index.html.6a0cd011.js"><link rel="prefetch" href="/lanjz/assets/NPM.html.5b495631.js"><link rel="prefetch" href="/lanjz/assets/index.html.6887177b.js"><link rel="prefetch" href="/lanjz/assets/index.html.820bd0db.js"><link rel="prefetch" href="/lanjz/assets/Vite是啥.html.1b068b43.js"><link rel="prefetch" href="/lanjz/assets/Babel-Loader.html.f71383aa.js"><link rel="prefetch" href="/lanjz/assets/Loader.html.2670fb75.js"><link rel="prefetch" href="/lanjz/assets/ModuleFederation.html.d5574672.js"><link rel="prefetch" href="/lanjz/assets/Plugin.html.55000b31.js"><link rel="prefetch" href="/lanjz/assets/index.html.c2f20d31.js"><link rel="prefetch" href="/lanjz/assets/Webpack5新特性.html.16c51271.js"><link rel="prefetch" href="/lanjz/assets/css-loader_style-loader.html.0a301851.js"><link rel="prefetch" href="/lanjz/assets/library.html.3e64e52a.js"><link rel="prefetch" href="/lanjz/assets/优化实践之Vue-Cli.html.e3d54bf7.js"><link rel="prefetch" href="/lanjz/assets/构建优化方案.html.44f9bd1f.js"><link rel="prefetch" href="/lanjz/assets/配置小记.html.8366e844.js"><link rel="prefetch" href="/lanjz/assets/Node模块.html.cbed6fc3.js"><link rel="prefetch" href="/lanjz/assets/index.html.d650acef.js"><link rel="prefetch" href="/lanjz/assets/事件循环.html.8798940e.js"><link rel="prefetch" href="/lanjz/assets/内存泄露.html.7414da69.js"><link rel="prefetch" href="/lanjz/assets/吱不吱.html.36362ccf.js"><link rel="prefetch" href="/lanjz/assets/基础使用.html.c5421d2c.js"><link rel="prefetch" href="/lanjz/assets/守护服务.html.fc3a3fc7.js"><link rel="prefetch" href="/lanjz/assets/进程和线程.html.04e60960.js"><link rel="prefetch" href="/lanjz/assets/index.html.9a6e6677.js"><link rel="prefetch" href="/lanjz/assets/setState.html.93dbf7b9.js"><link rel="prefetch" href="/lanjz/assets/前端规范.html.d2510736.js"><link rel="prefetch" href="/lanjz/assets/项目模板.html.d7f53c62.js"><link rel="prefetch" href="/lanjz/assets/index.html.43a2af0f.js"><link rel="prefetch" href="/lanjz/assets/登录系统.html.d49733d8.js"><link rel="prefetch" href="/lanjz/assets/页面鉴权.html.52da25fd.js"><link rel="prefetch" href="/lanjz/assets/code-split.html.35b616a5.js"><link rel="prefetch" href="/lanjz/assets/tree-shaking.html.b8d6a759.js"><link rel="prefetch" href="/lanjz/assets/模块热替换.html.9ba2afc8.js"><link rel="prefetch" href="/lanjz/assets/index.html.e677b7fa.js"><link rel="prefetch" href="/lanjz/assets/404.html.265028f6.js"><link rel="prefetch" href="/lanjz/assets/index.html.20838cb7.js"><link rel="prefetch" href="/lanjz/assets/index.html.4ab8ab06.js"><link rel="prefetch" href="/lanjz/assets/剑指offer二.html.f535e9ea.js"><link rel="prefetch" href="/lanjz/assets/动态规划.html.25a90aaa.js"><link rel="prefetch" href="/lanjz/assets/回文串.html.96a4dd79.js"><link rel="prefetch" href="/lanjz/assets/回溯.html.11fb9b88.js"><link rel="prefetch" href="/lanjz/assets/字节前端.html.f1446e7e.js"><link rel="prefetch" href="/lanjz/assets/小题.html.d8711287.js"><link rel="prefetch" href="/lanjz/assets/时间_空间复杂度.html.a58ecc98.js"><link rel="prefetch" href="/lanjz/assets/树.html.23f5b803.js"><link rel="prefetch" href="/lanjz/assets/简单排序.html.bc47842e.js"><link rel="prefetch" href="/lanjz/assets/HTML渲染过程.html.009e1da4.js"><link rel="prefetch" href="/lanjz/assets/index.html.72800c90.js"><link rel="prefetch" href="/lanjz/assets/浏览器中的进程与线程.html.9234febe.js"><link rel="prefetch" href="/lanjz/assets/BFC和IFC.html.a508ba44.js"><link rel="prefetch" href="/lanjz/assets/CSS3新特性.html.0e073a56.js"><link rel="prefetch" href="/lanjz/assets/Flex.html.6206c4f8.js"><link rel="prefetch" href="/lanjz/assets/Image.html.71e45f22.js"><link rel="prefetch" href="/lanjz/assets/index.html.78672fb3.js"><link rel="prefetch" href="/lanjz/assets/多列.html.ef307158.js"><link rel="prefetch" href="/lanjz/assets/换肤.html.78a2ff9e.js"><link rel="prefetch" href="/lanjz/assets/样式实现.html.19bcd9b3.js"><link rel="prefetch" href="/lanjz/assets/移动端一像素问题.html.e8ca3df2.js"><link rel="prefetch" href="/lanjz/assets/移动端适配方案.html.d5707b30.js"><link rel="prefetch" href="/lanjz/assets/适配iponeX.html.afd60a50.js"><link rel="prefetch" href="/lanjz/assets/Class.html.8b6f85fd.js"><link rel="prefetch" href="/lanjz/assets/Class继承.html.31d1757d.js"><link rel="prefetch" href="/lanjz/assets/Generater应用.html.28b45316.js"><link rel="prefetch" href="/lanjz/assets/Generator.html.5c8ce63b.js"><link rel="prefetch" href="/lanjz/assets/Iterator.html.30995b33.js"><link rel="prefetch" href="/lanjz/assets/Map和WeakMap.html.c9b9442d.js"><link rel="prefetch" href="/lanjz/assets/Module.html.fcaa8ef0.js"><link rel="prefetch" href="/lanjz/assets/Module的加载实现.html.c2bda9b8.js"><link rel="prefetch" href="/lanjz/assets/Promise.html.e4528160.js"><link rel="prefetch" href="/lanjz/assets/Proxy.html.aed34d00.js"><link rel="prefetch" href="/lanjz/assets/index.html.47820a24.js"><link rel="prefetch" href="/lanjz/assets/Set和WeakSet.html.47e5f243.js"><link rel="prefetch" href="/lanjz/assets/Symbol.html.14f09411.js"><link rel="prefetch" href="/lanjz/assets/async函数.html.f6243c1c.js"><link rel="prefetch" href="/lanjz/assets/函数的扩展.html.6e4bc819.js"><link rel="prefetch" href="/lanjz/assets/对象.html.5e2e7147.js"><link rel="prefetch" href="/lanjz/assets/数组.html.ee539494.js"><link rel="prefetch" href="/lanjz/assets/装饰器.html.dbfefa1e.js"><link rel="prefetch" href="/lanjz/assets/HTML5新特性.html.03bad4dd.js"><link rel="prefetch" href="/lanjz/assets/IntersectionObserver.html.ab3702c8.js"><link rel="prefetch" href="/lanjz/assets/Preload和Prefetch.html.ea3f7301.js"><link rel="prefetch" href="/lanjz/assets/index.html.7345cf2d.js"><link rel="prefetch" href="/lanjz/assets/SVG.html.7311345f.js"><link rel="prefetch" href="/lanjz/assets/Worker.html.c3550199.js"><link rel="prefetch" href="/lanjz/assets/requestIdleCallback和requestAnimationFrame.html.c5f72ab4.js"><link rel="prefetch" href="/lanjz/assets/index.html.cf0aaffb.js"><link rel="prefetch" href="/lanjz/assets/DOM.html.25da0b38.js"><link rel="prefetch" href="/lanjz/assets/JS基础.html.bc6988f6.js"><link rel="prefetch" href="/lanjz/assets/JS核心.html.fe81841c.js"><link rel="prefetch" href="/lanjz/assets/JS面象对象.html.d004f01e.js"><link rel="prefetch" href="/lanjz/assets/index.html.48f9d945.js"><link rel="prefetch" href="/lanjz/assets/事件.html.8b003b8e.js"><link rel="prefetch" href="/lanjz/assets/代码实现.html.4790e963.js"><link rel="prefetch" href="/lanjz/assets/全面解析Module模式.html.0502b9cb.js"><link rel="prefetch" href="/lanjz/assets/函数.html.4aadf305.js"><link rel="prefetch" href="/lanjz/assets/吱不吱.html.17bee93f.js"><link rel="prefetch" href="/lanjz/assets/吱不吱二.html.4a2a99c1.js"><link rel="prefetch" href="/lanjz/assets/对象创建模式.html.2c1301a5.js"><link rel="prefetch" href="/lanjz/assets/正则.html.543bbff5.js"><link rel="prefetch" href="/lanjz/assets/编写高质量JavaScript代码的基本要点.html.462d9a1e.js"><link rel="prefetch" href="/lanjz/assets/设计模式.html.f5d1cbfc.js"><link rel="prefetch" href="/lanjz/assets/闭包.html.60f1d38b.js"><link rel="prefetch" href="/lanjz/assets/JSBridge.html.86c3cc91.js"><link rel="prefetch" href="/lanjz/assets/index.html.145ef82f.js"><link rel="prefetch" href="/lanjz/assets/uniapp.html.3799ee0e.js"><link rel="prefetch" href="/lanjz/assets/微信小程序.html.a40946d6.js"><link rel="prefetch" href="/lanjz/assets/Component.html.91a8e360.js"><link rel="prefetch" href="/lanjz/assets/Diff.html.287172aa.js"><link rel="prefetch" href="/lanjz/assets/Fiber.html.a9664df6.js"><link rel="prefetch" href="/lanjz/assets/Hook.html.43bc5564.js"><link rel="prefetch" href="/lanjz/assets/index.html.fc483146.js"><link rel="prefetch" href="/lanjz/assets/React-router5.html.c0dc5b32.js"><link rel="prefetch" href="/lanjz/assets/React.html.c8a43746.js"><link rel="prefetch" href="/lanjz/assets/React16新特性.html.fb834c60.js"><link rel="prefetch" href="/lanjz/assets/ReactDOM.render.html.6cb94ff0.js"><link rel="prefetch" href="/lanjz/assets/React高级指引.html.5551e5d8.js"><link rel="prefetch" href="/lanjz/assets/VirtualDom.html.5e2adee7.js"><link rel="prefetch" href="/lanjz/assets/vsVue.html.d20a0911.js"><link rel="prefetch" href="/lanjz/assets/吱不吱.html.c1ee30ce.js"><link rel="prefetch" href="/lanjz/assets/性能优化.html.6da30375.js"><link rel="prefetch" href="/lanjz/assets/时间切片.html.ff4d4a9c.js"><link rel="prefetch" href="/lanjz/assets/更新机制.html.5baca3be.js"><link rel="prefetch" href="/lanjz/assets/服务端渲染.html.09d08e33.js"><link rel="prefetch" href="/lanjz/assets/渲染过程.html.606b57f7.js"><link rel="prefetch" href="/lanjz/assets/高阶组件.html.c14cf2d7.js"><link rel="prefetch" href="/lanjz/assets/_nextTick.html.4554ffbc.js"><link rel="prefetch" href="/lanjz/assets/_set.html.aaccec26.js"><link rel="prefetch" href="/lanjz/assets/Computed.html.835aff2b.js"><link rel="prefetch" href="/lanjz/assets/Extend.html.15354f51.js"><link rel="prefetch" href="/lanjz/assets/Paas应用.html.6fb1dce5.js"><link rel="prefetch" href="/lanjz/assets/PatchNode.html.d3a93b26.js"><link rel="prefetch" href="/lanjz/assets/index.html.a759d2cf.js"><link rel="prefetch" href="/lanjz/assets/SSR.html.f674d2db.js"><link rel="prefetch" href="/lanjz/assets/VueRouter.html.58205ff3.js"><link rel="prefetch" href="/lanjz/assets/Vuex.html.05eb8576.js"><link rel="prefetch" href="/lanjz/assets/Vue性能优化.html.fa800c35.js"><link rel="prefetch" href="/lanjz/assets/Watch.html.59f9a156.js"><link rel="prefetch" href="/lanjz/assets/Watcher更新顺序.html.cb20f281.js"><link rel="prefetch" href="/lanjz/assets/render.html.11fac505.js"><link rel="prefetch" href="/lanjz/assets/v-model.html.0c8176e3.js"><link rel="prefetch" href="/lanjz/assets/共享状态思想.html.b18275a1.js"><link rel="prefetch" href="/lanjz/assets/吱不吱.html.c3b9421a.js"><link rel="prefetch" href="/lanjz/assets/响应式原理.html.5b64d2b3.js"><link rel="prefetch" href="/lanjz/assets/数据代理.html.5677c132.js"><link rel="prefetch" href="/lanjz/assets/模板到DOM.html.35268bd1.js"><link rel="prefetch" href="/lanjz/assets/组件通信.html.6463a670.js"><link rel="prefetch" href="/lanjz/assets/Diff.html.39f5443e.js"><link rel="prefetch" href="/lanjz/assets/index.html.f63854cd.js"><link rel="prefetch" href="/lanjz/assets/SFC还是JSX.html.4f505e1a.js"><link rel="prefetch" href="/lanjz/assets/V3升级目的.html.b44c3ce2.js"><link rel="prefetch" href="/lanjz/assets/createApp.html.19a811e2.js"><link rel="prefetch" href="/lanjz/assets/setup.html.5555eabb.js"><link rel="prefetch" href="/lanjz/assets/watch.html.3c3bf2c5.js"><link rel="prefetch" href="/lanjz/assets/使用区别.html.0ace828f.js"><link rel="prefetch" href="/lanjz/assets/响应式API.html.3c0d22f9.js"><link rel="prefetch" href="/lanjz/assets/响应式原理.html.15747f8f.js"><link rel="prefetch" href="/lanjz/assets/预渲染.html.7870199c.js"><link rel="prefetch" href="/lanjz/assets/CDN.html.18bba714.js"><link rel="prefetch" href="/lanjz/assets/Cookie.html.4c0ccd17.js"><link rel="prefetch" href="/lanjz/assets/Cookie、Session、Token、JWT.html.4b4b431b.js"><link rel="prefetch" href="/lanjz/assets/DNS.html.944d4751.js"><link rel="prefetch" href="/lanjz/assets/HTTPS.html.6cb9ae7c.js"><link rel="prefetch" href="/lanjz/assets/HTTP及演变.html.cc84e939.js"><link rel="prefetch" href="/lanjz/assets/index.html.37e30161.js"><link rel="prefetch" href="/lanjz/assets/Socket.html.a690654c.js"><link rel="prefetch" href="/lanjz/assets/TCP.html.7c783fc3.js"><link rel="prefetch" href="/lanjz/assets/WebSocket.html.17b36000.js"><link rel="prefetch" href="/lanjz/assets/keep-alive.html.cb6fa82b.js"><link rel="prefetch" href="/lanjz/assets/浏览器缓存.html.16c4ecc4.js"><link rel="prefetch" href="/lanjz/assets/网络层的优化.html.ad8ce491.js"><link rel="prefetch" href="/lanjz/assets/跨域.html.ce6f5215.js"><link rel="prefetch" href="/lanjz/assets/MD.html.4e35df41.js"><link rel="prefetch" href="/lanjz/assets/index.html.6668c5e2.js"><link rel="prefetch" href="/lanjz/assets/importHtmlEntry.html.4f5e319d.js"><link rel="prefetch" href="/lanjz/assets/qiankun原理.html.cd2633e6.js"><link rel="prefetch" href="/lanjz/assets/微前端.html.09f12545.js"><link rel="prefetch" href="/lanjz/assets/index.html.c56b6fb9.js"><link rel="prefetch" href="/lanjz/assets/FE重构.html.6942268e.js"><link rel="prefetch" href="/lanjz/assets/Performance.html.c6b77376.js"><link rel="prefetch" href="/lanjz/assets/Webpack构建优化.html.8bfb6a20.js"><link rel="prefetch" href="/lanjz/assets/che.html.c40bb842.js"><link rel="prefetch" href="/lanjz/assets/响应式原理分享.html.c8762c28.js"><link rel="prefetch" href="/lanjz/assets/埋点分享.html.518cbe53.js"><link rel="prefetch" href="/lanjz/assets/评审.html.9ed89e5e.js"><link rel="prefetch" href="/lanjz/assets/Git.html.9800d60e.js"><link rel="prefetch" href="/lanjz/assets/Mac.html.979053e4.js"><link rel="prefetch" href="/lanjz/assets/index.html.573d58e6.js"><link rel="prefetch" href="/lanjz/assets/Lighthouse.html.99bb959b.js"><link rel="prefetch" href="/lanjz/assets/Spreadjs.html.df187958.js"><link rel="prefetch" href="/lanjz/assets/公共模块管理.html.0f62be62.js"><link rel="prefetch" href="/lanjz/assets/内存泄漏.html.a9a91b6c.js"><link rel="prefetch" href="/lanjz/assets/前端优化总结.html.f343fa40.js"><link rel="prefetch" href="/lanjz/assets/前端异常捕获.html.f67ef7ce.js"><link rel="prefetch" href="/lanjz/assets/埋点方案.html.fe461142.js"><link rel="prefetch" href="/lanjz/assets/开发与调试技巧.html.31c7bcd1.js"><link rel="prefetch" href="/lanjz/assets/性能指标.html.6399b583.js"><link rel="prefetch" href="/lanjz/assets/疑难杂症.html.ae9dc244.js"><link rel="prefetch" href="/lanjz/assets/组件设计的基本原则.html.49d78e23.js"><link rel="prefetch" href="/lanjz/assets/自动化部署.html.49b68207.js"><link rel="prefetch" href="/lanjz/assets/重构改善既有代码的设计.html.61cbd857.js"><link rel="prefetch" href="/lanjz/assets/预加载_预解析.html.5150e509.js"><link rel="prefetch" href="/lanjz/assets/WebStorage.html.fefa229e.js"><link rel="prefetch" href="/lanjz/assets/svgMap.html.5b4f09a6.js"><link rel="prefetch" href="/lanjz/assets/index.html.2b97151b.js"><link rel="prefetch" href="/lanjz/assets/README2.html.3012d50b.js"><link rel="prefetch" href="/lanjz/assets/使用小记.html.38b2dcfb.js"><link rel="prefetch" href="/lanjz/assets/Buffer.html.988fefa0.js"><link rel="prefetch" href="/lanjz/assets/Node中的进程和线程.html.75097d1e.js"><link rel="prefetch" href="/lanjz/assets/index.html.cf7996d7.js"><link rel="prefetch" href="/lanjz/assets/流.html.9a3b362b.js"><link rel="prefetch" href="/lanjz/assets/待看.html.12528bdd.js"><link rel="prefetch" href="/lanjz/assets/index.html.948063e9.js"><link rel="prefetch" href="/lanjz/assets/NPM.html.13b015e6.js"><link rel="prefetch" href="/lanjz/assets/index.html.a72d67c5.js"><link rel="prefetch" href="/lanjz/assets/index.html.a0b67ef1.js"><link rel="prefetch" href="/lanjz/assets/Vite是啥.html.0638f76c.js"><link rel="prefetch" href="/lanjz/assets/Babel-Loader.html.d512e4d6.js"><link rel="prefetch" href="/lanjz/assets/Loader.html.99ed3cce.js"><link rel="prefetch" href="/lanjz/assets/ModuleFederation.html.b4caad0b.js"><link rel="prefetch" href="/lanjz/assets/Plugin.html.e08d8e3b.js"><link rel="prefetch" href="/lanjz/assets/index.html.a0c9cf6c.js"><link rel="prefetch" href="/lanjz/assets/Webpack5新特性.html.0dbde1bf.js"><link rel="prefetch" href="/lanjz/assets/css-loader_style-loader.html.42a069b8.js"><link rel="prefetch" href="/lanjz/assets/library.html.c77fc461.js"><link rel="prefetch" href="/lanjz/assets/优化实践之Vue-Cli.html.3414be69.js"><link rel="prefetch" href="/lanjz/assets/构建优化方案.html.999f80da.js"><link rel="prefetch" href="/lanjz/assets/配置小记.html.ac0eebf5.js"><link rel="prefetch" href="/lanjz/assets/Node模块.html.8fe7e486.js"><link rel="prefetch" href="/lanjz/assets/index.html.e3a6dc96.js"><link rel="prefetch" href="/lanjz/assets/事件循环.html.1c15a7ce.js"><link rel="prefetch" href="/lanjz/assets/内存泄露.html.107c17e3.js"><link rel="prefetch" href="/lanjz/assets/吱不吱.html.4f851471.js"><link rel="prefetch" href="/lanjz/assets/基础使用.html.6dce5594.js"><link rel="prefetch" href="/lanjz/assets/守护服务.html.9950e9b7.js"><link rel="prefetch" href="/lanjz/assets/进程和线程.html.3ba85b7f.js"><link rel="prefetch" href="/lanjz/assets/index.html.e0f37a96.js"><link rel="prefetch" href="/lanjz/assets/setState.html.a4a744b7.js"><link rel="prefetch" href="/lanjz/assets/前端规范.html.c884b4a8.js"><link rel="prefetch" href="/lanjz/assets/项目模板.html.8d64a20b.js"><link rel="prefetch" href="/lanjz/assets/index.html.391ad28e.js"><link rel="prefetch" href="/lanjz/assets/登录系统.html.2b7dc9d2.js"><link rel="prefetch" href="/lanjz/assets/页面鉴权.html.f26a518e.js"><link rel="prefetch" href="/lanjz/assets/code-split.html.508aae20.js"><link rel="prefetch" href="/lanjz/assets/tree-shaking.html.b47de543.js"><link rel="prefetch" href="/lanjz/assets/模块热替换.html.384a71fb.js"><link rel="prefetch" href="/lanjz/assets/index.html.15ae2a41.js"><link rel="prefetch" href="/lanjz/assets/404.html.85d912da.js"><link rel="prefetch" href="/lanjz/assets/404.00d52426.js"><link rel="prefetch" href="/lanjz/assets/Layout.892f3c62.js"><link rel="prefetch" href="/lanjz/assets/Home.bbcd6078.js"><link rel="prefetch" href="/lanjz/assets/My.c1122cd7.js"><link rel="prefetch" href="/lanjz/assets/NavSvg.d9cf4f5e.js"><link rel="prefetch" href="/lanjz/assets/Resume.c95c9dd5.js">
    <link rel="stylesheet" href="/lanjz/assets/style.61c61bbb.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container no-sidebar"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/lanjz/" class=""><!----><span class="site-name">LLL Blog</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/lanjz/" class="" aria-label="Home"><!--[--><!--]--> Home <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="前端基础"><span class="title">前端基础</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="前端基础"><span class="title">前端基础</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/lanjz/JavaScript/" class="" aria-label="JavaScript"><!--[--><!--]--> JavaScript <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/ES6/" class="" aria-label="ES6"><!--[--><!--]--> ES6 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/HTML5/" class="" aria-label="HTML5"><!--[--><!--]--> HTML5 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/CSS/" class="" aria-label="CSS"><!--[--><!--]--> CSS <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/Browser/" class="" aria-label="Browser"><!--[--><!--]--> Browser <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="网络&amp;算法"><span class="title">网络&amp;算法</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="网络&amp;算法"><span class="title">网络&amp;算法</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/lanjz/network/" class="" aria-label="网络"><!--[--><!--]--> 网络 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/Algorithm/" class="" aria-label="算法"><!--[--><!--]--> 算法 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/secure/" class="" aria-label="Web安全"><!--[--><!--]--> Web安全 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="框架"><span class="title">框架</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="框架"><span class="title">框架</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/lanjz/Vue/" class="" aria-label="Vue"><!--[--><!--]--> Vue <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/Vue3/" class="" aria-label="Vue3"><!--[--><!--]--> Vue3 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/React/" class="" aria-label="React"><!--[--><!--]--> React <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/qiankun/" class="" aria-label="qiankun"><!--[--><!--]--> qiankun <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/NA/" class="" aria-label="跨平台"><!--[--><!--]--> 跨平台 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Node"><span class="title">Node</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Node"><span class="title">Node</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/lanjz/Node/基础/" class="" aria-label="基础"><!--[--><!--]--> 基础 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/Node/Api/" class="" aria-label="API"><!--[--><!--]--> API <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/Node/Package/" class="" aria-label="yarn&amp;npm"><!--[--><!--]--> yarn&amp;npm <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/Node/Webpack/" class="" aria-label="Webpack"><!--[--><!--]--> Webpack <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/Node/Vite/" class="" aria-label="Vite"><!--[--><!--]--> Vite <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/Node/ESBuild/" class="" aria-label="esbuild"><!--[--><!--]--> esbuild <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/Node/数据库/" class="" aria-label="SQL"><!--[--><!--]--> SQL <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="工程化"><span class="title">工程化</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="工程化"><span class="title">工程化</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/lanjz/工程化/前端优化总结.md" class="" aria-label="前端优化总结"><!--[--><!--]--> 前端优化总结 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/工程化/系统设计/" class="" aria-label="系统设计"><!--[--><!--]--> 系统设计 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/工程化/预加载&amp;预解析.md" class="" aria-label="预加载&amp;预解析"><!--[--><!--]--> 预加载&amp;预解析 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/工程化/重构改善既有代码的设计.md" class="" aria-label="重构代码原则"><!--[--><!--]--> 重构代码原则 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/工程化/开发与调试技巧.md" class="" aria-label="开发与调试"><!--[--><!--]--> 开发与调试 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/工程化/组件设计的基本原则.md" class="" aria-label="组件设计"><!--[--><!--]--> 组件设计 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/工程化/公共模块管理.md" class="" aria-label="公共模块管理"><!--[--><!--]--> 公共模块管理 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/工程化/内存泄漏.md" class="" aria-label="内存泄漏"><!--[--><!--]--> 内存泄漏 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/工程化/前端异常捕获.md" class="" aria-label="前端异常捕获"><!--[--><!--]--> 前端异常捕获 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/工程化/自动化部署.md" class="" aria-label="自动化部署"><!--[--><!--]--> 自动化部署 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/工程化/疑难杂症.md" class="" aria-label="问题小计"><!--[--><!--]--> 问题小计 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/工程化/性能指标.md" class="" aria-label="性能指标"><!--[--><!--]--> 性能指标 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/工程化/Lighthouse.md" class="" aria-label="Lighthouse"><!--[--><!--]--> Lighthouse <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/工程化/前端规范/" class="" aria-label="规范"><!--[--><!--]--> 规范 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/工程化/前端规范/前端规范.md" class="" aria-label="前端规范"><!--[--><!--]--> 前端规范 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/工程化/前端规范/项目模板.md" class="" aria-label="项目模板"><!--[--><!--]--> 项目模板 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/工程化/埋点方案.md" class="" aria-label="埋点"><!--[--><!--]--> 埋点 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="利其器"><span class="title">利其器</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="利其器"><span class="title">利其器</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/lanjz/利其器/Mac.md" class="" aria-label="Mac"><!--[--><!--]--> Mac <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/利其器/Git.md" class="" aria-label="Git"><!--[--><!--]--> Git <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="小工具"><span class="title">小工具</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="小工具"><span class="title">小工具</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/lanjz/online-tools/MD.md" class="" aria-label="MD"><!--[--><!--]--> MD <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a href="/lanjz/Im/" class="" aria-label="关于我"><!--[--><!--]--> 关于我 <!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/lanjz/" class="" aria-label="Home"><!--[--><!--]--> Home <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="前端基础"><span class="title">前端基础</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="前端基础"><span class="title">前端基础</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/lanjz/JavaScript/" class="" aria-label="JavaScript"><!--[--><!--]--> JavaScript <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/ES6/" class="" aria-label="ES6"><!--[--><!--]--> ES6 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/HTML5/" class="" aria-label="HTML5"><!--[--><!--]--> HTML5 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/CSS/" class="" aria-label="CSS"><!--[--><!--]--> CSS <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/Browser/" class="" aria-label="Browser"><!--[--><!--]--> Browser <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="网络&amp;算法"><span class="title">网络&amp;算法</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="网络&amp;算法"><span class="title">网络&amp;算法</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/lanjz/network/" class="" aria-label="网络"><!--[--><!--]--> 网络 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/Algorithm/" class="" aria-label="算法"><!--[--><!--]--> 算法 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/secure/" class="" aria-label="Web安全"><!--[--><!--]--> Web安全 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="框架"><span class="title">框架</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="框架"><span class="title">框架</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/lanjz/Vue/" class="" aria-label="Vue"><!--[--><!--]--> Vue <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/Vue3/" class="" aria-label="Vue3"><!--[--><!--]--> Vue3 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/React/" class="" aria-label="React"><!--[--><!--]--> React <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/qiankun/" class="" aria-label="qiankun"><!--[--><!--]--> qiankun <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/NA/" class="" aria-label="跨平台"><!--[--><!--]--> 跨平台 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Node"><span class="title">Node</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Node"><span class="title">Node</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/lanjz/Node/基础/" class="" aria-label="基础"><!--[--><!--]--> 基础 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/Node/Api/" class="" aria-label="API"><!--[--><!--]--> API <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/Node/Package/" class="" aria-label="yarn&amp;npm"><!--[--><!--]--> yarn&amp;npm <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/Node/Webpack/" class="" aria-label="Webpack"><!--[--><!--]--> Webpack <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/Node/Vite/" class="" aria-label="Vite"><!--[--><!--]--> Vite <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/Node/ESBuild/" class="" aria-label="esbuild"><!--[--><!--]--> esbuild <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/Node/数据库/" class="" aria-label="SQL"><!--[--><!--]--> SQL <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="工程化"><span class="title">工程化</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="工程化"><span class="title">工程化</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/lanjz/工程化/前端优化总结.md" class="" aria-label="前端优化总结"><!--[--><!--]--> 前端优化总结 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/工程化/系统设计/" class="" aria-label="系统设计"><!--[--><!--]--> 系统设计 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/工程化/预加载&amp;预解析.md" class="" aria-label="预加载&amp;预解析"><!--[--><!--]--> 预加载&amp;预解析 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/工程化/重构改善既有代码的设计.md" class="" aria-label="重构代码原则"><!--[--><!--]--> 重构代码原则 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/工程化/开发与调试技巧.md" class="" aria-label="开发与调试"><!--[--><!--]--> 开发与调试 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/工程化/组件设计的基本原则.md" class="" aria-label="组件设计"><!--[--><!--]--> 组件设计 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/工程化/公共模块管理.md" class="" aria-label="公共模块管理"><!--[--><!--]--> 公共模块管理 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/工程化/内存泄漏.md" class="" aria-label="内存泄漏"><!--[--><!--]--> 内存泄漏 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/工程化/前端异常捕获.md" class="" aria-label="前端异常捕获"><!--[--><!--]--> 前端异常捕获 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/工程化/自动化部署.md" class="" aria-label="自动化部署"><!--[--><!--]--> 自动化部署 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/工程化/疑难杂症.md" class="" aria-label="问题小计"><!--[--><!--]--> 问题小计 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/工程化/性能指标.md" class="" aria-label="性能指标"><!--[--><!--]--> 性能指标 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/工程化/Lighthouse.md" class="" aria-label="Lighthouse"><!--[--><!--]--> Lighthouse <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/工程化/前端规范/" class="" aria-label="规范"><!--[--><!--]--> 规范 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/工程化/前端规范/前端规范.md" class="" aria-label="前端规范"><!--[--><!--]--> 前端规范 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/工程化/前端规范/项目模板.md" class="" aria-label="项目模板"><!--[--><!--]--> 项目模板 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/工程化/埋点方案.md" class="" aria-label="埋点"><!--[--><!--]--> 埋点 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="利其器"><span class="title">利其器</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="利其器"><span class="title">利其器</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/lanjz/利其器/Mac.md" class="" aria-label="Mac"><!--[--><!--]--> Mac <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/利其器/Git.md" class="" aria-label="Git"><!--[--><!--]--> Git <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="小工具"><span class="title">小工具</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="小工具"><span class="title">小工具</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/lanjz/online-tools/MD.md" class="" aria-label="MD"><!--[--><!--]--> MD <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a href="/lanjz/Im/" class="" aria-label="关于我"><!--[--><!--]--> 关于我 <!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><!----><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="认识node" tabindex="-1"><a class="header-anchor" href="#认识node" aria-hidden="true">#</a> 认识Node</h1><p>作为一个异步事件驱动的 JavaScript 运行时，Node.js 被设计用来构建可扩展的网络应用，同时使用了一个非阻塞式I/O 的模型，使其轻量又高效</p><p>这里出现了两个关键词：事件驱动和非阻塞式I/O，所以要认识 Node 得先理解这两个是什么意思</p><h2 id="事件驱动" tabindex="-1"><a class="header-anchor" href="#事件驱动" aria-hidden="true">#</a> 事件驱动</h2><p>事件驱动是一种编程模型，编程模型是指操作系统在处理 IO 时所采用的方式，这通常是为了解决 IO 速度比较慢的问题而诞生的</p><p>事件驱动模型无需为每一个请求创建额外的线程，事件驱动编程是使用协作式处理任务，而不是多线程的抢占式。它的特点是包含一个事件循环，当外部事件发生时使用回调机制来触发相应的处理</p><p>我们把每一个 I/O 任务都当作是一个事件，在事件驱动模型中，每一个I/O操作都会被添加到事件队列中，主线程循环地处理队列上的工作任务，当执行过程中遇到阻塞（读取文件、查询数据库）时，线程不会停下来等待结果，而是继续执行队列中的下一个任务。当阻塞的事件完成时会将回调添加到事件队列中，待下一次事件循环中将取出执行</p><p>为了更好理解事件驱动模型，顺便了解一下其它的编程模型</p><h3 id="其它编程模型" tabindex="-1"><a class="header-anchor" href="#其它编程模型" aria-hidden="true">#</a> 其它编程模型</h3><p>除了上面讲的事件驱动编程模型，还有同步式模型，多进程模型，多线程模型</p><h4 id="同步式模型" tabindex="-1"><a class="header-anchor" href="#同步式模型" aria-hidden="true">#</a> 同步式模型</h4><p>同步式模型就是每次值处理一个请求，迭代地将所有请求处理完毕。无并发可言，处理效率当然很低</p><h4 id="多进程模型" tabindex="-1"><a class="header-anchor" href="#多进程模型" aria-hidden="true">#</a> 多进程模型</h4><p>每收到一个用户请求，就开启一个进程去处理</p><p><strong>优点</strong></p><ul><li><p>每个进程互相独立，子进程崩溃没关系</p></li><li><p>通过增加CPU，就可以容易扩充性能</p></li><li><p>充分利用系统资源</p></li></ul><p><strong>缺点</strong></p><ul><li><p>各个进程地址空间相互隔离，这一优点也会变成缺点，那就是进程间要想通信就会变得比较困难</p></li><li><p>进程开销是比线程要大的，频繁的创建销毁进程无疑会加重系统负担。</p></li></ul><h4 id="多线程模型" tabindex="-1"><a class="header-anchor" href="#多线程模型" aria-hidden="true">#</a> 多线程模型</h4><p>每个用户请求，开一个线程去处理。由于线程共享进程地址空间，因此线程间通信天然不需要借助任何通信机制，直接读取内存就好了</p><p><strong>优点</strong></p><ul><li><p>为每个请求创建一个线程，即使一个线程因执行I/O操作——比如读取数据库等——被阻塞暂停运行也不会影响到其它线程</p></li><li><p>所有线程可以直接共享内存和变量等</p></li><li><p>线程方式消耗的总资源比进程方式好</p></li></ul><p><strong>缺点</strong></p><ul><li><p>线程之间的同步和加锁控制比较麻烦</p></li><li><p>一个线程的崩溃可能影响到整个程序的稳定性</p></li><li><p>虽然线程创建开销相比进程小，但依然也是有开销的</p></li></ul><h2 id="非阻塞i-o" tabindex="-1"><a class="header-anchor" href="#非阻塞i-o" aria-hidden="true">#</a> 非阻塞I/O</h2><p>Node 在 I/O 操作方面性能是十分高效的，因为 Node 使用的是：异步+非阻塞I/O操作。那么到底怎么理解异步+非阻塞？异步跟非阻塞感觉像是同一个意思，具体怎么区分？</p><h3 id="什么是-i-o-操作" tabindex="-1"><a class="header-anchor" href="#什么是-i-o-操作" aria-hidden="true">#</a> 什么是 I/O 操作</h3><p>首先所谓的阻塞/非阻塞通常是针对 I/O 操作的，所以得先明白什么是 I/O 操作? 输入/输出（I/O）是在内存和外部设备（如磁盘，终端和网络）之间复制数据的过程。不仅仅是文件读写，包括键盘输入，网络请求等都属于 I/O 操作</p><p>以读取文件为例，一个完整的 I/O 操作包括：系统内核完成磁盘寻道 -&gt; 读取数据 -&gt; 复制数据到内存这些步聚</p><p><strong>在Node中，I/O特指 Node 程序在 Libuv 支持下与系统磁盘和网络交互的过程</strong></p><p>如何进行 I/O 操作，整体分为阻塞型 I/O 和非阻塞型 I/O 两种</p><h3 id="阻塞-非阻塞" tabindex="-1"><a class="header-anchor" href="#阻塞-非阻塞" aria-hidden="true">#</a> 阻塞/非阻塞</h3><p><strong>阻塞型 I/O</strong>是指在调用 I/O 操作后，应用程序需要等待 I/O 完成并返回结果，然后才能进行之后的其它任务</p><p><strong>非阻塞I/O</strong>则是调用I/O 操作后，不用等待结果直接返回。但是不带结果返回的话应用程序怎么获取结果呢？此时就需要通过类似轮循的方式不断得去读取 I/O 操作是否有结果</p><p>所以到目前为止所谓的非阻塞 I/O 并不理想，因为执行这种非阻塞 I/O 后，虽然 CPU 的时间片可以用来处理其他事务提高了性能，但是仍需要不断得轮循，这会造成 CPU 浪费。我们期望是理想操作是发起 I/O 操作后无须通过遍历或者事件唤醒等方式轮询，可以直接处理下一个任务，只需在 I/O 完成后通过信号或回调将数据传递给应用程序即可，如下面示意图</p><p><img src="/lanjz/assets/renshi-3.0a68a3f6.jpeg" alt=""></p><h3 id="异步-非阻塞" tabindex="-1"><a class="header-anchor" href="#异步-非阻塞" aria-hidden="true">#</a> 异步+非阻塞</h3><p>前面主要是从单线程场景考虑这很难达到理想的 I/O 操作，但如果是多线程就可以。通过让部分线程进行阻塞 I/O 或非阻塞I/O + 轮询技术来完成数据获取，让一个线程进行计算处理，通过线程之间的通信将 I/O 得到的数据进行传递，这就实现我们想要的 I/O 操作，也就是<strong>异步I/O 操作</strong></p><p>Node 的异步非阻塞 I/O 就是这么个意思了，通过多线程来执行非阻塞I/O来达到高效的 I/O 处理。所以说 Node 其实是多线程的，平时说的单线程是指我们的 JS 代码执行在单线程中</p><p>上文提到 Node 底层仍是利用了多线程进行 I/O 处理，多线程的实现根据平台不同有各自的实现方法。在 *nix 平台下 Node 使用自定义的线程池来实现 异步I/O 操作，在Window 平台下使用其自有 IOCP 来实现I/O 。因此为了解决平台的兼容差异问题，所以 Node 提供了 libuv 作为抽象封装层，所有平台兼容性的判断都由这一层完成</p><h3 id="异步i-o的过程" tabindex="-1"><a class="header-anchor" href="#异步i-o的过程" aria-hidden="true">#</a> 异步I/O的过程</h3><p>完成整个异步I/O 操作需要事件循环，观察者，请求对象和线程池等配合完成</p><p><strong>事件循环</strong></p><p>类似浏览器中的事件循环，每一次循环都会查找是否有完成的事件，有的话就取出执行，事件循环怎么查找呢？从观察者队列中查找</p><p><strong>观察者</strong></p><p>观察者的作用就是观察，观察啥？观察是否有完成的 I/O 事件，观察者根据 I/O 类型也分成：文件I/O 观察者，网络I/O 观察者等，在每一次的事件循环中，观察都会通过API获取是否有完成的I/O事件，有的话就添加的自己的观察者队列中</p><p><strong>请求对象</strong></p><p>JS执行 I/O操作 时实际上是通过底层的 libuv 进行系统调用的，此时 libuv 会创建一个请求对象，我们要执行的方法，参数和回调都会包装在这个请求对象中，然后将这个请求推入到线程池，等待线程池处理</p><p><strong>线程池</strong></p><p>上面提到了包装完请求对象后就会推入线程池，交于线程池来执行具体的I/O操作</p><h4 id="粟子" tabindex="-1"><a class="header-anchor" href="#粟子" aria-hidden="true">#</a> 粟子</h4><p>接下来通过 <code>fs.open()</code> 方法来概述一下 Node 和底层之间是如何执行异步 I/O 的</p><ol><li><p>JS 调用 Node 的核心模块执行 <code>open()</code> 方法，即 <code>fs.open()</code> 方法</p></li><li><p>核心模块内部调用 C++ 内建模块</p></li><li><p>内建模块通过 libuv 进行系统调用</p><p>libuv 作为封装层，有两个平台的实现，无论怎样实际上是调用了 <code>uv_fs_open()</code> 方法</p><p><img src="/lanjz/assets/renshi-2.9a017f66.jpeg" alt=""></p></li><li><p>调用 <code>uv_fs_open</code> 的过程中会创建一个请求对象，从JS传入的参数，回调和当前方法都会包装到这个请求对象中，然后将这个请求对象推入到线程池中，当线程池有可用线程时，就会根据请求对象调用具体的方法。至此 JS 调用就结束了，JS所在线程可以继续执行后续操作</p></li><li><p>当线程池中 I/O 操作完成之后，就会通过 IOCP，告知当前对象操作已经完成</p></li><li><p>之后事件循环的每一次 tick 中，观察者都会检查是否有完成的请求对象，如果存在，会将请求对象加入到 I/O 观察者队列中，下一次事件循环的时候就会从队列中取出当作事件执行</p></li></ol><p>整个过程的示意图：</p><p><img src="/lanjz/assets/renshi-1.80d57fba.jpeg" alt=""></p><h3 id="非i-o的异步api" tabindex="-1"><a class="header-anchor" href="#非i-o的异步api" aria-hidden="true">#</a> 非I/O的异步API</h3><p>非I/O的异步API是指 <code>setTimeout()</code>,<code>setInterval()</code>, <code>setImmediate()</code> 和 <code>process.next()</code></p><p><strong><code>setTimeout</code>和<code>setInterval</code></strong></p><p><code>setTimeout()</code> 和 <code>setInterval()</code> 实现原理与 I/O 比较类似，只是不需要线程池参与。调用<code>setTimeout()</code> 和 <code>setInterval()</code> 时创建的定时器会被插入到定时器观察者内部的一个红黑树中。每次 Tick 执行时，会从该红黑树中迭代取出定时器对象，检查是否超过定时时间，如果超过，就形成一个事件，它的回调函数将立即执行。如下示意图</p><p><img src="/lanjz/assets/renshi_5.9ec9877c.png" alt=""></p><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>定时器并非精准的，因为可能在一次 Tick 中在触发定时回调之前有耗时的任务，这样导致定时器延时执行</p></div><p><strong><code>process.nextTick()</code></strong></p><p><code>process.nextTick()</code> 的意思就是定义出一个异步动作，并且这个动作在事件循环当前阶段结束后执行</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>           ┌───────────────────────────┐
        ┌─&gt;│           timers          │
        │  └─────────────┬─────────────┘
        │           nextTickQueue
        │  ┌─────────────┴─────────────┐
        │  │     pending callbacks     │
        │  └─────────────┬─────────────┘
        │           nextTickQueue
        │  ┌─────────────┴─────────────┐
        |  |     idle, prepare         │
        |  └─────────────┬─────────────┘
  nextTickQueue     nextTickQueue
        |  ┌─────────────┴─────────────┐
        |  │           poll            │
        │  └─────────────┬─────────────┘
        │           nextTickQueue
        │  ┌─────────────┴─────────────┐
        │  │           check           │
        │  └─────────────┬─────────────┘
        │           nextTickQueue
        │  ┌─────────────┴─────────────┐
        └──┤       close callbacks     │
           └───────────────────────────┘
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong><code>setImmediate()</code></strong></p><p><code>setImmediate()</code> 定义出一个异步动作事件会在当前事件循环中的 check 阶段被执行</p><h2 id="同步-异步" tabindex="-1"><a class="header-anchor" href="#同步-异步" aria-hidden="true">#</a> 同步/异步</h2><p>同步和异步描述的是进程/线程的调用方式</p><p>同步调用指的是进程/线程发起调用后，一直等待调用返回后才继续执行下一步操作，这并不代表 CPU 在这段时间内也会一直等待，操作系统多半会切换到其它的进程/线程中，等到调用返回后再切换回原来的进程/线程</p><p>异步就相反，发起调用后，进程/线程继续向下执行，当调用返回后，通过某种手段来通过知调用者</p><h2 id="node-架构" tabindex="-1"><a class="header-anchor" href="#node-架构" aria-hidden="true">#</a> Node 架构</h2><p>上面提到 Node 底层是支持多线程的，依靠多线程的支持实现了高效异步 I/O 操作，接下就捊捊Node 整体架构。</p><p>Nodejs 的运行依赖于 V8 引擎和 libuv 库</p><ul><li><p>V8：执行 JS 的引擎. 也就是翻译 JS. 包括我们熟悉的编译优化, 垃圾回收等等.</p></li><li><p>libuv: 是操作系统 API 层的一个抽象层，Node 通过它实现了异步非阻塞 I/O</p></li></ul><p>那么 Nodejs 如何组织它们呢? 如下图:</p><p><img src="/lanjz/assets/node-1.44a9bcbd.png" alt=""></p><p>Nodejs 通过一层 <code>C++ Binding</code>, 把 JS 传入 V8, V8 解析后交给 libuv 发起 <code>asnyc I/O</code>, 并结合事件循环进行调度. 再看看下面的图:</p><p><img src="/lanjz/assets/node-2.cec5a6aa.png" alt=""></p><h3 id="io调用的结果怎么返回给调用的进程-线程" tabindex="-1"><a class="header-anchor" href="#io调用的结果怎么返回给调用的进程-线程" aria-hidden="true">#</a> IO调用的结果怎么返回给调用的进程/线程</h3><p>通过内核进程复制给调用进程，在 Linux 下，用户进程没办法直接访问内核空间，通常是内核调用 <code>copy_to_user</code> 方法来传递数据的。大致的流程是 IO 的数据会先被内核空间读取，然后内核将数据复制给用户进程。还有一种零复制技术，大致是内核进程和用户进程共享一块内存地址，这避免了内存的复制</p><h3 id="libuv" tabindex="-1"><a class="header-anchor" href="#libuv" aria-hidden="true">#</a> libuv</h3><p>上文提到过为了实现异步的 I/O 操作，需要实现线程池，最初 Node 在 *nix 平台下采用了 libeio 配合 libev 实现了异步 I/O，在Node v0.9.3 中，自行实现了线程池来完成异步 I/O；而在 Window 下则是使用了 IOCP，它在某种程度上提供了理想的异步 I/O ，它的内部其实仍然是线程池原理</p><p>由于 Window 和 *inx 平台的差异，Node 提供了 libuv 作为抽象封装层，使得所有平台兼容性的判断都在这一层来完成，并保证上层的 Node 与下层的自定义线池及 IOCP 之间各自独立</p><p>所以 Node 的异步 I/O 调用是由libuv来支持的，以 <code>readFile</code> 为例，读取文件的系统调用是由libuv来完成的，Node只负责调用libuv 的接口，等数据返回后再执行对应的回调方法</p><blockquote><p>线程池：基本思想还是一种对象池的思想，开辟一块内存空间，里面存放了众多(未死亡)的线程，池中线程执行调度由池管理器来处理。当有线程任务时，从池中取一个，执行完成后线程对象归池，这样可以避免反复创建线程对象所带来的性能开销，节省了系统的资源</p></blockquote><p><img src="/lanjz/assets/renshi-4.63376747.jpeg" alt=""></p><h2 id="高并发的node" tabindex="-1"><a class="header-anchor" href="#高并发的node" aria-hidden="true">#</a> 高并发的Node</h2><ul><li><p>并发：两排队伍在排队，但是只有一个买票窗口</p></li><li><p>并行：两个队伍在排，而且有两个买票窗口</p></li></ul><p><strong>Node中的并发</strong></p><p>单线程支持高并发，通常都是依靠异步+事件驱动（循环）来实现的，异步使得代码在面临多个请求时不会发生阻塞，事件循环提供了IO调用结束后调用回调函数的能力</p><p>先来看一个例子：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// helper</span>
<span class="token keyword">function</span> <span class="token function">delay</span><span class="token punctuation">(</span><span class="token parameter">time</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;延时：&#39;</span><span class="token punctuation">,</span> time<span class="token punctuation">)</span>
            <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> time <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">fibonacci</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">||</span> n <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token number">1</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">fibonacci</span><span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">fibonacci</span><span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    delay<span class="token punctuation">,</span>
    fibonacci
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> Koa <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;koa&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Koa</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> Router <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;@koa/router&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> delay<span class="token punctuation">,</span> fibonacci <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;./helper&#39;</span><span class="token punctuation">)</span>

<span class="token keyword">function</span> <span class="token function">timeLog</span><span class="token punctuation">(</span>start<span class="token punctuation">,</span> end <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">开始处理时间：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>start<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">;结束时间：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>end<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">;处理时长：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>end <span class="token operator">-</span> start<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Router</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
router<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/delay&#39;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">ctx<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> start <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">await</span> <span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span>
    ctx<span class="token punctuation">.</span>body <span class="token operator">=</span> <span class="token function">timeLog</span><span class="token punctuation">(</span>start<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
router<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/fibonacci&#39;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">ctx<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> start <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token function">fibonacci</span><span class="token punctuation">(</span><span class="token number">45</span><span class="token punctuation">)</span>
    ctx<span class="token punctuation">.</span>body <span class="token operator">=</span> <span class="token function">timeLog</span><span class="token punctuation">(</span>start<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
router<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/&#39;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">ctx<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> start <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    ctx<span class="token punctuation">.</span>body <span class="token operator">=</span> <span class="token function">timeLog</span><span class="token punctuation">(</span>start<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  app
    <span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>router<span class="token punctuation">.</span><span class="token function">routes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>router<span class="token punctuation">.</span><span class="token function">allowedMethods</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;去吧 皮卡丘：3000&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>上面代码中 <code>delay(6)</code> 是一个用定时器 <code>setTimeout</code> 做的延迟函数。当我们在浏览器输入 <code>localhost:3000/delay</code> 因为延迟的关系并不会立马取到返回值，紧接着在新的 <code>Tab</code> 页输入 <code>localhost:3000/</code> 可以立马显示返回的内容，并没有被之前的 <code>localhost:3000/delay</code> 请求所阻塞</p><p>另个场景先在浏览器输入 <code>localhost:3000/fibonacci</code>，这是一个 <code>fibonacci</code> 需要点时间，之后在新的 <code>Tab</code> 页输入 <code>localhost:3000/</code> 并没有显示内容而是之前的请求阻塞了</p><p>那么 Node 在哪些场景下是非阻塞的？ 处理 IO 操作的时候，这个 IO 包括数据库操作（连接数，机器性能等）、缓存服务、网络IO、文件读写等操作。</p><p><strong>引用 <a href="https://cnodejs.org/topic/5c8b0a4a7ce0df3732428254" target="_blank" rel="noopener noreferrer">CNODE 社区 - 关于 Nodejs 服务器高并发的疑问<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> 中的一个评论来帮助理解 node 高并发的适合场景</strong></p><p>CPU密集型本身就不适合 nodejs，但非常适合大量 io 操作的情况</p><p>假设一个请求流程 需要 <code>10ms</code> 的简单运算，<code>900ms</code> 的数据库查询，<code>90ms</code> 的数据返回。完整时间是1s</p><p>如果是 java 处理</p><p>如果是 <code>1000</code> 个请求，不在考虑数据库压力的情况下，理论上 java 会并发产生 <code>1000</code> 个线程来处理，理论上也就可以在 <code>1s</code> 内处理完 <code>1000</code> 个请求并全部返回数据。但是为了这 <code>1000</code> 个线程，服务器可能产生了 <code>百分之80</code> 的资源消耗，也就是说你这台服务器能支撑 <code>1000</code> 个并发已经很好了。</p><p>如果是 nodejs 处理</p><p>如果 <code>1000</code> 个请求，从第一个请求开始，<code>10ms</code> 处理完成，然后就交给数据去处理了，这个时候就可以处理下一个 <code>10ms</code> 的请求。也就是需要 <code>10s</code> 才可以接收完所有的请求，但是第一个请求返回时间是 <code>1s</code>，第二个请求返回时间是 <code>1s+10ms</code>，以此类推，但是这 <code>1000</code> 个并发 nodejs 会在 <code>11s</code> 左右全部处理完</p><p>你可能觉得 java 是 <code>1s</code>，nodejs 是 <code>11s</code>，差距很大，但是需要注意的是服务器消耗</p><p>java 是 <code>1000</code> 个进程可能已经是服务器的极限看了，但是 nodejs 服务器确一点事情都没有。换而言之，我一台服务器打开 <code>10</code> 个 nodejs 进程，我一台服务器就可以处理的并发是 <code>10s，1W</code> 的，但是 java 确实 <code>1s，1000</code>, 我需要用10台服务器才完成。</p><p>实际工作中，我们会发现。在相同的业务需求下，io 密集型的需求，使用 nodejs 同一台服务器可以处理的并发量更大，当然，牺牲了一部分的时间。但是这个完全可以用多开进程的方式来弥补来达到一个均衡。同样的服务器，仅 io 密集型的需求而言，nodejs 更加合适。</p><p>但是如果是 cpu 密集型的你 java 开 <code>1000</code> 个线程，是并发计算的，一个计算 <code>1</code> 秒， <code>1000</code> 的线程也 <code>1</code> 秒返回了，但是使用 nodejs，你需要 <code>1000</code> 秒才可以返回。</p><p><strong>node 在处理 IO 操作时是非阻塞的，处理 CPU 密集型计算时会阻塞的</strong></p><h2 id="总结" tabindex="-1"><a class="header-anchor" href="#总结" aria-hidden="true">#</a> 总结</h2><p>Node 为什么是高性能的？</p><ol><li><p>Node 采用事件驱动的方式处理请求，无须为每个请求创建额外的线程 ，可以省掉创建线程和销毁线程的开销</p></li><li><p>Node 底层又是具有线程池的，依靠 Libuv 线程池 Node 可以实现异步 I/O 操作</p></li></ol></div><!--[--><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: lanjiangzhou@sfmail.sf-express.com">LanJiangzhou</span><!----><!--]--><!--]--></span></div></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/lanjz/assets/app.a61e5c82.js" defer></script>
  </body>
</html>
