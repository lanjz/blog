<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.49">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <title>认识Node | LLL Blog</title><meta name="description" content="前端总结与记录">
    <link rel="modulepreload" href="/lanjz/assets/app.9941db85.js"><link rel="modulepreload" href="/lanjz/assets/认识Node.html.3b5fb12e.js"><link rel="modulepreload" href="/lanjz/assets/认识Node.html.a322e0ad.js"><link rel="prefetch" href="/lanjz/assets/index.html.5aece126.js"><link rel="prefetch" href="/lanjz/assets/index.html.cb6686db.js"><link rel="prefetch" href="/lanjz/assets/剑指offer二.html.3dca9912.js"><link rel="prefetch" href="/lanjz/assets/动态规划.html.74271fb6.js"><link rel="prefetch" href="/lanjz/assets/回文串.html.c4871bde.js"><link rel="prefetch" href="/lanjz/assets/回溯.html.cab6ef42.js"><link rel="prefetch" href="/lanjz/assets/字节前端.html.9d29f5f5.js"><link rel="prefetch" href="/lanjz/assets/小题.html.96330e75.js"><link rel="prefetch" href="/lanjz/assets/时间_空间复杂度.html.0d319fb0.js"><link rel="prefetch" href="/lanjz/assets/树.html.0078613a.js"><link rel="prefetch" href="/lanjz/assets/简单排序.html.1efc4b2d.js"><link rel="prefetch" href="/lanjz/assets/HTML渲染过程.html.0f148881.js"><link rel="prefetch" href="/lanjz/assets/index.html.c37b0435.js"><link rel="prefetch" href="/lanjz/assets/浏览器中的进程与线程.html.a6f334ad.js"><link rel="prefetch" href="/lanjz/assets/BFC和IFC.html.3cd3aca9.js"><link rel="prefetch" href="/lanjz/assets/CSS3新特性.html.3b339797.js"><link rel="prefetch" href="/lanjz/assets/Flex.html.264b679a.js"><link rel="prefetch" href="/lanjz/assets/Image.html.a3aa12ef.js"><link rel="prefetch" href="/lanjz/assets/index.html.7ed8829a.js"><link rel="prefetch" href="/lanjz/assets/多列.html.d66467ad.js"><link rel="prefetch" href="/lanjz/assets/换肤.html.77ab2dd1.js"><link rel="prefetch" href="/lanjz/assets/样式实现.html.2e5fb5f2.js"><link rel="prefetch" href="/lanjz/assets/移动端一像素问题.html.230d7486.js"><link rel="prefetch" href="/lanjz/assets/移动端适配方案.html.4cd4ea1c.js"><link rel="prefetch" href="/lanjz/assets/适配iponeX.html.563ed355.js"><link rel="prefetch" href="/lanjz/assets/Class.html.d5066787.js"><link rel="prefetch" href="/lanjz/assets/Class继承.html.3284b20b.js"><link rel="prefetch" href="/lanjz/assets/Generater应用.html.a8f057b5.js"><link rel="prefetch" href="/lanjz/assets/Generator.html.e7f62825.js"><link rel="prefetch" href="/lanjz/assets/Iterator.html.ff7209db.js"><link rel="prefetch" href="/lanjz/assets/Map和WeakMap.html.b5402d76.js"><link rel="prefetch" href="/lanjz/assets/Module.html.b0837532.js"><link rel="prefetch" href="/lanjz/assets/Module的加载实现.html.42f32d7a.js"><link rel="prefetch" href="/lanjz/assets/Promise.html.4a474ed6.js"><link rel="prefetch" href="/lanjz/assets/Proxy.html.9409d332.js"><link rel="prefetch" href="/lanjz/assets/index.html.5daed2b8.js"><link rel="prefetch" href="/lanjz/assets/Set和WeakSet.html.def80cbf.js"><link rel="prefetch" href="/lanjz/assets/Symbol.html.a8874b83.js"><link rel="prefetch" href="/lanjz/assets/async函数.html.dd4085a4.js"><link rel="prefetch" href="/lanjz/assets/函数的扩展.html.8c3912f3.js"><link rel="prefetch" href="/lanjz/assets/对象.html.9c06a429.js"><link rel="prefetch" href="/lanjz/assets/数组.html.a5301ab9.js"><link rel="prefetch" href="/lanjz/assets/装饰器.html.fd47f29c.js"><link rel="prefetch" href="/lanjz/assets/HTML5新特性.html.4442fcec.js"><link rel="prefetch" href="/lanjz/assets/IntersectionObserver.html.2426bf84.js"><link rel="prefetch" href="/lanjz/assets/Preload和Prefetch.html.6ee0d184.js"><link rel="prefetch" href="/lanjz/assets/index.html.abad6a09.js"><link rel="prefetch" href="/lanjz/assets/SVG.html.34aaeb9a.js"><link rel="prefetch" href="/lanjz/assets/Worker.html.41ab2466.js"><link rel="prefetch" href="/lanjz/assets/requestIdleCallback和requestAnimationFrame.html.1bc01557.js"><link rel="prefetch" href="/lanjz/assets/index.html.4d1f381e.js"><link rel="prefetch" href="/lanjz/assets/DOM.html.179ccda9.js"><link rel="prefetch" href="/lanjz/assets/JS基础.html.e8e9ccee.js"><link rel="prefetch" href="/lanjz/assets/JS核心.html.4dbf9523.js"><link rel="prefetch" href="/lanjz/assets/JS面象对象.html.828d7288.js"><link rel="prefetch" href="/lanjz/assets/index.html.b7c117dd.js"><link rel="prefetch" href="/lanjz/assets/事件.html.48962886.js"><link rel="prefetch" href="/lanjz/assets/代码实现.html.6cae1f49.js"><link rel="prefetch" href="/lanjz/assets/全面解析Module模式.html.48c2f1bb.js"><link rel="prefetch" href="/lanjz/assets/函数.html.47d12941.js"><link rel="prefetch" href="/lanjz/assets/吱不吱.html.810ecf86.js"><link rel="prefetch" href="/lanjz/assets/吱不吱二.html.3216c35e.js"><link rel="prefetch" href="/lanjz/assets/对象创建模式.html.9a4f0a4a.js"><link rel="prefetch" href="/lanjz/assets/正则.html.e57517a3.js"><link rel="prefetch" href="/lanjz/assets/编写高质量JavaScript代码的基本要点.html.85bd8616.js"><link rel="prefetch" href="/lanjz/assets/设计模式.html.329d6ec0.js"><link rel="prefetch" href="/lanjz/assets/闭包.html.1342ffa1.js"><link rel="prefetch" href="/lanjz/assets/JSBridge.html.ec55fff0.js"><link rel="prefetch" href="/lanjz/assets/index.html.90af6a22.js"><link rel="prefetch" href="/lanjz/assets/uniapp.html.db681819.js"><link rel="prefetch" href="/lanjz/assets/微信小程序.html.b3c5cd7f.js"><link rel="prefetch" href="/lanjz/assets/Component.html.8b5ef171.js"><link rel="prefetch" href="/lanjz/assets/Diff.html.c7e296fe.js"><link rel="prefetch" href="/lanjz/assets/Fiber.html.3b892a8d.js"><link rel="prefetch" href="/lanjz/assets/Hook.html.1c901608.js"><link rel="prefetch" href="/lanjz/assets/index.html.9c9a352b.js"><link rel="prefetch" href="/lanjz/assets/React-router5.html.b040d14a.js"><link rel="prefetch" href="/lanjz/assets/React.html.d2c350a6.js"><link rel="prefetch" href="/lanjz/assets/React16新特性.html.1ea9b4b8.js"><link rel="prefetch" href="/lanjz/assets/ReactDOM.render.html.3248e3c0.js"><link rel="prefetch" href="/lanjz/assets/React高级指引.html.83b38cac.js"><link rel="prefetch" href="/lanjz/assets/VirtualDom.html.f2d83659.js"><link rel="prefetch" href="/lanjz/assets/vsVue.html.16a4467c.js"><link rel="prefetch" href="/lanjz/assets/吱不吱.html.31e8dfb7.js"><link rel="prefetch" href="/lanjz/assets/性能优化.html.bf8f0bcf.js"><link rel="prefetch" href="/lanjz/assets/时间切片.html.6d20c880.js"><link rel="prefetch" href="/lanjz/assets/更新机制.html.18e13872.js"><link rel="prefetch" href="/lanjz/assets/服务端渲染.html.bb932b52.js"><link rel="prefetch" href="/lanjz/assets/渲染过程.html.7ad0da5f.js"><link rel="prefetch" href="/lanjz/assets/高阶组件.html.4a7ad792.js"><link rel="prefetch" href="/lanjz/assets/_nextTick.html.17ad5448.js"><link rel="prefetch" href="/lanjz/assets/_set.html.9a749b81.js"><link rel="prefetch" href="/lanjz/assets/Computed.html.d470d39c.js"><link rel="prefetch" href="/lanjz/assets/Extend.html.0eab81b2.js"><link rel="prefetch" href="/lanjz/assets/Paas应用.html.65cc3a11.js"><link rel="prefetch" href="/lanjz/assets/PatchNode.html.6d49396b.js"><link rel="prefetch" href="/lanjz/assets/index.html.146c5b21.js"><link rel="prefetch" href="/lanjz/assets/SSR.html.a31e2789.js"><link rel="prefetch" href="/lanjz/assets/VueRouter.html.9be78a92.js"><link rel="prefetch" href="/lanjz/assets/Vuex.html.9a89b28b.js"><link rel="prefetch" href="/lanjz/assets/Vue性能优化.html.8980645a.js"><link rel="prefetch" href="/lanjz/assets/Watch.html.7c4b7d3e.js"><link rel="prefetch" href="/lanjz/assets/Watcher更新顺序.html.c0e2ed8c.js"><link rel="prefetch" href="/lanjz/assets/render.html.b4e3cf2d.js"><link rel="prefetch" href="/lanjz/assets/v-model.html.aaa7ec78.js"><link rel="prefetch" href="/lanjz/assets/共享状态思想.html.22c2dc6a.js"><link rel="prefetch" href="/lanjz/assets/吱不吱.html.e31b73b2.js"><link rel="prefetch" href="/lanjz/assets/响应式原理.html.36f1ceb1.js"><link rel="prefetch" href="/lanjz/assets/数据代理.html.052b591f.js"><link rel="prefetch" href="/lanjz/assets/模板到DOM.html.0ec89fb2.js"><link rel="prefetch" href="/lanjz/assets/组件通信.html.19aa6858.js"><link rel="prefetch" href="/lanjz/assets/Diff.html.c800cedb.js"><link rel="prefetch" href="/lanjz/assets/index.html.83771554.js"><link rel="prefetch" href="/lanjz/assets/SFC还是JSX.html.0710a225.js"><link rel="prefetch" href="/lanjz/assets/V3升级目的.html.ac22a516.js"><link rel="prefetch" href="/lanjz/assets/createApp.html.2700c9c1.js"><link rel="prefetch" href="/lanjz/assets/setup.html.3b84592a.js"><link rel="prefetch" href="/lanjz/assets/watch.html.a4a9525f.js"><link rel="prefetch" href="/lanjz/assets/使用区别.html.4b8c139d.js"><link rel="prefetch" href="/lanjz/assets/响应式API.html.de7c2566.js"><link rel="prefetch" href="/lanjz/assets/响应式原理.html.93184d37.js"><link rel="prefetch" href="/lanjz/assets/预渲染.html.b16f0320.js"><link rel="prefetch" href="/lanjz/assets/CDN.html.b10eebbf.js"><link rel="prefetch" href="/lanjz/assets/Cookie.html.e21d4315.js"><link rel="prefetch" href="/lanjz/assets/Cookie、Session、Token、JWT.html.6e56daf3.js"><link rel="prefetch" href="/lanjz/assets/DNS.html.a02f7f6a.js"><link rel="prefetch" href="/lanjz/assets/HTTPS.html.351ff36e.js"><link rel="prefetch" href="/lanjz/assets/HTTP及演变.html.36bda154.js"><link rel="prefetch" href="/lanjz/assets/index.html.d718f103.js"><link rel="prefetch" href="/lanjz/assets/Socket.html.8507b5e9.js"><link rel="prefetch" href="/lanjz/assets/TCP.html.75c4f896.js"><link rel="prefetch" href="/lanjz/assets/WebSocket.html.e544b13c.js"><link rel="prefetch" href="/lanjz/assets/keep-alive.html.2123c91c.js"><link rel="prefetch" href="/lanjz/assets/浏览器缓存.html.3ea208f2.js"><link rel="prefetch" href="/lanjz/assets/网络层的优化.html.5d6acef7.js"><link rel="prefetch" href="/lanjz/assets/跨域.html.67e2eca7.js"><link rel="prefetch" href="/lanjz/assets/MD.html.8d7390b1.js"><link rel="prefetch" href="/lanjz/assets/index.html.3c6bf490.js"><link rel="prefetch" href="/lanjz/assets/importHtmlEntry.html.3c7b7edb.js"><link rel="prefetch" href="/lanjz/assets/qiankun原理.html.50d4676f.js"><link rel="prefetch" href="/lanjz/assets/微前端.html.5950b6fa.js"><link rel="prefetch" href="/lanjz/assets/index.html.6d2f4e49.js"><link rel="prefetch" href="/lanjz/assets/FE重构.html.50ac7c07.js"><link rel="prefetch" href="/lanjz/assets/Webpack构建优化.html.c5968aee.js"><link rel="prefetch" href="/lanjz/assets/响应式原理分享.html.21c27454.js"><link rel="prefetch" href="/lanjz/assets/评审.html.56330cf3.js"><link rel="prefetch" href="/lanjz/assets/Git.html.1ea43231.js"><link rel="prefetch" href="/lanjz/assets/Mac.html.1f790433.js"><link rel="prefetch" href="/lanjz/assets/index.html.5a9465f4.js"><link rel="prefetch" href="/lanjz/assets/Lighthouse.html.950e3703.js"><link rel="prefetch" href="/lanjz/assets/Spreadjs.html.e158383c.js"><link rel="prefetch" href="/lanjz/assets/公共模块管理.html.5bbe60fe.js"><link rel="prefetch" href="/lanjz/assets/内存泄漏.html.cb9cb7ce.js"><link rel="prefetch" href="/lanjz/assets/前端优化总结.html.b62416e1.js"><link rel="prefetch" href="/lanjz/assets/前端异常捕获.html.0113a7e6.js"><link rel="prefetch" href="/lanjz/assets/开发与调试技巧.html.05cc8eda.js"><link rel="prefetch" href="/lanjz/assets/性能指标.html.58be736b.js"><link rel="prefetch" href="/lanjz/assets/疑难杂症.html.53fef63d.js"><link rel="prefetch" href="/lanjz/assets/组件设计的基本原则.html.92109bfa.js"><link rel="prefetch" href="/lanjz/assets/自动化部署.html.b8d1bbb5.js"><link rel="prefetch" href="/lanjz/assets/重构改善既有代码的设计.html.4713db0f.js"><link rel="prefetch" href="/lanjz/assets/预加载_预解析.html.b2e9bb7e.js"><link rel="prefetch" href="/lanjz/assets/WebStorage.html.b25b4309.js"><link rel="prefetch" href="/lanjz/assets/svgMap.html.7526430f.js"><link rel="prefetch" href="/lanjz/assets/index.html.b38eb0b4.js"><link rel="prefetch" href="/lanjz/assets/README2.html.a8f860cd.js"><link rel="prefetch" href="/lanjz/assets/使用小记.html.ebb1f79b.js"><link rel="prefetch" href="/lanjz/assets/Buffer.html.68574271.js"><link rel="prefetch" href="/lanjz/assets/Node中的进程和线程.html.5f2c4110.js"><link rel="prefetch" href="/lanjz/assets/index.html.a7d0377e.js"><link rel="prefetch" href="/lanjz/assets/流.html.e5b25b1c.js"><link rel="prefetch" href="/lanjz/assets/待看.html.db00ac6f.js"><link rel="prefetch" href="/lanjz/assets/index.html.08a2d093.js"><link rel="prefetch" href="/lanjz/assets/NPM.html.0a0ddb85.js"><link rel="prefetch" href="/lanjz/assets/index.html.7469388e.js"><link rel="prefetch" href="/lanjz/assets/index.html.fd71cdc8.js"><link rel="prefetch" href="/lanjz/assets/Vite是啥.html.4077df82.js"><link rel="prefetch" href="/lanjz/assets/Babel-Loader.html.751d4287.js"><link rel="prefetch" href="/lanjz/assets/Loader.html.08452988.js"><link rel="prefetch" href="/lanjz/assets/ModuleFederation.html.7edc3579.js"><link rel="prefetch" href="/lanjz/assets/Plugin.html.c66afcf9.js"><link rel="prefetch" href="/lanjz/assets/index.html.99934cb8.js"><link rel="prefetch" href="/lanjz/assets/Webpack5新特性.html.0d62d82a.js"><link rel="prefetch" href="/lanjz/assets/css-loader_style-loader.html.782fd342.js"><link rel="prefetch" href="/lanjz/assets/library.html.32a104b6.js"><link rel="prefetch" href="/lanjz/assets/优化实践之Vue-Cli.html.c4455729.js"><link rel="prefetch" href="/lanjz/assets/构建优化方案.html.dc2be1cc.js"><link rel="prefetch" href="/lanjz/assets/配置小记.html.620172ac.js"><link rel="prefetch" href="/lanjz/assets/Node模块.html.e62484b2.js"><link rel="prefetch" href="/lanjz/assets/index.html.91274ec9.js"><link rel="prefetch" href="/lanjz/assets/事件循环.html.27d1fa18.js"><link rel="prefetch" href="/lanjz/assets/内存泄露.html.b8586429.js"><link rel="prefetch" href="/lanjz/assets/吱不吱.html.1ffe7587.js"><link rel="prefetch" href="/lanjz/assets/基础使用.html.f220415b.js"><link rel="prefetch" href="/lanjz/assets/守护服务.html.bec1d5cc.js"><link rel="prefetch" href="/lanjz/assets/进程和线程.html.2649f25f.js"><link rel="prefetch" href="/lanjz/assets/index.html.b9527ad2.js"><link rel="prefetch" href="/lanjz/assets/setState.html.81ebd03a.js"><link rel="prefetch" href="/lanjz/assets/前端规范.html.5150381f.js"><link rel="prefetch" href="/lanjz/assets/项目模板.html.dbde6db7.js"><link rel="prefetch" href="/lanjz/assets/index.html.89b3e48c.js"><link rel="prefetch" href="/lanjz/assets/登录系统.html.3ec4423c.js"><link rel="prefetch" href="/lanjz/assets/页面鉴权.html.8ec3720c.js"><link rel="prefetch" href="/lanjz/assets/code-split.html.332026f9.js"><link rel="prefetch" href="/lanjz/assets/tree-shaking.html.95235b6c.js"><link rel="prefetch" href="/lanjz/assets/模块热替换.html.4181e0d4.js"><link rel="prefetch" href="/lanjz/assets/index.html.24a91ac1.js"><link rel="prefetch" href="/lanjz/assets/404.html.265028f6.js"><link rel="prefetch" href="/lanjz/assets/index.html.d39cf2f6.js"><link rel="prefetch" href="/lanjz/assets/index.html.9990eed6.js"><link rel="prefetch" href="/lanjz/assets/剑指offer二.html.a00429f0.js"><link rel="prefetch" href="/lanjz/assets/动态规划.html.7c984224.js"><link rel="prefetch" href="/lanjz/assets/回文串.html.d7b73762.js"><link rel="prefetch" href="/lanjz/assets/回溯.html.d7dab5c0.js"><link rel="prefetch" href="/lanjz/assets/字节前端.html.d8d2ad84.js"><link rel="prefetch" href="/lanjz/assets/小题.html.36f6a2f0.js"><link rel="prefetch" href="/lanjz/assets/时间_空间复杂度.html.87fc3661.js"><link rel="prefetch" href="/lanjz/assets/树.html.5e172f08.js"><link rel="prefetch" href="/lanjz/assets/简单排序.html.5c6f71c4.js"><link rel="prefetch" href="/lanjz/assets/HTML渲染过程.html.c1f99901.js"><link rel="prefetch" href="/lanjz/assets/index.html.eb39dbac.js"><link rel="prefetch" href="/lanjz/assets/浏览器中的进程与线程.html.3d0deb60.js"><link rel="prefetch" href="/lanjz/assets/BFC和IFC.html.f96c53cb.js"><link rel="prefetch" href="/lanjz/assets/CSS3新特性.html.17d4af96.js"><link rel="prefetch" href="/lanjz/assets/Flex.html.f8f06f60.js"><link rel="prefetch" href="/lanjz/assets/Image.html.984f0bcf.js"><link rel="prefetch" href="/lanjz/assets/index.html.70aa0cbc.js"><link rel="prefetch" href="/lanjz/assets/多列.html.b7ab44b1.js"><link rel="prefetch" href="/lanjz/assets/换肤.html.baf523c1.js"><link rel="prefetch" href="/lanjz/assets/样式实现.html.e65a1ebe.js"><link rel="prefetch" href="/lanjz/assets/移动端一像素问题.html.5dfa0df8.js"><link rel="prefetch" href="/lanjz/assets/移动端适配方案.html.b29aa174.js"><link rel="prefetch" href="/lanjz/assets/适配iponeX.html.6cf4f316.js"><link rel="prefetch" href="/lanjz/assets/Class.html.ece37b41.js"><link rel="prefetch" href="/lanjz/assets/Class继承.html.ccc74de6.js"><link rel="prefetch" href="/lanjz/assets/Generater应用.html.f7815647.js"><link rel="prefetch" href="/lanjz/assets/Generator.html.dd8dd7d0.js"><link rel="prefetch" href="/lanjz/assets/Iterator.html.44611a1e.js"><link rel="prefetch" href="/lanjz/assets/Map和WeakMap.html.4612e970.js"><link rel="prefetch" href="/lanjz/assets/Module.html.c37f0045.js"><link rel="prefetch" href="/lanjz/assets/Module的加载实现.html.7a55f7f4.js"><link rel="prefetch" href="/lanjz/assets/Promise.html.0738b3eb.js"><link rel="prefetch" href="/lanjz/assets/Proxy.html.ce4b6230.js"><link rel="prefetch" href="/lanjz/assets/index.html.3f78a4e6.js"><link rel="prefetch" href="/lanjz/assets/Set和WeakSet.html.5399fb22.js"><link rel="prefetch" href="/lanjz/assets/Symbol.html.5bd94454.js"><link rel="prefetch" href="/lanjz/assets/async函数.html.595392e3.js"><link rel="prefetch" href="/lanjz/assets/函数的扩展.html.b1c8320c.js"><link rel="prefetch" href="/lanjz/assets/对象.html.c4a73cbd.js"><link rel="prefetch" href="/lanjz/assets/数组.html.dc84aeac.js"><link rel="prefetch" href="/lanjz/assets/装饰器.html.482fcf55.js"><link rel="prefetch" href="/lanjz/assets/HTML5新特性.html.21f41800.js"><link rel="prefetch" href="/lanjz/assets/IntersectionObserver.html.38133142.js"><link rel="prefetch" href="/lanjz/assets/Preload和Prefetch.html.0c72fd39.js"><link rel="prefetch" href="/lanjz/assets/index.html.fed2b053.js"><link rel="prefetch" href="/lanjz/assets/SVG.html.60a0a1ba.js"><link rel="prefetch" href="/lanjz/assets/Worker.html.508f8b62.js"><link rel="prefetch" href="/lanjz/assets/requestIdleCallback和requestAnimationFrame.html.53ea404f.js"><link rel="prefetch" href="/lanjz/assets/index.html.1978280b.js"><link rel="prefetch" href="/lanjz/assets/DOM.html.6328bb99.js"><link rel="prefetch" href="/lanjz/assets/JS基础.html.aefcb7b0.js"><link rel="prefetch" href="/lanjz/assets/JS核心.html.5cbcbab7.js"><link rel="prefetch" href="/lanjz/assets/JS面象对象.html.5ad8549d.js"><link rel="prefetch" href="/lanjz/assets/index.html.336aaee0.js"><link rel="prefetch" href="/lanjz/assets/事件.html.1713e426.js"><link rel="prefetch" href="/lanjz/assets/代码实现.html.45af3f47.js"><link rel="prefetch" href="/lanjz/assets/全面解析Module模式.html.1a237e2f.js"><link rel="prefetch" href="/lanjz/assets/函数.html.35a0720a.js"><link rel="prefetch" href="/lanjz/assets/吱不吱.html.ac2b5f26.js"><link rel="prefetch" href="/lanjz/assets/吱不吱二.html.499e27db.js"><link rel="prefetch" href="/lanjz/assets/对象创建模式.html.df54cd9e.js"><link rel="prefetch" href="/lanjz/assets/正则.html.edbd6beb.js"><link rel="prefetch" href="/lanjz/assets/编写高质量JavaScript代码的基本要点.html.e2e5568a.js"><link rel="prefetch" href="/lanjz/assets/设计模式.html.b97da1a2.js"><link rel="prefetch" href="/lanjz/assets/闭包.html.df4d6223.js"><link rel="prefetch" href="/lanjz/assets/JSBridge.html.3c580778.js"><link rel="prefetch" href="/lanjz/assets/index.html.d3b64953.js"><link rel="prefetch" href="/lanjz/assets/uniapp.html.b72ec080.js"><link rel="prefetch" href="/lanjz/assets/微信小程序.html.104bcfea.js"><link rel="prefetch" href="/lanjz/assets/Component.html.d6e932c9.js"><link rel="prefetch" href="/lanjz/assets/Diff.html.62c44244.js"><link rel="prefetch" href="/lanjz/assets/Fiber.html.02fa89b7.js"><link rel="prefetch" href="/lanjz/assets/Hook.html.05b5dadf.js"><link rel="prefetch" href="/lanjz/assets/index.html.5f098c5a.js"><link rel="prefetch" href="/lanjz/assets/React-router5.html.0575973f.js"><link rel="prefetch" href="/lanjz/assets/React.html.e215d93d.js"><link rel="prefetch" href="/lanjz/assets/React16新特性.html.55b9fed7.js"><link rel="prefetch" href="/lanjz/assets/ReactDOM.render.html.ce621c18.js"><link rel="prefetch" href="/lanjz/assets/React高级指引.html.485a9eef.js"><link rel="prefetch" href="/lanjz/assets/VirtualDom.html.dfff6dac.js"><link rel="prefetch" href="/lanjz/assets/vsVue.html.91ce7d12.js"><link rel="prefetch" href="/lanjz/assets/吱不吱.html.3edf3495.js"><link rel="prefetch" href="/lanjz/assets/性能优化.html.a8026495.js"><link rel="prefetch" href="/lanjz/assets/时间切片.html.0cd1d87b.js"><link rel="prefetch" href="/lanjz/assets/更新机制.html.bfef3233.js"><link rel="prefetch" href="/lanjz/assets/服务端渲染.html.64263ce2.js"><link rel="prefetch" href="/lanjz/assets/渲染过程.html.e1b11ca9.js"><link rel="prefetch" href="/lanjz/assets/高阶组件.html.bed5864a.js"><link rel="prefetch" href="/lanjz/assets/_nextTick.html.21309b0d.js"><link rel="prefetch" href="/lanjz/assets/_set.html.6f7fd030.js"><link rel="prefetch" href="/lanjz/assets/Computed.html.ed701280.js"><link rel="prefetch" href="/lanjz/assets/Extend.html.999891d4.js"><link rel="prefetch" href="/lanjz/assets/Paas应用.html.3a583303.js"><link rel="prefetch" href="/lanjz/assets/PatchNode.html.dbc55da9.js"><link rel="prefetch" href="/lanjz/assets/index.html.2b5c545d.js"><link rel="prefetch" href="/lanjz/assets/SSR.html.7bf95060.js"><link rel="prefetch" href="/lanjz/assets/VueRouter.html.3f489fd6.js"><link rel="prefetch" href="/lanjz/assets/Vuex.html.daab7949.js"><link rel="prefetch" href="/lanjz/assets/Vue性能优化.html.027abcf5.js"><link rel="prefetch" href="/lanjz/assets/Watch.html.6c169b93.js"><link rel="prefetch" href="/lanjz/assets/Watcher更新顺序.html.56fff66d.js"><link rel="prefetch" href="/lanjz/assets/render.html.9f74d607.js"><link rel="prefetch" href="/lanjz/assets/v-model.html.9e77b355.js"><link rel="prefetch" href="/lanjz/assets/共享状态思想.html.f2fbe082.js"><link rel="prefetch" href="/lanjz/assets/吱不吱.html.58ae8ec9.js"><link rel="prefetch" href="/lanjz/assets/响应式原理.html.1f77f2d4.js"><link rel="prefetch" href="/lanjz/assets/数据代理.html.0838a9f1.js"><link rel="prefetch" href="/lanjz/assets/模板到DOM.html.b23c8c60.js"><link rel="prefetch" href="/lanjz/assets/组件通信.html.44b63e5c.js"><link rel="prefetch" href="/lanjz/assets/Diff.html.b163e023.js"><link rel="prefetch" href="/lanjz/assets/index.html.c9cb519a.js"><link rel="prefetch" href="/lanjz/assets/SFC还是JSX.html.ba077743.js"><link rel="prefetch" href="/lanjz/assets/V3升级目的.html.c2c1a8fe.js"><link rel="prefetch" href="/lanjz/assets/createApp.html.71482b7c.js"><link rel="prefetch" href="/lanjz/assets/setup.html.b4a66dda.js"><link rel="prefetch" href="/lanjz/assets/watch.html.9b741917.js"><link rel="prefetch" href="/lanjz/assets/使用区别.html.40de2113.js"><link rel="prefetch" href="/lanjz/assets/响应式API.html.99b7cd46.js"><link rel="prefetch" href="/lanjz/assets/响应式原理.html.65f4a16b.js"><link rel="prefetch" href="/lanjz/assets/预渲染.html.c8a9b9cb.js"><link rel="prefetch" href="/lanjz/assets/CDN.html.7eca7d02.js"><link rel="prefetch" href="/lanjz/assets/Cookie.html.af5293d4.js"><link rel="prefetch" href="/lanjz/assets/Cookie、Session、Token、JWT.html.0f053839.js"><link rel="prefetch" href="/lanjz/assets/DNS.html.2e7b6e25.js"><link rel="prefetch" href="/lanjz/assets/HTTPS.html.0c087366.js"><link rel="prefetch" href="/lanjz/assets/HTTP及演变.html.8627d628.js"><link rel="prefetch" href="/lanjz/assets/index.html.84359128.js"><link rel="prefetch" href="/lanjz/assets/Socket.html.4ae40e39.js"><link rel="prefetch" href="/lanjz/assets/TCP.html.8b18d78f.js"><link rel="prefetch" href="/lanjz/assets/WebSocket.html.3ec0601b.js"><link rel="prefetch" href="/lanjz/assets/keep-alive.html.1582551a.js"><link rel="prefetch" href="/lanjz/assets/浏览器缓存.html.6d25e5e4.js"><link rel="prefetch" href="/lanjz/assets/网络层的优化.html.5e25e356.js"><link rel="prefetch" href="/lanjz/assets/跨域.html.a98d896c.js"><link rel="prefetch" href="/lanjz/assets/MD.html.b4cd4011.js"><link rel="prefetch" href="/lanjz/assets/index.html.5858153e.js"><link rel="prefetch" href="/lanjz/assets/importHtmlEntry.html.9603094c.js"><link rel="prefetch" href="/lanjz/assets/qiankun原理.html.32f4ce98.js"><link rel="prefetch" href="/lanjz/assets/微前端.html.856123c7.js"><link rel="prefetch" href="/lanjz/assets/index.html.76e0cf60.js"><link rel="prefetch" href="/lanjz/assets/FE重构.html.8d505ae5.js"><link rel="prefetch" href="/lanjz/assets/Webpack构建优化.html.dda61470.js"><link rel="prefetch" href="/lanjz/assets/响应式原理分享.html.badb06f1.js"><link rel="prefetch" href="/lanjz/assets/评审.html.4fb095dd.js"><link rel="prefetch" href="/lanjz/assets/Git.html.7e4a91ac.js"><link rel="prefetch" href="/lanjz/assets/Mac.html.f73572df.js"><link rel="prefetch" href="/lanjz/assets/index.html.e743c882.js"><link rel="prefetch" href="/lanjz/assets/Lighthouse.html.1b835721.js"><link rel="prefetch" href="/lanjz/assets/Spreadjs.html.59ae7d08.js"><link rel="prefetch" href="/lanjz/assets/公共模块管理.html.737f34f6.js"><link rel="prefetch" href="/lanjz/assets/内存泄漏.html.4ca17ca7.js"><link rel="prefetch" href="/lanjz/assets/前端优化总结.html.4b57ffba.js"><link rel="prefetch" href="/lanjz/assets/前端异常捕获.html.a17af805.js"><link rel="prefetch" href="/lanjz/assets/开发与调试技巧.html.ced1b2c9.js"><link rel="prefetch" href="/lanjz/assets/性能指标.html.41f30aca.js"><link rel="prefetch" href="/lanjz/assets/疑难杂症.html.66bc0b35.js"><link rel="prefetch" href="/lanjz/assets/组件设计的基本原则.html.88f57c45.js"><link rel="prefetch" href="/lanjz/assets/自动化部署.html.fb347f4a.js"><link rel="prefetch" href="/lanjz/assets/重构改善既有代码的设计.html.bfa829c2.js"><link rel="prefetch" href="/lanjz/assets/预加载_预解析.html.32d8842d.js"><link rel="prefetch" href="/lanjz/assets/WebStorage.html.0c7c6624.js"><link rel="prefetch" href="/lanjz/assets/svgMap.html.ba5f5a08.js"><link rel="prefetch" href="/lanjz/assets/index.html.f0861d93.js"><link rel="prefetch" href="/lanjz/assets/README2.html.0ea98ec0.js"><link rel="prefetch" href="/lanjz/assets/使用小记.html.174138f1.js"><link rel="prefetch" href="/lanjz/assets/Buffer.html.d3fc0843.js"><link rel="prefetch" href="/lanjz/assets/Node中的进程和线程.html.b92b4a96.js"><link rel="prefetch" href="/lanjz/assets/index.html.7e360a19.js"><link rel="prefetch" href="/lanjz/assets/流.html.fa158e56.js"><link rel="prefetch" href="/lanjz/assets/待看.html.76a7e7c2.js"><link rel="prefetch" href="/lanjz/assets/index.html.a46b6e61.js"><link rel="prefetch" href="/lanjz/assets/NPM.html.ca8a15c2.js"><link rel="prefetch" href="/lanjz/assets/index.html.9b67dc9d.js"><link rel="prefetch" href="/lanjz/assets/index.html.2fbeaf03.js"><link rel="prefetch" href="/lanjz/assets/Vite是啥.html.bb1eef82.js"><link rel="prefetch" href="/lanjz/assets/Babel-Loader.html.f3cf3b6b.js"><link rel="prefetch" href="/lanjz/assets/Loader.html.f9bee4b0.js"><link rel="prefetch" href="/lanjz/assets/ModuleFederation.html.d611b2d7.js"><link rel="prefetch" href="/lanjz/assets/Plugin.html.a6517278.js"><link rel="prefetch" href="/lanjz/assets/index.html.d74cdc7a.js"><link rel="prefetch" href="/lanjz/assets/Webpack5新特性.html.62fcbcbf.js"><link rel="prefetch" href="/lanjz/assets/css-loader_style-loader.html.14b1ea24.js"><link rel="prefetch" href="/lanjz/assets/library.html.8639cced.js"><link rel="prefetch" href="/lanjz/assets/优化实践之Vue-Cli.html.72ca5ba9.js"><link rel="prefetch" href="/lanjz/assets/构建优化方案.html.41542773.js"><link rel="prefetch" href="/lanjz/assets/配置小记.html.c08b8eab.js"><link rel="prefetch" href="/lanjz/assets/Node模块.html.ec191065.js"><link rel="prefetch" href="/lanjz/assets/index.html.ad8709e7.js"><link rel="prefetch" href="/lanjz/assets/事件循环.html.888df593.js"><link rel="prefetch" href="/lanjz/assets/内存泄露.html.6befa673.js"><link rel="prefetch" href="/lanjz/assets/吱不吱.html.967a55bf.js"><link rel="prefetch" href="/lanjz/assets/基础使用.html.64385335.js"><link rel="prefetch" href="/lanjz/assets/守护服务.html.b10769ac.js"><link rel="prefetch" href="/lanjz/assets/进程和线程.html.d457735b.js"><link rel="prefetch" href="/lanjz/assets/index.html.f0264bef.js"><link rel="prefetch" href="/lanjz/assets/setState.html.c3e034a1.js"><link rel="prefetch" href="/lanjz/assets/前端规范.html.6218826e.js"><link rel="prefetch" href="/lanjz/assets/项目模板.html.52f28829.js"><link rel="prefetch" href="/lanjz/assets/index.html.5cc133a2.js"><link rel="prefetch" href="/lanjz/assets/登录系统.html.0e26984b.js"><link rel="prefetch" href="/lanjz/assets/页面鉴权.html.84bfcfa2.js"><link rel="prefetch" href="/lanjz/assets/code-split.html.7be96d84.js"><link rel="prefetch" href="/lanjz/assets/tree-shaking.html.80ab9a73.js"><link rel="prefetch" href="/lanjz/assets/模块热替换.html.e0a6f111.js"><link rel="prefetch" href="/lanjz/assets/index.html.e5ec3fd7.js"><link rel="prefetch" href="/lanjz/assets/404.html.1363ac74.js"><link rel="prefetch" href="/lanjz/assets/404.c8b80059.js"><link rel="prefetch" href="/lanjz/assets/Layout.ffb00737.js"><link rel="prefetch" href="/lanjz/assets/Home.b0f84abc.js"><link rel="prefetch" href="/lanjz/assets/My.4ee47251.js"><link rel="prefetch" href="/lanjz/assets/NavSvg.75f8acd4.js"><link rel="prefetch" href="/lanjz/assets/Resume.049b26bb.js">
    <link rel="stylesheet" href="/lanjz/assets/style.61c61bbb.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container no-sidebar"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/lanjz/" class=""><!----><span class="site-name">LLL Blog</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/lanjz/" class="" aria-label="Home"><!--[--><!--]--> Home <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="前端基础"><span class="title">前端基础</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="前端基础"><span class="title">前端基础</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/lanjz/JavaScript/" class="" aria-label="JavaScript"><!--[--><!--]--> JavaScript <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/ES6/" class="" aria-label="ES6"><!--[--><!--]--> ES6 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/HTML5/" class="" aria-label="HTML5"><!--[--><!--]--> HTML5 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/CSS/" class="" aria-label="CSS"><!--[--><!--]--> CSS <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/Browser/" class="" aria-label="Browser"><!--[--><!--]--> Browser <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="网络&amp;算法"><span class="title">网络&amp;算法</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="网络&amp;算法"><span class="title">网络&amp;算法</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/lanjz/network/" class="" aria-label="网络"><!--[--><!--]--> 网络 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/Algorithm/" class="" aria-label="算法"><!--[--><!--]--> 算法 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/secure/" class="" aria-label="Web安全"><!--[--><!--]--> Web安全 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="框架"><span class="title">框架</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="框架"><span class="title">框架</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/lanjz/Vue/" class="" aria-label="Vue"><!--[--><!--]--> Vue <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/Vue3/" class="" aria-label="Vue3"><!--[--><!--]--> Vue3 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/React/" class="" aria-label="React"><!--[--><!--]--> React <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/qiankun/" class="" aria-label="qiankun"><!--[--><!--]--> qiankun <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/NA/" class="" aria-label="跨平台"><!--[--><!--]--> 跨平台 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Node"><span class="title">Node</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Node"><span class="title">Node</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/lanjz/Node/基础/" class="" aria-label="基础"><!--[--><!--]--> 基础 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/Node/Api/" class="" aria-label="API"><!--[--><!--]--> API <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/Node/Package/" class="" aria-label="yarn&amp;npm"><!--[--><!--]--> yarn&amp;npm <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/Node/Webpack/" class="" aria-label="Webpack"><!--[--><!--]--> Webpack <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/Node/Vite/" class="" aria-label="Vite"><!--[--><!--]--> Vite <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/Node/ESBuild/" class="" aria-label="esbuild"><!--[--><!--]--> esbuild <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/Node/数据库/" class="" aria-label="SQL"><!--[--><!--]--> SQL <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="工程化"><span class="title">工程化</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="工程化"><span class="title">工程化</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/lanjz/工程化/前端优化总结.md" class="" aria-label="前端优化总结"><!--[--><!--]--> 前端优化总结 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/工程化/系统设计/" class="" aria-label="系统设计"><!--[--><!--]--> 系统设计 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/工程化/预加载&amp;预解析.md" class="" aria-label="预加载&amp;预解析"><!--[--><!--]--> 预加载&amp;预解析 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/工程化/重构改善既有代码的设计.md" class="" aria-label="重构代码原则"><!--[--><!--]--> 重构代码原则 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/工程化/开发与调试技巧.md" class="" aria-label="开发与调试"><!--[--><!--]--> 开发与调试 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/工程化/组件设计的基本原则.md" class="" aria-label="组件设计"><!--[--><!--]--> 组件设计 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/工程化/公共模块管理.md" class="" aria-label="公共模块管理"><!--[--><!--]--> 公共模块管理 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/工程化/内存泄漏.md" class="" aria-label="内存泄漏"><!--[--><!--]--> 内存泄漏 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/工程化/前端异常捕获.md" class="" aria-label="前端异常捕获"><!--[--><!--]--> 前端异常捕获 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/工程化/自动化部署.md" class="" aria-label="自动化部署"><!--[--><!--]--> 自动化部署 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/工程化/疑难杂症.md" class="" aria-label="问题小计"><!--[--><!--]--> 问题小计 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/工程化/性能指标.md" class="" aria-label="性能指标"><!--[--><!--]--> 性能指标 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/工程化/Lighthouse.md" class="" aria-label="Lighthouse"><!--[--><!--]--> Lighthouse <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/工程化/前端规范/" class="" aria-label="规范"><!--[--><!--]--> 规范 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/工程化/前端规范/前端规范.md" class="" aria-label="前端规范"><!--[--><!--]--> 前端规范 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/工程化/前端规范/项目模板.md" class="" aria-label="项目模板"><!--[--><!--]--> 项目模板 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="利其器"><span class="title">利其器</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="利其器"><span class="title">利其器</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/lanjz/利其器/Mac.md" class="" aria-label="Mac"><!--[--><!--]--> Mac <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/利其器/Git.md" class="" aria-label="Git"><!--[--><!--]--> Git <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="小工具"><span class="title">小工具</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="小工具"><span class="title">小工具</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/lanjz/online-tools/MD.md" class="" aria-label="MD"><!--[--><!--]--> MD <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a href="/lanjz/Im/" class="" aria-label="关于我"><!--[--><!--]--> 关于我 <!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/lanjz/" class="" aria-label="Home"><!--[--><!--]--> Home <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="前端基础"><span class="title">前端基础</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="前端基础"><span class="title">前端基础</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/lanjz/JavaScript/" class="" aria-label="JavaScript"><!--[--><!--]--> JavaScript <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/ES6/" class="" aria-label="ES6"><!--[--><!--]--> ES6 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/HTML5/" class="" aria-label="HTML5"><!--[--><!--]--> HTML5 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/CSS/" class="" aria-label="CSS"><!--[--><!--]--> CSS <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/Browser/" class="" aria-label="Browser"><!--[--><!--]--> Browser <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="网络&amp;算法"><span class="title">网络&amp;算法</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="网络&amp;算法"><span class="title">网络&amp;算法</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/lanjz/network/" class="" aria-label="网络"><!--[--><!--]--> 网络 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/Algorithm/" class="" aria-label="算法"><!--[--><!--]--> 算法 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/secure/" class="" aria-label="Web安全"><!--[--><!--]--> Web安全 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="框架"><span class="title">框架</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="框架"><span class="title">框架</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/lanjz/Vue/" class="" aria-label="Vue"><!--[--><!--]--> Vue <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/Vue3/" class="" aria-label="Vue3"><!--[--><!--]--> Vue3 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/React/" class="" aria-label="React"><!--[--><!--]--> React <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/qiankun/" class="" aria-label="qiankun"><!--[--><!--]--> qiankun <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/NA/" class="" aria-label="跨平台"><!--[--><!--]--> 跨平台 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Node"><span class="title">Node</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Node"><span class="title">Node</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/lanjz/Node/基础/" class="" aria-label="基础"><!--[--><!--]--> 基础 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/Node/Api/" class="" aria-label="API"><!--[--><!--]--> API <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/Node/Package/" class="" aria-label="yarn&amp;npm"><!--[--><!--]--> yarn&amp;npm <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/Node/Webpack/" class="" aria-label="Webpack"><!--[--><!--]--> Webpack <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/Node/Vite/" class="" aria-label="Vite"><!--[--><!--]--> Vite <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/Node/ESBuild/" class="" aria-label="esbuild"><!--[--><!--]--> esbuild <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/Node/数据库/" class="" aria-label="SQL"><!--[--><!--]--> SQL <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="工程化"><span class="title">工程化</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="工程化"><span class="title">工程化</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/lanjz/工程化/前端优化总结.md" class="" aria-label="前端优化总结"><!--[--><!--]--> 前端优化总结 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/工程化/系统设计/" class="" aria-label="系统设计"><!--[--><!--]--> 系统设计 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/工程化/预加载&amp;预解析.md" class="" aria-label="预加载&amp;预解析"><!--[--><!--]--> 预加载&amp;预解析 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/工程化/重构改善既有代码的设计.md" class="" aria-label="重构代码原则"><!--[--><!--]--> 重构代码原则 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/工程化/开发与调试技巧.md" class="" aria-label="开发与调试"><!--[--><!--]--> 开发与调试 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/工程化/组件设计的基本原则.md" class="" aria-label="组件设计"><!--[--><!--]--> 组件设计 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/工程化/公共模块管理.md" class="" aria-label="公共模块管理"><!--[--><!--]--> 公共模块管理 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/工程化/内存泄漏.md" class="" aria-label="内存泄漏"><!--[--><!--]--> 内存泄漏 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/工程化/前端异常捕获.md" class="" aria-label="前端异常捕获"><!--[--><!--]--> 前端异常捕获 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/工程化/自动化部署.md" class="" aria-label="自动化部署"><!--[--><!--]--> 自动化部署 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/工程化/疑难杂症.md" class="" aria-label="问题小计"><!--[--><!--]--> 问题小计 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/工程化/性能指标.md" class="" aria-label="性能指标"><!--[--><!--]--> 性能指标 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/工程化/Lighthouse.md" class="" aria-label="Lighthouse"><!--[--><!--]--> Lighthouse <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/工程化/前端规范/" class="" aria-label="规范"><!--[--><!--]--> 规范 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/工程化/前端规范/前端规范.md" class="" aria-label="前端规范"><!--[--><!--]--> 前端规范 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/工程化/前端规范/项目模板.md" class="" aria-label="项目模板"><!--[--><!--]--> 项目模板 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="利其器"><span class="title">利其器</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="利其器"><span class="title">利其器</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/lanjz/利其器/Mac.md" class="" aria-label="Mac"><!--[--><!--]--> Mac <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/lanjz/利其器/Git.md" class="" aria-label="Git"><!--[--><!--]--> Git <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="小工具"><span class="title">小工具</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="小工具"><span class="title">小工具</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/lanjz/online-tools/MD.md" class="" aria-label="MD"><!--[--><!--]--> MD <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a href="/lanjz/Im/" class="" aria-label="关于我"><!--[--><!--]--> 关于我 <!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><!----><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="认识node" tabindex="-1"><a class="header-anchor" href="#认识node" aria-hidden="true">#</a> 认识Node</h1><p>作为一个异步事件驱动的 JavaScript 运行时，Node.js 被设计用来构建可扩展的网络应用，同时使用了一个非阻塞式I/O 的模型，使其轻量又高效</p><p>这里出现了两个关键词：事件驱动和非阻塞式I/O，所以要认识 Node 得先理解这两个是什么意思</p><h2 id="事件驱动" tabindex="-1"><a class="header-anchor" href="#事件驱动" aria-hidden="true">#</a> 事件驱动</h2><p>事件驱动是一种编程模型，编程模型是指操作系统在处理 IO 时所采用的方式，这通常是为了解决 IO 速度比较慢的问题而诞生的</p><p>事件驱动模型无需为每一个请求创建额外的线程，事件驱动编程是使用协作式处理任务，而不是多线程的抢占式。它的特点是包含一个事件循环，当外部事件发生时使用回调机制来触发相应的处理</p><p>我们把每一个 I/O 任务都当作是一个事件，在事件驱动模型中，每一个I/O操作都会被添加到事件队列中，主线程循环地处理队列上的工作任务，当执行过程中遇到阻塞（读取文件、查询数据库）时，线程不会停下来等待结果，而是继续执行队列中的下一个任务。当阻塞的事件完成时会将回调添加到事件队列中，待下一次事件循环中将取出执行</p><p>为了更好理解事件驱动模型，顺便了解一下其它的编程模型</p><h3 id="其它编程模型" tabindex="-1"><a class="header-anchor" href="#其它编程模型" aria-hidden="true">#</a> 其它编程模型</h3><p>除了上面讲的事件驱动编程模型，还有同步式模型，多进程模型，多线程模型</p><h4 id="同步式模型" tabindex="-1"><a class="header-anchor" href="#同步式模型" aria-hidden="true">#</a> 同步式模型</h4><p>同步式模型就是每次值处理一个请求，迭代地将所有请求处理完毕。无并发可言，处理效率当然很低</p><h4 id="多进程模型" tabindex="-1"><a class="header-anchor" href="#多进程模型" aria-hidden="true">#</a> 多进程模型</h4><p>每收到一个用户请求，就开启一个进程去处理</p><p><strong>优点</strong></p><ul><li><p>每个进程互相独立，子进程崩溃没关系</p></li><li><p>通过增加CPU，就可以容易扩充性能</p></li><li><p>充分利用系统资源</p></li></ul><p><strong>缺点</strong></p><ul><li><p>各个进程地址空间相互隔离，这一优点也会变成缺点，那就是进程间要想通信就会变得比较困难</p></li><li><p>进程开销是比线程要大的，频繁的创建销毁进程无疑会加重系统负担。</p></li></ul><h4 id="多线程模型" tabindex="-1"><a class="header-anchor" href="#多线程模型" aria-hidden="true">#</a> 多线程模型</h4><p>每个用户请求，开一个线程去处理。由于线程共享进程地址空间，因此线程间通信天然不需要借助任何通信机制，直接读取内存就好了</p><p><strong>优点</strong></p><ul><li><p>为每个请求创建一个线程，即使一个线程因执行I/O操作——比如读取数据库等——被阻塞暂停运行也不会影响到其它线程</p></li><li><p>所有线程可以直接共享内存和变量等</p></li><li><p>线程方式消耗的总资源比进程方式好</p></li></ul><p><strong>缺点</strong></p><ul><li><p>线程之间的同步和加锁控制比较麻烦</p></li><li><p>一个线程的崩溃可能影响到整个程序的稳定性</p></li><li><p>虽然线程创建开销相比进程小，但依然也是有开销的</p></li></ul><h2 id="非阻塞i-o" tabindex="-1"><a class="header-anchor" href="#非阻塞i-o" aria-hidden="true">#</a> 非阻塞I/O</h2><p>Node 在 I/O 操作方面性能是十分高效的，因为 Node 使用的是：异步+非阻塞I/O操作。那么到底怎么理解异步+非阻塞？异步跟非阻塞感觉像是同一个意思，具体怎么区分？</p><h3 id="什么是-i-o-操作" tabindex="-1"><a class="header-anchor" href="#什么是-i-o-操作" aria-hidden="true">#</a> 什么是 I/O 操作</h3><p>首先所谓的阻塞/非阻塞通常是针对 I/O 操作的，所以得先明白什么是 I/O 操作? 输入/输出（I/O）是在内存和外部设备（如磁盘，终端和网络）之间复制数据的过程。不仅仅是文件读写，包括键盘输入，网络请求等都属于 I/O 操作</p><p>以读取文件为例，一个完整的 I/O 操作包括：系统内核完成磁盘寻道 -&gt; 读取数据 -&gt; 复制数据到内存这些步聚</p><p><strong>在Node中，I/O特指 Node 程序在 Libuv 支持下与系统磁盘和网络交互的过程</strong></p><p>如何进行 I/O 操作，整体分为阻塞型 I/O 和非阻塞型 I/O 两种</p><h3 id="阻塞-非阻塞" tabindex="-1"><a class="header-anchor" href="#阻塞-非阻塞" aria-hidden="true">#</a> 阻塞/非阻塞</h3><p><strong>阻塞型 I/O</strong>是指在调用 I/O 操作后，应用程序需要等待 I/O 完成并返回结果，然后才能进行之后的其它任务</p><p><strong>非阻塞I/O</strong>则是调用I/O 操作后，不用等待结果直接返回。但是不带结果返回的话应用程序怎么获取结果呢？此时就需要通过类似轮循的方式不断得去读取 I/O 操作是否有结果</p><p>所以到目前为止所谓的非阻塞 I/O 并不理想，因为执行这种非阻塞 I/O 后，虽然 CPU 的时间片可以用来处理其他事务提高了性能，但是仍需要不断得轮循，这会造成 CPU 浪费。我们期望是理想操作是发起 I/O 操作后无须通过遍历或者事件唤醒等方式轮询，可以直接处理下一个任务，只需在 I/O 完成后通过信号或回调将数据传递给应用程序即可，如下面示意图</p><p><img src="/lanjz/assets/renshi-3.0a68a3f6.jpeg" alt=""></p><h3 id="异步-非阻塞" tabindex="-1"><a class="header-anchor" href="#异步-非阻塞" aria-hidden="true">#</a> 异步+非阻塞</h3><p>前面主要是从单线程场景考虑这很难达到理想的 I/O 操作，但如果是多线程就可以。通过让部分线程进行阻塞 I/O 或非阻塞I/O + 轮询技术来完成数据获取，让一个线程进行计算处理，通过线程之间的通信将 I/O 得到的数据进行传递，这就实现我们想要的 I/O 操作，也就是<strong>异步I/O 操作</strong></p><p>Node 的异步非阻塞 I/O 就是这么个意思了，通过多线程来执行非阻塞I/O来达到高效的 I/O 处理。所以说 Node 其实是多线程的，平时说的单线程是指我们的 JS 代码执行在单线程中</p><p>上文提到 Node 底层仍是利用了多线程进行 I/O 处理，多线程的实现根据平台不同有各自的实现方法。在 *nix 平台下 Node 使用自定义的线程池来实现 异步I/O 操作，在Window 平台下使用其自有 IOCP 来实现I/O 。因此为了解决平台的兼容差异问题，所以 Node 提供了 libuv 作为抽象封装层，所有平台兼容性的判断都由这一层完成</p><h3 id="异步i-o的过程" tabindex="-1"><a class="header-anchor" href="#异步i-o的过程" aria-hidden="true">#</a> 异步I/O的过程</h3><p>完成整个异步I/O 操作需要事件循环，观察者，请求对象和线程池等配合完成</p><p><strong>事件循环</strong></p><p>类似浏览器中的事件循环，每一次循环都会查找是否有完成的事件，有的话就取出执行，事件循环怎么查找呢？从观察者队列中查找</p><p><strong>观察者</strong></p><p>观察者的作用就是观察，观察啥？观察是否有完成的 I/O 事件，观察者根据 I/O 类型也分成：文件I/O 观察者，网络I/O 观察者等，在每一次的事件循环中，观察都会通过API获取是否有完成的I/O事件，有的话就添加的自己的观察者队列中</p><p><strong>请求对象</strong></p><p>JS执行 I/O操作 时实际上是通过底层的 libuv 进行系统调用的，此时 libuv 会创建一个请求对象，我们要执行的方法，参数和回调都会包装在这个请求对象中，然后将这个请求推入到线程池，等待线程池处理</p><p><strong>线程池</strong></p><p>上面提到了包装完请求对象后就会推入线程池，交于线程池来执行具体的I/O操作</p><h4 id="粟子" tabindex="-1"><a class="header-anchor" href="#粟子" aria-hidden="true">#</a> 粟子</h4><p>接下来通过 <code>fs.open()</code> 方法来概述一下 Node 和底层之间是如何执行异步 I/O 的</p><ol><li><p>JS 调用 Node 的核心模块执行 <code>open()</code> 方法，即 <code>fs.open()</code> 方法</p></li><li><p>核心模块内部调用 C++ 内建模块</p></li><li><p>内建模块通过 libuv 进行系统调用</p><p>libuv 作为封装层，有两个平台的实现，无论怎样实际上是调用了 <code>uv_fs_open()</code> 方法</p><p><img src="/lanjz/assets/renshi-2.9a017f66.jpeg" alt=""></p></li><li><p>调用 <code>uv_fs_open</code> 的过程中会创建一个请求对象，从JS传入的参数，回调和当前方法都会包装到这个请求对象中，然后将这个请求对象推入到线程池中，当线程池有可用线程时，就会根据请求对象调用具体的方法。至此 JS 调用就结束了，JS所在线程可以继续执行后续操作</p></li><li><p>当线程池中 I/O 操作完成之后，就会通过 IOCP，告知当前对象操作已经完成</p></li><li><p>之后事件循环的每一次 tick 中，观察者都会检查是否有完成的请求对象，如果存在，会将请求对象加入到 I/O 观察者队列中，下一次事件循环的时候就会从队列中取出当作事件执行</p></li></ol><p>整个过程的示意图：</p><p><img src="/lanjz/assets/renshi-1.80d57fba.jpeg" alt=""></p><h3 id="非i-o的异步api" tabindex="-1"><a class="header-anchor" href="#非i-o的异步api" aria-hidden="true">#</a> 非I/O的异步API</h3><p>非I/O的异步API是指 <code>setTimeout()</code>,<code>setInterval()</code>, <code>setImmediate()</code> 和 <code>process.next()</code></p><p><strong><code>setTimeout</code>和<code>setInterval</code></strong></p><p><code>setTimeout()</code> 和 <code>setInterval()</code> 实现原理与 I/O 比较类似，只是不需要线程池参与。调用<code>setTimeout()</code> 和 <code>setInterval()</code> 时创建的定时器会被插入到定时器观察者内部的一个红黑树中。每次 Tick 执行时，会从该红黑树中迭代取出定时器对象，检查是否超过定时时间，如果超过，就形成一个事件，它的回调函数将立即执行。如下示意图</p><p><img src="/lanjz/assets/renshi_5.9ec9877c.png" alt=""></p><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>定时器并非精准的，因为可能在一次 Tick 中在触发定时回调之前有耗时的任务，这样导致定时器延时执行</p></div><p><strong><code>process.nextTick()</code></strong></p><p><code>process.nextTick()</code> 的意思就是定义出一个异步动作，并且这个动作在事件循环当前阶段结束后执行</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>           ┌───────────────────────────┐
        ┌─&gt;│           timers          │
        │  └─────────────┬─────────────┘
        │           nextTickQueue
        │  ┌─────────────┴─────────────┐
        │  │     pending callbacks     │
        │  └─────────────┬─────────────┘
        │           nextTickQueue
        │  ┌─────────────┴─────────────┐
        |  |     idle, prepare         │
        |  └─────────────┬─────────────┘
  nextTickQueue     nextTickQueue
        |  ┌─────────────┴─────────────┐
        |  │           poll            │
        │  └─────────────┬─────────────┘
        │           nextTickQueue
        │  ┌─────────────┴─────────────┐
        │  │           check           │
        │  └─────────────┬─────────────┘
        │           nextTickQueue
        │  ┌─────────────┴─────────────┐
        └──┤       close callbacks     │
           └───────────────────────────┘
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong><code>setImmediate()</code></strong></p><p><code>setImmediate()</code> 定义出一个异步动作事件会在当前事件循环中的 check 阶段被执行</p><h2 id="同步-异步" tabindex="-1"><a class="header-anchor" href="#同步-异步" aria-hidden="true">#</a> 同步/异步</h2><p>同步和异步描述的是进程/线程的调用方式</p><p>同步调用指的是进程/线程发起调用后，一直等待调用返回后才继续执行下一步操作，这并不代表 CPU 在这段时间内也会一直等待，操作系统多半会切换到其它的进程/线程中，等到调用返回后再切换回原来的进程/线程</p><p>异步就相反，发起调用后，进程/线程继续向下执行，当调用返回后，通过某种手段来通过知调用者</p><h2 id="node-架构" tabindex="-1"><a class="header-anchor" href="#node-架构" aria-hidden="true">#</a> Node 架构</h2><p>上面提到 Node 底层是支持多线程的，依靠多线程的支持实现了高效异步 I/O 操作，接下就捊捊Node 整体架构。</p><p>Nodejs 的运行依赖于 V8 引擎和 libuv 库</p><ul><li><p>V8：执行 JS 的引擎. 也就是翻译 JS. 包括我们熟悉的编译优化, 垃圾回收等等.</p></li><li><p>libuv: 是操作系统 API 层的一个抽象层，Node 通过它实现了异步非阻塞 I/O</p></li></ul><p>那么 Nodejs 如何组织它们呢? 如下图:</p><p><img src="/lanjz/assets/node-1.44a9bcbd.png" alt=""></p><p>Nodejs 通过一层 <code>C++ Binding</code>, 把 JS 传入 V8, V8 解析后交给 libuv 发起 <code>asnyc I/O</code>, 并结合事件循环进行调度. 再看看下面的图:</p><p><img src="/lanjz/assets/node-2.cec5a6aa.png" alt=""></p><h3 id="io调用的结果怎么返回给调用的进程-线程" tabindex="-1"><a class="header-anchor" href="#io调用的结果怎么返回给调用的进程-线程" aria-hidden="true">#</a> IO调用的结果怎么返回给调用的进程/线程</h3><p>通过内核进程复制给调用进程，在 Linux 下，用户进程没办法直接访问内核空间，通常是内核调用 <code>copy_to_user</code> 方法来传递数据的。大致的流程是 IO 的数据会先被内核空间读取，然后内核将数据复制给用户进程。还有一种零复制技术，大致是内核进程和用户进程共享一块内存地址，这避免了内存的复制</p><h3 id="libuv" tabindex="-1"><a class="header-anchor" href="#libuv" aria-hidden="true">#</a> libuv</h3><p>上文提到过为了实现异步的 I/O 操作，需要实现线程池，最初 Node 在 *nix 平台下采用了 libeio 配合 libev 实现了异步 I/O，在Node v0.9.3 中，自行实现了线程池来完成异步 I/O；而在 Window 下则是使用了 IOCP，它在某种程度上提供了理想的异步 I/O ，它的内部其实仍然是线程池原理</p><p>由于 Window 和 *inx 平台的差异，Node 提供了 libuv 作为抽象封装层，使得所有平台兼容性的判断都在这一层来完成，并保证上层的 Node 与下层的自定义线池及 IOCP 之间各自独立</p><p>所以 Node 的异步 I/O 调用是由libuv来支持的，以 <code>readFile</code> 为例，读取文件的系统调用是由libuv来完成的，Node只负责调用libuv 的接口，等数据返回后再执行对应的回调方法</p><blockquote><p>线程池：基本思想还是一种对象池的思想，开辟一块内存空间，里面存放了众多(未死亡)的线程，池中线程执行调度由池管理器来处理。当有线程任务时，从池中取一个，执行完成后线程对象归池，这样可以避免反复创建线程对象所带来的性能开销，节省了系统的资源</p></blockquote><p><img src="/lanjz/assets/renshi-4.63376747.jpeg" alt=""></p><h2 id="高并发的node" tabindex="-1"><a class="header-anchor" href="#高并发的node" aria-hidden="true">#</a> 高并发的Node</h2><ul><li><p>并发：两排队伍在排队，但是只有一个买票窗口</p></li><li><p>并行：两个队伍在排，而且有两个买票窗口</p></li></ul><p><strong>Node中的并发</strong></p><p>单线程支持高并发，通常都是依靠异步+事件驱动（循环）来实现的，异步使得代码在面临多个请求时不会发生阻塞，事件循环提供了IO调用结束后调用回调函数的能力</p><p>先来看一个例子：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// helper</span>
<span class="token keyword">function</span> <span class="token function">delay</span><span class="token punctuation">(</span><span class="token parameter">time</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;延时：&#39;</span><span class="token punctuation">,</span> time<span class="token punctuation">)</span>
            <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> time <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">fibonacci</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">||</span> n <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token number">1</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">fibonacci</span><span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">fibonacci</span><span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    delay<span class="token punctuation">,</span>
    fibonacci
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> Koa <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;koa&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Koa</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> Router <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;@koa/router&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> delay<span class="token punctuation">,</span> fibonacci <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;./helper&#39;</span><span class="token punctuation">)</span>

<span class="token keyword">function</span> <span class="token function">timeLog</span><span class="token punctuation">(</span>start<span class="token punctuation">,</span> end <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">开始处理时间：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>start<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">;结束时间：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>end<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">;处理时长：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>end <span class="token operator">-</span> start<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Router</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
router<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/delay&#39;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">ctx<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> start <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">await</span> <span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span>
    ctx<span class="token punctuation">.</span>body <span class="token operator">=</span> <span class="token function">timeLog</span><span class="token punctuation">(</span>start<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
router<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/fibonacci&#39;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">ctx<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> start <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token function">fibonacci</span><span class="token punctuation">(</span><span class="token number">45</span><span class="token punctuation">)</span>
    ctx<span class="token punctuation">.</span>body <span class="token operator">=</span> <span class="token function">timeLog</span><span class="token punctuation">(</span>start<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
router<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/&#39;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">ctx<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> start <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    ctx<span class="token punctuation">.</span>body <span class="token operator">=</span> <span class="token function">timeLog</span><span class="token punctuation">(</span>start<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  app
    <span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>router<span class="token punctuation">.</span><span class="token function">routes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>router<span class="token punctuation">.</span><span class="token function">allowedMethods</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;去吧 皮卡丘：3000&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>上面代码中 <code>delay(6)</code> 是一个用定时器 <code>setTimeout</code> 做的延迟函数。当我们在浏览器输入 <code>localhost:3000/delay</code> 因为延迟的关系并不会立马取到返回值，紧接着在新的 <code>Tab</code> 页输入 <code>localhost:3000/</code> 可以立马显示返回的内容，并没有被之前的 <code>localhost:3000/delay</code> 请求所阻塞</p><p>另个场景先在浏览器输入 <code>localhost:3000/fibonacci</code>，这是一个 <code>fibonacci</code> 需要点时间，之后在新的 <code>Tab</code> 页输入 <code>localhost:3000/</code> 并没有显示内容而是之前的请求阻塞了</p><p>那么 Node 在哪些场景下是非阻塞的？ 处理 IO 操作的时候，这个 IO 包括数据库操作（连接数，机器性能等）、缓存服务、网络IO、文件读写等操作。</p><p><strong>引用 <a href="https://cnodejs.org/topic/5c8b0a4a7ce0df3732428254" target="_blank" rel="noopener noreferrer">CNODE 社区 - 关于 Nodejs 服务器高并发的疑问<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> 中的一个评论来帮助理解 node 高并发的适合场景</strong></p><p>CPU密集型本身就不适合 nodejs，但非常适合大量 io 操作的情况</p><p>假设一个请求流程 需要 <code>10ms</code> 的简单运算，<code>900ms</code> 的数据库查询，<code>90ms</code> 的数据返回。完整时间是1s</p><p>如果是 java 处理</p><p>如果是 <code>1000</code> 个请求，不在考虑数据库压力的情况下，理论上 java 会并发产生 <code>1000</code> 个线程来处理，理论上也就可以在 <code>1s</code> 内处理完 <code>1000</code> 个请求并全部返回数据。但是为了这 <code>1000</code> 个线程，服务器可能产生了 <code>百分之80</code> 的资源消耗，也就是说你这台服务器能支撑 <code>1000</code> 个并发已经很好了。</p><p>如果是 nodejs 处理</p><p>如果 <code>1000</code> 个请求，从第一个请求开始，<code>10ms</code> 处理完成，然后就交给数据去处理了，这个时候就可以处理下一个 <code>10ms</code> 的请求。也就是需要 <code>10s</code> 才可以接收完所有的请求，但是第一个请求返回时间是 <code>1s</code>，第二个请求返回时间是 <code>1s+10ms</code>，以此类推，但是这 <code>1000</code> 个并发 nodejs 会在 <code>11s</code> 左右全部处理完</p><p>你可能觉得 java 是 <code>1s</code>，nodejs 是 <code>11s</code>，差距很大，但是需要注意的是服务器消耗</p><p>java 是 <code>1000</code> 个进程可能已经是服务器的极限看了，但是 nodejs 服务器确一点事情都没有。换而言之，我一台服务器打开 <code>10</code> 个 nodejs 进程，我一台服务器就可以处理的并发是 <code>10s，1W</code> 的，但是 java 确实 <code>1s，1000</code>, 我需要用10台服务器才完成。</p><p>实际工作中，我们会发现。在相同的业务需求下，io 密集型的需求，使用 nodejs 同一台服务器可以处理的并发量更大，当然，牺牲了一部分的时间。但是这个完全可以用多开进程的方式来弥补来达到一个均衡。同样的服务器，仅 io 密集型的需求而言，nodejs 更加合适。</p><p>但是如果是 cpu 密集型的你 java 开 <code>1000</code> 个线程，是并发计算的，一个计算 <code>1</code> 秒， <code>1000</code> 的线程也 <code>1</code> 秒返回了，但是使用 nodejs，你需要 <code>1000</code> 秒才可以返回。</p><p><strong>node 在处理 IO 操作时是非阻塞的，处理 CPU 密集型计算时会阻塞的</strong></p><h2 id="总结" tabindex="-1"><a class="header-anchor" href="#总结" aria-hidden="true">#</a> 总结</h2><p>Node 为什么是高性能的？</p><ol><li><p>Node 采用事件驱动的方式处理请求，无须为每个请求创建额外的线程 ，可以省掉创建线程和销毁线程的开销</p></li><li><p>Node 底层又是具有线程池的，依靠 Libuv 线程池 Node 可以实现异步 I/O 操作</p></li></ol></div><!--[--><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: 156081289@qq.com">lanjz</span><!----><!--]--><!--]--></span></div></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/lanjz/assets/app.9941db85.js" defer></script>
  </body>
</html>
