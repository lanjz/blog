<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>浏览器中的进程和线程 | Hello Wold</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="Just playing around">
    
    <link rel="preload" href="/lanjz/assets/css/0.styles.5dda244b.css" as="style"><link rel="preload" href="/lanjz/assets/js/app.92b1c030.js" as="script"><link rel="preload" href="/lanjz/assets/js/2.4cffbc58.js" as="script"><link rel="preload" href="/lanjz/assets/js/35.fa80dfdb.js" as="script"><link rel="prefetch" href="/lanjz/assets/js/10.a6909129.js"><link rel="prefetch" href="/lanjz/assets/js/100.808bbd34.js"><link rel="prefetch" href="/lanjz/assets/js/101.ebd4231d.js"><link rel="prefetch" href="/lanjz/assets/js/102.29fc10b4.js"><link rel="prefetch" href="/lanjz/assets/js/103.287aa645.js"><link rel="prefetch" href="/lanjz/assets/js/104.290d3af4.js"><link rel="prefetch" href="/lanjz/assets/js/105.5e038666.js"><link rel="prefetch" href="/lanjz/assets/js/106.e0d70a73.js"><link rel="prefetch" href="/lanjz/assets/js/107.afd4ed60.js"><link rel="prefetch" href="/lanjz/assets/js/108.1d3783f6.js"><link rel="prefetch" href="/lanjz/assets/js/109.61a9b643.js"><link rel="prefetch" href="/lanjz/assets/js/11.e3bb639e.js"><link rel="prefetch" href="/lanjz/assets/js/110.1c331200.js"><link rel="prefetch" href="/lanjz/assets/js/111.8e137050.js"><link rel="prefetch" href="/lanjz/assets/js/112.6dbcefb0.js"><link rel="prefetch" href="/lanjz/assets/js/113.808c4d3d.js"><link rel="prefetch" href="/lanjz/assets/js/114.2df6d5c1.js"><link rel="prefetch" href="/lanjz/assets/js/115.ca949b1e.js"><link rel="prefetch" href="/lanjz/assets/js/116.823bfc00.js"><link rel="prefetch" href="/lanjz/assets/js/117.bdb63f0b.js"><link rel="prefetch" href="/lanjz/assets/js/118.d4f96cea.js"><link rel="prefetch" href="/lanjz/assets/js/119.5b6b7978.js"><link rel="prefetch" href="/lanjz/assets/js/12.867db858.js"><link rel="prefetch" href="/lanjz/assets/js/120.c72704c0.js"><link rel="prefetch" href="/lanjz/assets/js/121.f99ba0d0.js"><link rel="prefetch" href="/lanjz/assets/js/122.74a3dd25.js"><link rel="prefetch" href="/lanjz/assets/js/123.6c4d7057.js"><link rel="prefetch" href="/lanjz/assets/js/124.a78ef5a1.js"><link rel="prefetch" href="/lanjz/assets/js/125.c38eab78.js"><link rel="prefetch" href="/lanjz/assets/js/126.0b129f19.js"><link rel="prefetch" href="/lanjz/assets/js/127.20cff684.js"><link rel="prefetch" href="/lanjz/assets/js/128.8354d29f.js"><link rel="prefetch" href="/lanjz/assets/js/129.d9e6c1e3.js"><link rel="prefetch" href="/lanjz/assets/js/13.c570eea8.js"><link rel="prefetch" href="/lanjz/assets/js/130.6f2d400b.js"><link rel="prefetch" href="/lanjz/assets/js/131.a2df9d5b.js"><link rel="prefetch" href="/lanjz/assets/js/132.3c035765.js"><link rel="prefetch" href="/lanjz/assets/js/133.b3d87618.js"><link rel="prefetch" href="/lanjz/assets/js/134.0a8690d0.js"><link rel="prefetch" href="/lanjz/assets/js/135.167d2c0e.js"><link rel="prefetch" href="/lanjz/assets/js/136.111155c9.js"><link rel="prefetch" href="/lanjz/assets/js/137.0b67f271.js"><link rel="prefetch" href="/lanjz/assets/js/138.2ccc388f.js"><link rel="prefetch" href="/lanjz/assets/js/139.31e8a0cd.js"><link rel="prefetch" href="/lanjz/assets/js/14.7fda16b6.js"><link rel="prefetch" href="/lanjz/assets/js/140.1b4ae89b.js"><link rel="prefetch" href="/lanjz/assets/js/141.f79615cc.js"><link rel="prefetch" href="/lanjz/assets/js/142.6a03afb1.js"><link rel="prefetch" href="/lanjz/assets/js/143.23cdd73f.js"><link rel="prefetch" href="/lanjz/assets/js/144.3f23047c.js"><link rel="prefetch" href="/lanjz/assets/js/145.40637692.js"><link rel="prefetch" href="/lanjz/assets/js/146.4876e43c.js"><link rel="prefetch" href="/lanjz/assets/js/147.d9712ac4.js"><link rel="prefetch" href="/lanjz/assets/js/148.29d1a444.js"><link rel="prefetch" href="/lanjz/assets/js/149.19c17844.js"><link rel="prefetch" href="/lanjz/assets/js/15.998cb284.js"><link rel="prefetch" href="/lanjz/assets/js/150.f2c72610.js"><link rel="prefetch" href="/lanjz/assets/js/151.cf0b6213.js"><link rel="prefetch" href="/lanjz/assets/js/152.b3b65eb6.js"><link rel="prefetch" href="/lanjz/assets/js/153.b1de13ed.js"><link rel="prefetch" href="/lanjz/assets/js/154.4dea586c.js"><link rel="prefetch" href="/lanjz/assets/js/155.c0a7a216.js"><link rel="prefetch" href="/lanjz/assets/js/156.a0315538.js"><link rel="prefetch" href="/lanjz/assets/js/157.6c1130b2.js"><link rel="prefetch" href="/lanjz/assets/js/158.eadd9ada.js"><link rel="prefetch" href="/lanjz/assets/js/159.6855042a.js"><link rel="prefetch" href="/lanjz/assets/js/16.7f297548.js"><link rel="prefetch" href="/lanjz/assets/js/160.ee3bdd48.js"><link rel="prefetch" href="/lanjz/assets/js/161.80290d0d.js"><link rel="prefetch" href="/lanjz/assets/js/162.68e30b10.js"><link rel="prefetch" href="/lanjz/assets/js/163.0daff8e6.js"><link rel="prefetch" href="/lanjz/assets/js/164.794e8ba6.js"><link rel="prefetch" href="/lanjz/assets/js/165.eff5d73e.js"><link rel="prefetch" href="/lanjz/assets/js/166.c641cd88.js"><link rel="prefetch" href="/lanjz/assets/js/167.cc785ade.js"><link rel="prefetch" href="/lanjz/assets/js/168.9925299a.js"><link rel="prefetch" href="/lanjz/assets/js/169.208abaf9.js"><link rel="prefetch" href="/lanjz/assets/js/17.493bf2c2.js"><link rel="prefetch" href="/lanjz/assets/js/170.959ff459.js"><link rel="prefetch" href="/lanjz/assets/js/171.f9a297b6.js"><link rel="prefetch" href="/lanjz/assets/js/172.8b115c03.js"><link rel="prefetch" href="/lanjz/assets/js/173.9a4f77cc.js"><link rel="prefetch" href="/lanjz/assets/js/174.8149ed3c.js"><link rel="prefetch" href="/lanjz/assets/js/175.4c45a99d.js"><link rel="prefetch" href="/lanjz/assets/js/176.71fc5c9c.js"><link rel="prefetch" href="/lanjz/assets/js/177.0a23dc80.js"><link rel="prefetch" href="/lanjz/assets/js/178.2ffeaed2.js"><link rel="prefetch" href="/lanjz/assets/js/179.9e851a36.js"><link rel="prefetch" href="/lanjz/assets/js/18.a970cefd.js"><link rel="prefetch" href="/lanjz/assets/js/180.54044fb9.js"><link rel="prefetch" href="/lanjz/assets/js/181.40459241.js"><link rel="prefetch" href="/lanjz/assets/js/182.23731524.js"><link rel="prefetch" href="/lanjz/assets/js/183.fa8a9b39.js"><link rel="prefetch" href="/lanjz/assets/js/184.61ea3340.js"><link rel="prefetch" href="/lanjz/assets/js/185.cb72be45.js"><link rel="prefetch" href="/lanjz/assets/js/186.b9d9980b.js"><link rel="prefetch" href="/lanjz/assets/js/187.8d4e0a08.js"><link rel="prefetch" href="/lanjz/assets/js/188.2240298e.js"><link rel="prefetch" href="/lanjz/assets/js/189.b1e3cac5.js"><link rel="prefetch" href="/lanjz/assets/js/19.4afb243f.js"><link rel="prefetch" href="/lanjz/assets/js/190.0a23a98f.js"><link rel="prefetch" href="/lanjz/assets/js/191.f9126d8a.js"><link rel="prefetch" href="/lanjz/assets/js/192.9a817725.js"><link rel="prefetch" href="/lanjz/assets/js/193.83a2872f.js"><link rel="prefetch" href="/lanjz/assets/js/194.c2908ce4.js"><link rel="prefetch" href="/lanjz/assets/js/195.385c79ef.js"><link rel="prefetch" href="/lanjz/assets/js/196.80894893.js"><link rel="prefetch" href="/lanjz/assets/js/197.839de1d0.js"><link rel="prefetch" href="/lanjz/assets/js/198.f080c691.js"><link rel="prefetch" href="/lanjz/assets/js/199.12188bed.js"><link rel="prefetch" href="/lanjz/assets/js/20.419c8bf3.js"><link rel="prefetch" href="/lanjz/assets/js/200.f35c860b.js"><link rel="prefetch" href="/lanjz/assets/js/201.516ab391.js"><link rel="prefetch" href="/lanjz/assets/js/202.b25d0d41.js"><link rel="prefetch" href="/lanjz/assets/js/203.3f5682e4.js"><link rel="prefetch" href="/lanjz/assets/js/204.b25148b4.js"><link rel="prefetch" href="/lanjz/assets/js/205.990ae326.js"><link rel="prefetch" href="/lanjz/assets/js/206.b795bf13.js"><link rel="prefetch" href="/lanjz/assets/js/207.6501f992.js"><link rel="prefetch" href="/lanjz/assets/js/208.9974eae3.js"><link rel="prefetch" href="/lanjz/assets/js/209.eb83f012.js"><link rel="prefetch" href="/lanjz/assets/js/21.6784c9f0.js"><link rel="prefetch" href="/lanjz/assets/js/210.396107ae.js"><link rel="prefetch" href="/lanjz/assets/js/211.f6d9a649.js"><link rel="prefetch" href="/lanjz/assets/js/212.1b2929c0.js"><link rel="prefetch" href="/lanjz/assets/js/213.4d3caf63.js"><link rel="prefetch" href="/lanjz/assets/js/214.d11ccc1e.js"><link rel="prefetch" href="/lanjz/assets/js/215.56de5c28.js"><link rel="prefetch" href="/lanjz/assets/js/216.4ecd0819.js"><link rel="prefetch" href="/lanjz/assets/js/22.e543f4fe.js"><link rel="prefetch" href="/lanjz/assets/js/23.65db3f4d.js"><link rel="prefetch" href="/lanjz/assets/js/24.776bb6cf.js"><link rel="prefetch" href="/lanjz/assets/js/25.7396575f.js"><link rel="prefetch" href="/lanjz/assets/js/26.da16d3f0.js"><link rel="prefetch" href="/lanjz/assets/js/27.aa0676ac.js"><link rel="prefetch" href="/lanjz/assets/js/28.cfa69821.js"><link rel="prefetch" href="/lanjz/assets/js/29.55717cdc.js"><link rel="prefetch" href="/lanjz/assets/js/3.0babf5f5.js"><link rel="prefetch" href="/lanjz/assets/js/30.2da63bb4.js"><link rel="prefetch" href="/lanjz/assets/js/31.60b5f53f.js"><link rel="prefetch" href="/lanjz/assets/js/32.06e20d53.js"><link rel="prefetch" href="/lanjz/assets/js/33.148d2157.js"><link rel="prefetch" href="/lanjz/assets/js/34.87a43c4f.js"><link rel="prefetch" href="/lanjz/assets/js/36.aad3bf78.js"><link rel="prefetch" href="/lanjz/assets/js/37.1171c55a.js"><link rel="prefetch" href="/lanjz/assets/js/38.b22f7105.js"><link rel="prefetch" href="/lanjz/assets/js/39.d395f019.js"><link rel="prefetch" href="/lanjz/assets/js/4.ed254b5e.js"><link rel="prefetch" href="/lanjz/assets/js/40.4fc65f8d.js"><link rel="prefetch" href="/lanjz/assets/js/41.30b85d86.js"><link rel="prefetch" href="/lanjz/assets/js/42.d7d4b526.js"><link rel="prefetch" href="/lanjz/assets/js/43.b5e2e9f6.js"><link rel="prefetch" href="/lanjz/assets/js/44.9ff8fa5e.js"><link rel="prefetch" href="/lanjz/assets/js/45.4af9af93.js"><link rel="prefetch" href="/lanjz/assets/js/46.8c63009d.js"><link rel="prefetch" href="/lanjz/assets/js/47.5cecb88e.js"><link rel="prefetch" href="/lanjz/assets/js/48.d3cf7b2d.js"><link rel="prefetch" href="/lanjz/assets/js/49.b4f89dd9.js"><link rel="prefetch" href="/lanjz/assets/js/5.35706ae0.js"><link rel="prefetch" href="/lanjz/assets/js/50.611a2953.js"><link rel="prefetch" href="/lanjz/assets/js/51.9237745c.js"><link rel="prefetch" href="/lanjz/assets/js/52.8ff3a849.js"><link rel="prefetch" href="/lanjz/assets/js/53.15a64daa.js"><link rel="prefetch" href="/lanjz/assets/js/54.73a6c7eb.js"><link rel="prefetch" href="/lanjz/assets/js/55.10c7d4bd.js"><link rel="prefetch" href="/lanjz/assets/js/56.ab23fbc4.js"><link rel="prefetch" href="/lanjz/assets/js/57.142aa865.js"><link rel="prefetch" href="/lanjz/assets/js/58.b72fea17.js"><link rel="prefetch" href="/lanjz/assets/js/59.19e4d3fe.js"><link rel="prefetch" href="/lanjz/assets/js/6.b2f58b9b.js"><link rel="prefetch" href="/lanjz/assets/js/60.43a2c697.js"><link rel="prefetch" href="/lanjz/assets/js/61.f49e3fc7.js"><link rel="prefetch" href="/lanjz/assets/js/62.33e7aea6.js"><link rel="prefetch" href="/lanjz/assets/js/63.e0a6818d.js"><link rel="prefetch" href="/lanjz/assets/js/64.6f24311a.js"><link rel="prefetch" href="/lanjz/assets/js/65.b51a00ae.js"><link rel="prefetch" href="/lanjz/assets/js/66.cf6813a9.js"><link rel="prefetch" href="/lanjz/assets/js/67.9800664d.js"><link rel="prefetch" href="/lanjz/assets/js/68.20a56a95.js"><link rel="prefetch" href="/lanjz/assets/js/69.37fa33d7.js"><link rel="prefetch" href="/lanjz/assets/js/7.2832800e.js"><link rel="prefetch" href="/lanjz/assets/js/70.517f47b1.js"><link rel="prefetch" href="/lanjz/assets/js/71.754f7377.js"><link rel="prefetch" href="/lanjz/assets/js/72.376f049a.js"><link rel="prefetch" href="/lanjz/assets/js/73.ad1c8d3a.js"><link rel="prefetch" href="/lanjz/assets/js/74.256acb78.js"><link rel="prefetch" href="/lanjz/assets/js/75.10200774.js"><link rel="prefetch" href="/lanjz/assets/js/76.37c5b2ac.js"><link rel="prefetch" href="/lanjz/assets/js/77.c2e4ede6.js"><link rel="prefetch" href="/lanjz/assets/js/78.17aaeb21.js"><link rel="prefetch" href="/lanjz/assets/js/79.608b8436.js"><link rel="prefetch" href="/lanjz/assets/js/8.5c15a613.js"><link rel="prefetch" href="/lanjz/assets/js/80.a31ba595.js"><link rel="prefetch" href="/lanjz/assets/js/81.91195303.js"><link rel="prefetch" href="/lanjz/assets/js/82.1057cb31.js"><link rel="prefetch" href="/lanjz/assets/js/83.7ebb188e.js"><link rel="prefetch" href="/lanjz/assets/js/84.bb62b980.js"><link rel="prefetch" href="/lanjz/assets/js/85.2a3f7c3f.js"><link rel="prefetch" href="/lanjz/assets/js/86.a6f7692a.js"><link rel="prefetch" href="/lanjz/assets/js/87.6ac6bedc.js"><link rel="prefetch" href="/lanjz/assets/js/88.7826c7be.js"><link rel="prefetch" href="/lanjz/assets/js/89.c832adad.js"><link rel="prefetch" href="/lanjz/assets/js/9.63c34f56.js"><link rel="prefetch" href="/lanjz/assets/js/90.268e5b79.js"><link rel="prefetch" href="/lanjz/assets/js/91.7cfbfa2c.js"><link rel="prefetch" href="/lanjz/assets/js/92.dd789d49.js"><link rel="prefetch" href="/lanjz/assets/js/93.858e832d.js"><link rel="prefetch" href="/lanjz/assets/js/94.202b1cb6.js"><link rel="prefetch" href="/lanjz/assets/js/95.0a029b66.js"><link rel="prefetch" href="/lanjz/assets/js/96.e27d3f8f.js"><link rel="prefetch" href="/lanjz/assets/js/97.e163464f.js"><link rel="prefetch" href="/lanjz/assets/js/98.3ace385f.js"><link rel="prefetch" href="/lanjz/assets/js/99.196da4fd.js">
    <link rel="stylesheet" href="/lanjz/assets/css/0.styles.5dda244b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/lanjz/" class="home-link router-link-active"><!----> <span class="site-name">Hello Wold</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/lanjz/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端基础" class="dropdown-title"><span class="title">前端基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端基础" class="mobile-dropdown-title"><span class="title">前端基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/JavaScript/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/ES6/" class="nav-link">
  ES6
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/HTML5/" class="nav-link">
  HTML5
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/CSS/" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Browser/" class="nav-link router-link-active">
  Browser
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="网络&amp;算法" class="dropdown-title"><span class="title">网络&amp;算法</span> <span class="arrow down"></span></button> <button type="button" aria-label="网络&amp;算法" class="mobile-dropdown-title"><span class="title">网络&amp;算法</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/network/" class="nav-link">
  网络
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Algorithm/" class="nav-link">
  算法
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/secure/" class="nav-link">
  Web安全
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架" class="dropdown-title"><span class="title">框架</span> <span class="arrow down"></span></button> <button type="button" aria-label="框架" class="mobile-dropdown-title"><span class="title">框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/Vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Vue3/" class="nav-link">
  Vue3
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/React/" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/qiankun/" class="nav-link">
  qiankun
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/NA/" class="nav-link">
  跨平台
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Node" class="dropdown-title"><span class="title">Node</span> <span class="arrow down"></span></button> <button type="button" aria-label="Node" class="mobile-dropdown-title"><span class="title">Node</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/Node/基础/" class="nav-link">
  基础
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Node/Api/" class="nav-link">
  API
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Node/Package/" class="nav-link">
  yarn&amp;npm
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Node/Webpack/" class="nav-link">
  Webpack
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Node/Vite/" class="nav-link">
  Vite
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Node/ESBuild/" class="nav-link">
  esbuild
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Node/数据库/" class="nav-link">
  SQL
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工程化" class="dropdown-title"><span class="title">工程化</span> <span class="arrow down"></span></button> <button type="button" aria-label="工程化" class="mobile-dropdown-title"><span class="title">工程化</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/工程化/前端优化总结/" class="nav-link">
  前端优化总结
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/系统设计/" class="nav-link">
  系统设计
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/预加载&amp;预解析.html" class="nav-link">
  预加载&amp;预解析
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/重构改善既有代码的设计.html" class="nav-link">
  重构代码原则
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/开发与调试技巧.html" class="nav-link">
  开发与调试
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/组件设计的基本原则.html" class="nav-link">
  组件设计
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/公共模块管理.html" class="nav-link">
  公共模块管理
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/内存泄漏.html" class="nav-link">
  内存泄漏
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/前端异常捕获.html" class="nav-link">
  前端异常捕获
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/自动化部署.html" class="nav-link">
  自动化部署
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/疑难杂症.html" class="nav-link">
  问题小计
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/性能指标.html" class="nav-link">
  性能指标
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="利其器" class="dropdown-title"><span class="title">利其器</span> <span class="arrow down"></span></button> <button type="button" aria-label="利其器" class="mobile-dropdown-title"><span class="title">利其器</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/利其器/Mac.html" class="nav-link">
  Mac
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/利其器/Github.html" class="nav-link">
  Github
</a></li></ul></div></div><div class="nav-item"><a href="/lanjz/Im/" class="nav-link">
  关于我
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/lanjz/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端基础" class="dropdown-title"><span class="title">前端基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端基础" class="mobile-dropdown-title"><span class="title">前端基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/JavaScript/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/ES6/" class="nav-link">
  ES6
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/HTML5/" class="nav-link">
  HTML5
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/CSS/" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Browser/" class="nav-link router-link-active">
  Browser
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="网络&amp;算法" class="dropdown-title"><span class="title">网络&amp;算法</span> <span class="arrow down"></span></button> <button type="button" aria-label="网络&amp;算法" class="mobile-dropdown-title"><span class="title">网络&amp;算法</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/network/" class="nav-link">
  网络
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Algorithm/" class="nav-link">
  算法
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/secure/" class="nav-link">
  Web安全
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架" class="dropdown-title"><span class="title">框架</span> <span class="arrow down"></span></button> <button type="button" aria-label="框架" class="mobile-dropdown-title"><span class="title">框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/Vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Vue3/" class="nav-link">
  Vue3
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/React/" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/qiankun/" class="nav-link">
  qiankun
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/NA/" class="nav-link">
  跨平台
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Node" class="dropdown-title"><span class="title">Node</span> <span class="arrow down"></span></button> <button type="button" aria-label="Node" class="mobile-dropdown-title"><span class="title">Node</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/Node/基础/" class="nav-link">
  基础
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Node/Api/" class="nav-link">
  API
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Node/Package/" class="nav-link">
  yarn&amp;npm
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Node/Webpack/" class="nav-link">
  Webpack
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Node/Vite/" class="nav-link">
  Vite
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Node/ESBuild/" class="nav-link">
  esbuild
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/Node/数据库/" class="nav-link">
  SQL
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工程化" class="dropdown-title"><span class="title">工程化</span> <span class="arrow down"></span></button> <button type="button" aria-label="工程化" class="mobile-dropdown-title"><span class="title">工程化</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/工程化/前端优化总结/" class="nav-link">
  前端优化总结
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/系统设计/" class="nav-link">
  系统设计
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/预加载&amp;预解析.html" class="nav-link">
  预加载&amp;预解析
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/重构改善既有代码的设计.html" class="nav-link">
  重构代码原则
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/开发与调试技巧.html" class="nav-link">
  开发与调试
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/组件设计的基本原则.html" class="nav-link">
  组件设计
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/公共模块管理.html" class="nav-link">
  公共模块管理
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/内存泄漏.html" class="nav-link">
  内存泄漏
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/前端异常捕获.html" class="nav-link">
  前端异常捕获
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/自动化部署.html" class="nav-link">
  自动化部署
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/疑难杂症.html" class="nav-link">
  问题小计
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/工程化/性能指标.html" class="nav-link">
  性能指标
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="利其器" class="dropdown-title"><span class="title">利其器</span> <span class="arrow down"></span></button> <button type="button" aria-label="利其器" class="mobile-dropdown-title"><span class="title">利其器</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lanjz/利其器/Mac.html" class="nav-link">
  Mac
</a></li><li class="dropdown-item"><!----> <a href="/lanjz/利其器/Github.html" class="nav-link">
  Github
</a></li></ul></div></div><div class="nav-item"><a href="/lanjz/Im/" class="nav-link">
  关于我
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/lanjz/Browser/浏览器中的进程与线程.html" class="active sidebar-link">浏览器中的进程和线程</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/lanjz/Browser/浏览器中的进程与线程.html#进程和线程" class="sidebar-link">进程和线程</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/lanjz/Browser/浏览器中的进程与线程.html#进程和线程的区别" class="sidebar-link">进程和线程的区别</a></li><li class="sidebar-sub-header"><a href="/lanjz/Browser/浏览器中的进程与线程.html#进程之前的通信方式-ipc" class="sidebar-link">进程之前的通信方式（IPC）</a></li><li class="sidebar-sub-header"><a href="/lanjz/Browser/浏览器中的进程与线程.html#关于父进程与子进程是如何通信的" class="sidebar-link">关于父进程与子进程是如何通信的</a></li><li class="sidebar-sub-header"><a href="/lanjz/Browser/浏览器中的进程与线程.html#僵尸进程和孤儿进程是什么" class="sidebar-link">僵尸进程和孤儿进程是什么？</a></li><li class="sidebar-sub-header"><a href="/lanjz/Browser/浏览器中的进程与线程.html#死锁" class="sidebar-link">死锁</a></li></ul></li><li class="sidebar-sub-header"><a href="/lanjz/Browser/浏览器中的进程与线程.html#多进程的浏览器" class="sidebar-link">多进程的浏览器</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/lanjz/Browser/浏览器中的进程与线程.html#浏览器多进程的优势" class="sidebar-link">浏览器多进程的优势</a></li></ul></li><li class="sidebar-sub-header"><a href="/lanjz/Browser/浏览器中的进程与线程.html#渲染进程" class="sidebar-link">渲染进程</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/lanjz/Browser/浏览器中的进程与线程.html#browser进程和renderer进程的通信过程" class="sidebar-link">Browser进程和Renderer进程的通信过程</a></li><li class="sidebar-sub-header"><a href="/lanjz/Browser/浏览器中的进程与线程.html#gui渲染线程与js引擎线程互斥" class="sidebar-link">GUI渲染线程与JS引擎线程互斥</a></li></ul></li><li class="sidebar-sub-header"><a href="/lanjz/Browser/浏览器中的进程与线程.html#q-a" class="sidebar-link">Q&amp;A</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/lanjz/Browser/浏览器中的进程与线程.html#什么是异步" class="sidebar-link">什么是异步</a></li><li class="sidebar-sub-header"><a href="/lanjz/Browser/浏览器中的进程与线程.html#click是异步的嘛" class="sidebar-link">click是异步的嘛</a></li><li class="sidebar-sub-header"><a href="/lanjz/Browser/浏览器中的进程与线程.html#如何实现浏览器内多个标签页之间的通信" class="sidebar-link">如何实现浏览器内多个标签页之间的通信</a></li></ul></li></ul></li><li><a href="/lanjz/Browser/浏览器渲染HTML的工作原理.html" class="sidebar-link">浏览器渲染HTML的工作原理</a></li><li><a href="/lanjz/Browser/HTML渲染过程.html" class="sidebar-link">HTML渲染过程</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="浏览器中的进程和线程"><a href="#浏览器中的进程和线程" class="header-anchor">#</a> 浏览器中的进程和线程</h1> <p>在了解浏览器中的进程和线程前先了解一下什么是进程和线程</p> <h2 id="进程和线程"><a href="#进程和线程" class="header-anchor">#</a> 进程和线程</h2> <p>本质上说，进程和线程都是 CPU 工作时间片的一个描述：</p> <ul><li><p>进程描述了 CPU 在运行指令及加载和保存上下文所需的时间，放在应用上来说就代表了一个程序。</p></li> <li><p>线程是进程中的更小单位，描述了执行一段指令所需的时间</p></li></ul> <p><strong>进程是资源分配的最小单位，线程是CPU调度的最小单位。</strong></p> <p>一个进程就是一个程序的运行实例。详细解释就是，启动一个程序的时候，操作系统会为该程序创建一块内存，用来存放代码、运行中的数据和一个执行任务的主线程，我们把这样的一个运行环境叫进程。进程是运行在虚拟内存上的，虚拟内存是用来解决用户对硬件资源的无限需求和有限的硬件资源之间的矛盾的。从操作系统角度来看，虚拟内存即交换文件；从处理器角度看，虚拟内存即虚拟地址空间</p> <p>如果程序很多时，内存可能会不够，操作系统为每个进程提供一套独立的虚拟地址空间，从而使得同一块物理内存在不同的进程中可以对应到不同或相同的虚拟地址，变相的增加了程序可以使用的内存。</p> <p><strong>进程和线程之间的关系有以下四个特点：</strong></p> <ol><li><p>进程中的任意一线程执行出错，都会导致整个进程的崩溃。</p></li> <li><p>线程之间共享进程中的数据。</p></li> <li><p>当一个进程关闭之后，操作系统会回收进程所占用的内存， 当一个进程退出时，操作系统会回收该进程所申请的所有资源；即使其中任意线程因为操作不当导致内存泄漏，当进程退出时，这些内存也会被正确回收。</p></li> <li><p>进程之间的内容相互隔离。 进程隔离就是为了使操作系统中的进程互不干扰，每一个进程只能访问自己占有的数据，也就避免出现进程 A 写入数据到进程 B 的情况。正是因为进程之间的数据是严格隔离的，所以一个进程如果崩溃了，或者挂起了，是不会影响到其他进程的。如果进程之间需要进行数据的通信，这时候，就需要使用用于进程间通信的机制了</p></li></ol> <h3 id="进程和线程的区别"><a href="#进程和线程的区别" class="header-anchor">#</a> 进程和线程的区别</h3> <ul><li><p>进程可以看做独立应用，线程不能</p></li> <li><p>资源：进程是cpu资源分配的最小单位（是能拥有资源和独立运行的最小单位）；线程是cpu调度的最小单位（线程是建立在进程的基础上的一次程序运行单位，一个进程中可以有多个线程）。</p></li> <li><p>通信方面：线程间可以通过直接共享同一进程中的资源，而进程通信需要借助 进程间通信。</p></li> <li><p>调度：进程切换比线程切换的开销要大。线程是CPU调度的基本单位，线程的切换不会引起进程切换，但某个进程中的线程切换到另一个进程中的线程时，会引起进程切换。</p></li> <li><p>系统开销：由于创建或撤销进程时，系统都要为之分配或回收资源，如内存、I/O 等，其开销远大于创建或撤销线程时的开销。同理，在进行进程切换时，涉及当前执行进程 CPU 环境还有各种各样状态的保存及新调度进程状态的设置，而线程切换时只需保存和设置少量寄存器内容，开销较小。</p></li></ul> <h3 id="进程之前的通信方式-ipc"><a href="#进程之前的通信方式-ipc" class="header-anchor">#</a> 进程之前的通信方式（IPC）</h3> <p>什么是 IPC 通信，如何建立 IPC 通信？什么场景下需要用到 IPC 通信？</p> <p>IPC (Inter-process communication) ，即进程间通信技术，由于每个进程创建之后都有自己的独立地址空间，实现 IPC 的目的就是为了进程之间资源共享访问，实现 IPC 的方式有多种：管道、消息队列、信号量、Domain Socket，Node.js 通过 pipe来实现。</p> <p><strong>管道通信</strong></p> <p>管道是一种最基本的进程间通信机制。管道就是操作系统在内核中开辟的一段缓冲区，进程1可以将需要交互的数据拷贝到这段缓冲区，进程2就可以读取了。</p> <p>管道的特点：</p> <ul><li><p>只能单向通信</p></li> <li><p>只能血缘关系的进程进行通信</p></li> <li><p>依赖于文件系统</p></li> <li><p>生命周期随进程</p></li> <li><p>面向字节流的服务</p></li> <li><p>管道内部提供了同步机制</p></li></ul> <p><strong>消息队列通信</strong></p> <p>消息队列就是一个消息的列表。用户可以在消息队列中添加消息、读取消息等。消息队列提供了一种从一个进程向另一个进程发送一个数据块的方法。 每个数据块都被认为含有一个类型，接收进程可以独立地接收含有不同类型的数据结构。可以通过发送消息来避免命名管道的同步和阻塞问题。但是消息队列与命名管道一样，每个数据块都有一个最大长度的限制。</p> <p>使用消息队列进行进程间通信，可能会收到数据块最大长度的限制约束等，这也是这种通信方式的缺点。如果频繁的发生进程间的通信行为，那么进程需要频繁地读取队列中的数据到内存，相当于间接地从一个进程拷贝到另一个进程，这需要花费时间。</p> <p><strong>信号量通信</strong></p> <p>共享内存最大的问题就是多进程竞争内存的问题，就像类似于线程安全问题。我们可以使用信号量来解决这个问题。信号量的本质就是一个计数器，用来实现进程之间的互斥与同步。例如信号量的初始值是 1，然后 a 进程来访问内存1的时候，我们就把信号量的值设为 0，然后进程b 也要来访问内存1的时候，看到信号量的值为 0 就知道已经有进程在访问内存1了，这个时候进程 b 就会访问不了内存1。所以说，信号量也是进程之间的一种通信方式。</p> <p><strong>共享内存通信</strong></p> <p>共享内存就是映射一段能被其他进程所访问的内存，这段共享内存由一个进程创建，但多个进程都可以访问（使多个进程可以访问同一块内存空间）。共享内存是最快的 IPC 方式，它是针对其他进程间通信方式运行效率低而专门设计的。它往往与其他通信机制，如信号量，配合使用，来实现进程间的同步和通信。</p> <p><strong>套接字通信</strong></p> <p>上面说的共享内存、管道、信号量、消息队列，他们都是多个进程在一台主机之间的通信，那两个相隔几千里的进程能够进行通信吗？答是必须的，这个时候 Socket 这家伙就派上用场了，例如我们平时通过浏览器发起一个 http 请求，然后服务器给你返回对应的数据，这种就是采用 Socket 的通信方式了。</p> <h3 id="关于父进程与子进程是如何通信的"><a href="#关于父进程与子进程是如何通信的" class="header-anchor">#</a> 关于父进程与子进程是如何通信的</h3> <p>父进程在创建子进程之前会先去创建 IPC 通道并一直监听该通道，之后开始创建子进程并通过环境变量（NODECHANNELFD）的方式将 IPC 通道的文件描述符传递给子进程，子进程启动时根据传递的文件描述符去链接 IPC 通道，从而建立父子进程之间的通信机制</p> <h3 id="僵尸进程和孤儿进程是什么"><a href="#僵尸进程和孤儿进程是什么" class="header-anchor">#</a> 僵尸进程和孤儿进程是什么？</h3> <ul><li><p>孤儿进程：父进程退出了，而它的一个或多个进程还在运行，那这些子进程都会成为孤儿进程。孤儿进程将被init进程(进程号为1)所收养，并由init进程对它们完成状态收集工作。</p></li> <li><p>僵尸进程：子进程比父进程先结束，而父进程又没有释放子进程占用的资源，那么子进程的进程描述符仍然保存在系统中，这种进程称之为僵死进程。</p></li></ul> <h3 id="死锁"><a href="#死锁" class="header-anchor">#</a> 死锁</h3> <p>所谓死锁，是指多个进程在运行过程中因争夺资源而造成的一种僵局，当进程处于这种僵持状态时，若无外力作用，它们都将无法再向前推进。</p> <p>系统中的资源可以分为两类：</p> <ul><li><p>可剥夺资源，是指某进程在获得这类资源后，该资源可以再被其他进程或系统剥夺，CPU和主存均属于可剥夺性资源；</p></li> <li><p>不可剥夺资源，当系统把这类资源分配给某进程后，再不能强行收回，只能在进程用完后自行释放，如磁带机、打印机等。</p></li></ul> <p><strong>产生死锁的原因：</strong></p> <p>（1）竞争资源</p> <ul><li><p>产生死锁中的竞争资源之一指的是竞争不可剥夺资源（例如：系统中只有一台打印机，可供进程P1使用，假定P1已占用了打印机，若P2继续要求打印机打印将阻塞）</p></li> <li><p>产生死锁中的竞争资源另外一种资源指的是竞争临时资源（临时资源包括硬件中断、信号、消息、缓冲区内的消息等），通常消息通信顺序进行不当，则会产生死锁</p></li></ul> <p>（2）进程间推进顺序非法（循环）</p> <p>若P1保持了资源R1，P2保持了资源R2，系统处于不安全状态，因为这两个进程再向前推进，便可能发生死锁。例如，当P1运行到P1：Request（R2）时，将因R2已被P2占用而阻塞；当P2运行到P2：Request（R1）时，也将因R1已被P1占用而阻塞，于是发生进程死锁</p> <p><strong>产生死锁的必要条件：</strong></p> <p>互斥条件：进程要求对所分配的资源进行排它性控制，即在一段时间内某资源仅为一进程所占用。</p> <p>请求和保持条件：当进程因请求资源而阻塞时，对已获得的资源保持不放。</p> <p>不剥夺条件：进程已获得的资源在未使用完之前，不能剥夺，只能在使用完时由自己释放。</p> <p>环路等待条件：在发生死锁时，必然存在一个进程——资源的环形链。</p> <p><strong>预防死锁的方法：</strong></p> <p>资源一次性分配：一次性分配所有资源，这样就不会再有请求了（破坏请求条件）</p> <p>只要有一个资源得不到分配，也不给这个进程分配其他的资源（破坏请保持条件）</p> <p>可剥夺资源：即当某进程获得了部分资源，但得不到其它资源，则释放已占有的资源（破坏不可剥夺条件）</p> <p>资源有序分配法：系统给每类资源赋予一个编号，每一个进程按编号递增的顺序请求资源，释放则相反（破坏环路等待条件）</p> <h2 id="多进程的浏览器"><a href="#多进程的浏览器" class="header-anchor">#</a> 多进程的浏览器</h2> <p>理解了进程与线程了区别后，接下来对浏览器进行一定程度上的认识：</p> <ul><li><p>浏览器是多进程的</p></li> <li><p>浏览器之所以能够运行，是因为系统给它的进程分配了资源（cpu、内存）</p></li> <li><p>简单点理解，每打开一个 Tab 页，就相当于创建了一个独立的浏览器进程。</p></li></ul> <p>浏览器是多进程的，有一个主控进程，以及每一个 Tab 页面都会新开一个进程（某些情况下多个 Tab 会合并进程）</p> <p>如下图：</p> <p><img src="/lanjz/assets/img/browser_1.e0d8ecf7.png" alt=""></p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>打开 <code>chrome任务管理器的方法</code> ：在浏览头部标签页旁边的空白区域，<code>右键</code> 就可以弹出有任务管理器的面板.或者 <code>Chrome的更多工具 -&gt; 任务管理器</code></p></div> <p>从 <code>chrome任务管理器</code> 可以看到浏览器进程可能包括主控进程，插件扩展进程，GPU，tab页（浏览器内核）等等</p> <ul><li><p>Browser进程：浏览器的主进程（负责协调、主控），只有一个</p> <ul><li><p>负责浏览器界面显示，与用户交互。如前进，后退等</p></li> <li><p>负责各个页面的管理，创建和销毁其他进程</p></li> <li><p>将 Renderer 进程得到的内存中的 Bitmap，绘制到用户界面上</p></li> <li><p>网络资源的管理，下载等</p></li></ul></li> <li><p>第三方插件扩展进程：每种类型的插件对应一个进程，仅当使用该插件时才创建</p></li> <li><p>GPU进程：最多一个，用于 3D 绘制</p></li> <li><p>浏览器渲染进程（浏览器内核）（ Renderer 进程，内部是多线程的）： 可能有多个，默认每个 Tab 页面一个进程，互不影响（有时候会优化，如多个空白 tab 会合并成一个进程）</p> <ul><li>主要作用：控制页面渲染，脚本执行，事件处理等</li></ul></li> <li><p>网络进程</p> <p>主要负责页面的网络资源加载，之前是作为一个模块运行在浏览器进程里面的，直至最近才独立出来，成为一个单独的进程</p></li></ul> <p><strong>所以，打开一个网页，最少需要四个进程：</strong> 1 个网络进程、1 个浏览器进程、1 个 GPU 进程以及 1 个渲染进程。如果打开的页面有运行插件的话，还需要再加上 1 个插件进程</p> <blockquote><p>浏览器中打开一个网页相当于新起了一个进程（进程内有自己的多线程）</p></blockquote> <h3 id="浏览器多进程的优势"><a href="#浏览器多进程的优势" class="header-anchor">#</a> 浏览器多进程的优势</h3> <p>相比于单进程浏览器，多进程有如下优点：</p> <ul><li><p>避免单个 <code>page crash</code> 影响整个浏览器</p></li> <li><p>避免第三方插件 <code>crash</code> 影响整个浏览器</p></li> <li><p>多进程充分利用多核优势</p></li> <li><p>方便使用沙盒模型隔离插件等进程，提高浏览器稳定性</p></li></ul> <p>简单点理解：如果浏览器是单进程，那么某个 Tab 页崩溃了，就影响了整个浏览器，体验有多差；同理如果是单进程，插件崩溃了也会影响整个浏览器</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>当然，开启开进程就意味着内存等资源消耗也会更大，有点空间换时间的意思。</p></div> <h2 id="渲染进程"><a href="#渲染进程" class="header-anchor">#</a> 渲染进程</h2> <p>作为前端一枚，我们这里重点关注一下 <strong>渲染进程</strong></p> <p>可以这样理解，页面的渲染，JS的执行，事件的循环，都在这个进程内进行。</p> <p><strong>浏览器的渲染进程是多线程的</strong>，那么接下来看看它都包含了哪些线程（列举一些主要常驻线程）：</p> <ul><li><p>GUI渲染线程</p> <ul><li><p>负责渲染浏览器界面，解析 HTML，CSS，构建 DOM 树和 RenderObject 树，布局和绘制等。</p></li> <li><p>当界面需要重绘（Repaint）或由于某种操作引发回流(reflow)时，该线程就会执行</p></li> <li><p>注意，GUI 渲染线程与 JS 引擎线程是互斥的，当 JS 引擎执行时 GUI 线程会被挂起（相当于被冻结了），GUI 更新会被保存在一个队列中等到 JS 引擎空闲时立即被执行</p></li></ul></li> <li><p>JS引擎线程</p> <ul><li><p>也称为 JS 内核，负责处理 Javascript 脚本程序。（例如V8引擎）</p></li> <li><p>JS 引擎线程负责解析 Javascript 脚本，运行代码。</p></li> <li><p>JS 引擎一直等待着任务队列中任务的到来，然后加以处理，一个 Tab 页（renderer进程）中无论什么时候都只有一个 JS 线程在运行 JS 程序</p></li> <li><p>同样注意，GUI 渲染线程与 JS 引擎线程是互斥的，所以如果 JS 执行的时间过长，这样就会造成页面的渲染不连贯，导致页面渲染加载阻塞。</p></li></ul></li> <li><p>事件触发线程</p> <ul><li>属于浏览器而不是JS引擎，用来控制事件循环；当JS引擎执行代码块如setTimeOut时（也可是来自浏览器内核的其他线程,如鼠标点击、AJAX异步请求等），会将对应任务添加到事件触发线程中；当对应的事件符合触发条件被触发时，该线程会把事件添加到待处理队列的队尾，等待JS引擎的处理</li></ul></li> <li><p>定时触发器线程</p> <ul><li><p>传说中的 <code>setInterval</code> 与 <code>setTimeout</code> 所在线程</p></li> <li><p>浏览器定时计数器并不是由 JavaScript 引擎计数的,（因为JavaScript引擎是单线程的, 如果处于阻塞线程状态就会影响记计时的准确）</p></li> <li><p>因此通过单独线程来计时并触发定时（计时完毕后，添加到事件队列中，等待JS引擎空闲后执行）</p></li> <li><p>注意，W3C 在HTML标准中规定，规定要求setTimeout中低于4ms的时间间隔算为4ms。</p></li></ul> <p><strong>注意：W3C在HTML标准中规定，定时器的定时时间不能小于4ms，如果是小于4ms，则默认为4ms。</strong></p></li> <li><p>异步 <code>http</code> 请求线程</p> <ul><li><p>在 <code>XMLHttpRequest</code> 在连接后是通过浏览器新开一个线程请求</p></li> <li><p>将检测到状态变更时，如果设置有回调函数，异步线程就产生状态变更事件，将这个回调再放入事件队列中。再由 JavaScript 引擎执行。</p></li></ul></li></ul> <p><img src="/lanjz/assets/img/browser_2.9db1aec3.png" alt=""></p> <h3 id="browser进程和renderer进程的通信过程"><a href="#browser进程和renderer进程的通信过程" class="header-anchor">#</a> Browser进程和Renderer进程的通信过程</h3> <p>以浏览器解析 URL 到页面渲染为例：</p> <ul><li><p>Browser 进程收到用户请求，首先需要获取页面内容（譬如通过网络下载资源），随后将该任务通过 RendererHost 接口传递给 Render 进程</p></li> <li><p>Renderer 进程的 Renderer 接口收到消息，简单解释后，交给渲染线程，然后开始渲染</p> <ul><li><p>渲染线程接收请求，加载网页并渲染网页，这其中可能需要 Browser 进程获取资源和需要 GPU 进程来帮助渲染</p></li> <li><p>当然可能会有 JS 线程操作 DOM（这样可能会造成回流并重绘）</p></li></ul></li> <li><p>最后 Render 进程将结果传递给 Browser 进程</p></li> <li><p>Browser 进程接收到结果并将结果绘制出来</p></li></ul> <h3 id="gui渲染线程与js引擎线程互斥"><a href="#gui渲染线程与js引擎线程互斥" class="header-anchor">#</a> GUI渲染线程与JS引擎线程互斥</h3> <p>由于 JavaScript 是可操纵 DOM 的，如果在修改这些元素属性同时渲染界面（即JS线程和UI线程同时运行），那么渲染线程前后获得的元素数据就可能不一致了。</p> <p>因此为了防止渲染出现不可预期的结果，浏览器设置 GUI 渲染线程与 JS 引擎为互斥的关系，当JS引擎执行时GUI线程会被挂起</p> <p>GUI更新则会被保存在一个队列中等到 JS 引擎线程空闲时立即被执行。所以，要尽量避免JS执行时间过长，这样就会造成页面的渲染不连贯，导致页面渲染加载阻塞的感觉。</p> <h2 id="q-a"><a href="#q-a" class="header-anchor">#</a> Q&amp;A</h2> <h3 id="什么是异步"><a href="#什么是异步" class="header-anchor">#</a> 什么是异步</h3> <ul><li><p>在主线程外额外开启一个线程去处理任务，所以不会导致主线程的代码阻塞</p></li> <li><p>不用等待结果的代码</p></li></ul> <h3 id="click是异步的嘛"><a href="#click是异步的嘛" class="header-anchor">#</a> click是异步的嘛</h3> <p>事件都是由事件处理线程处理的，所以是异步</p> <h3 id="如何实现浏览器内多个标签页之间的通信"><a href="#如何实现浏览器内多个标签页之间的通信" class="header-anchor">#</a> 如何实现浏览器内多个标签页之间的通信</h3> <p>实现多个标签页之间的通信，本质上都是通过中介者模式来实现的。因为标签页之间没有办法直接通信，因此我们可以找一个中介者，让标签页和中介者进行通信，然后让这个中介者来进行消息的转发。通信方法如下：</p> <ul><li><p><strong>使用 websocket：</strong> websocket 协议可以实现服务器推送，所以服务器就可以用来当做这个中介者。标签页通过向服务器发送数据，然后由服务器向其他标签页推送转发</p></li> <li><p><strong>使用 ShareWorker：</strong> shareWorker 会在页面存在的生命周期内创建一个唯一的线程，并且开启多个页面也只会使用同一个线程。这个时候共享线程就可以充当中介者的角色。标签页间通过共享一个线程，然后通过这个共享的线程来实现数据的交换</p></li> <li><p><strong>使用 localStorage 的方式</strong> 我们可以在一个标签页对 <code>localStorage</code> 的变化事件进行监听，然后当另一个标签页修改数据的时候，我们就可以通过这个监听事件来获取到数据。这个时候 <code>localStorage</code> 对象就是充当的中介者的角色</p> <div class="language-js extra-class"><pre class="language-js"><code>window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'storage'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.my-key'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>textContent <span class="token operator">=</span> e<span class="token punctuation">.</span>key<span class="token punctuation">;</span>
  document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.my-old'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>textContent <span class="token operator">=</span> e<span class="token punctuation">.</span>oldValue<span class="token punctuation">;</span>
  document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.my-new'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>textContent <span class="token operator">=</span> e<span class="token punctuation">.</span>newValue<span class="token punctuation">;</span>
  document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.my-url'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>textContent <span class="token operator">=</span> e<span class="token punctuation">.</span>url<span class="token punctuation">;</span>
  document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.my-storage'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>textContent <span class="token operator">=</span> e<span class="token punctuation">.</span>storageArea<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>注意点：</p> <ul><li>在同一个页面内发生的改变不会起作用</li></ul> <p>—在相同域名下的其他页面（如一个新标签或 iframe）发生的改变才会起作用</p> <ul><li>在其他域名下的页面不能访问相同的 Storage 对象</li></ul></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/lanjz/Browser/浏览器渲染HTML的工作原理.html">
        浏览器渲染HTML的工作原理
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/lanjz/assets/js/app.92b1c030.js" defer></script><script src="/lanjz/assets/js/2.4cffbc58.js" defer></script><script src="/lanjz/assets/js/35.fa80dfdb.js" defer></script>
  </body>
</html>
