(window.webpackJsonp=window.webpackJsonp||[]).push([[211],{816:function(a,e,v){"use strict";v.r(e);var _=v(58),t=Object(_.a)({},(function(){var a=this,e=a.$createElement,v=a._self._c||e;return v("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[v("h1",{attrs:{id:"问题小计"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#问题小计"}},[a._v("#")]),a._v(" 问题小计")]),a._v(" "),v("h2",{attrs:{id:"渐近式重构"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#渐近式重构"}},[a._v("#")]),a._v(" 渐近式重构")]),a._v(" "),v("p",[a._v("比如之前有个前端是使用PHP模板渲染的项目，现在需要使用 VUE 框架重构，如何渐近式得完成重构。"),v("br"),a._v("\n即重构完的页面就投入生产使用，说白了就是新旧项目都运行在线上，访问的页面有新页面时就跳到新项目没有则跳转旧项目")]),a._v(" "),v("p",[a._v("其实两个项目来回跳转使用的最大问题是于登录权限的问题，解决这个问题一个技巧是两个项目都挂载在同一个域名下，Cookie 种在根域名下，这样只有有一个项目登录了，另一个项目也能使用相同的Cookie 进行微分验证")]),a._v(" "),v("h2",{attrs:{id:"公共组件库的管理"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#公共组件库的管理"}},[a._v("#")]),a._v(" 公共组件库的管理")]),a._v(" "),v("ul",[v("li",[v("p",[a._v("成熟的组件库可以使用 npm")])]),a._v(" "),v("li",[v("p",[a._v("还在完善中的组件库可以使用 gitTree")])])]),a._v(" "),v("h2",{attrs:{id:"难得在工作真正中使用-class"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#难得在工作真正中使用-class"}},[a._v("#")]),a._v(" 难得在工作真正中使用 Class")]),a._v(" "),v("p",[a._v("一个 Electron 项目，有两个版本：普通版和加强版。两个版本界面一样，功能一致，交互调用的方法也基本一样，只是加强版在某些方法上作用比普通版强一些。于是使用Class来封装这些方法，公共部分放在基类，不同的版本在各自继承实现自己特定功能部分，启动或和打包时通过命令在项目注入全局变量，通过全局变量来 "),v("code",[a._v("require")]),a._v(" 普通版或加强版的方法")]),a._v(" "),v("h2",{attrs:{id:"疑难杂证"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#疑难杂证"}},[a._v("#")]),a._v(" 疑难杂证")]),a._v(" "),v("h3",{attrs:{id:"被遗忘的跨域-header"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#被遗忘的跨域-header"}},[a._v("#")]),a._v(" 被遗忘的跨域 Header")]),a._v(" "),v("p",[a._v("跨域很常见，有个项目使用 CORS 来处理跨域问题，前后端正常访问没啥问题。直到项目有这么一个需求，下载附件。交互设计为：")]),a._v(" "),v("ol",[v("li",[v("p",[a._v("前端请求接口")])]),a._v(" "),v("li",[v("p",[a._v("后端返回Buffer内容，文件名放在 Header 头中")])]),a._v(" "),v("li",[v("p",[a._v("前端获取 Buffer 内容转换成blog 然后根据 Header 头中值作为文件名生成文件")])])]),a._v(" "),v("p",[a._v("问题在第三点 Header 头，在运行时发现总是拿不到后端同学所谓的 Header 头的值。前后端争执不下~ 都说自己没问题~~")]),a._v(" "),v("p",[a._v("这个问题的根本原因是大家遗忘了跨域情况下，允许访问的 Header 属性是有限的，能访问的 Header 属性有：")]),a._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[a._v("Accept\nAccept-Language\nContent-Language\nContent-Type （需要注意额外的限制）\nDPR\nDownlink\nSave-Data\nViewport-Width\nWidth\n")])])]),v("p",[a._v("所以后端需要配置 "),v("code",[a._v("Access-Control-Allow-Headers")]),a._v(" 添加自定义的 Header 名！")]),a._v(" "),v("h3",{attrs:{id:"计一次小程序拖动组件使用问题"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#计一次小程序拖动组件使用问题"}},[a._v("#")]),a._v(" 计一次小程序拖动组件使用问题")]),a._v(" "),v("p",[a._v("小程序功能，"),v("strong",[a._v("长按")]),a._v("拖动组件进行排序")]),a._v(" "),v("ol",[v("li",[v("p",[a._v("开发时整个拖动组件是在 "),v("code",[a._v("movable-area")]),a._v(" 组件的基础上实现的")])]),a._v(" "),v("li",[v("p",[a._v("基本功能完成后在调整细节时发现长按触发时会有偶发性的 bug，时而能拖动、时而不能拖动")])]),a._v(" "),v("li",[v("p",[a._v("求助谷哥度娘及查看微信小程序社区找解决文案，并没有找到")])]),a._v(" "),v("li",[v("p",[a._v("由于排期问题，跟产品沟通更换个交互方案，先实现了")])]),a._v(" "),v("li",[v("p",[a._v("提测后又重新思考这个问题，并再次认真查看组件的使用文档和社区上提交的问题，并经过自己多方尝试后发现后终于找开问题所在！！")]),a._v(" "),v("p",[v("code",[a._v("movable-area")]),a._v(" 组件默认的拖拽方向 "),v("code",[a._v("none")]),a._v(" 即上下左右都可以，我这个组件只有上下拖动，所以只赋值了 "),v("code",[a._v("horizontal")]),a._v("， 问题就在这里了，设置了 "),v("code",[a._v("horizontal")]),a._v(" 就会出现这个 bug，后来改成默认 "),v("code",[a._v("none")]),a._v(" 就行了。真是脑阔疼")])])]),a._v(" "),v("h3",{attrs:{id:"页面迷之卡顿问题"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#页面迷之卡顿问题"}},[a._v("#")]),a._v(" 页面迷之卡顿问题")]),a._v(" "),v("p",[a._v("刚接手的项目，有个同事让我帮忙看下有个页面为什么总是迷之卡死。继续排查是一个下拉表单有上千条选择选择导致的。"),v("br"),a._v("\n所以嘛页面卡死无非两个问题")]),a._v(" "),v("ol",[v("li",[v("p",[a._v("要么复杂的计算把进程堵了")])]),a._v(" "),v("li",[v("p",[a._v("要么就是页面 DOM 元素太多了")])])]),a._v(" "),v("h3",{attrs:{id:"微信分享配置不生效"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#微信分享配置不生效"}},[a._v("#")]),a._v(" 微信分享配置不生效")]),a._v(" "),v("p",[a._v("如果进入分享的页面是没问题，如果从其它页面使用 "),v("code",[a._v("router")]),a._v(" 跳转到要分享的页面，\n再分享时会出生分享配置不生效的问题")]),a._v(" "),v("ul",[v("li",[v("p",[a._v("原因：微信的地址栏一直保持着一开始进去的地址")])]),a._v(" "),v("li",[v("p",[a._v("解决方案：使用 "),v("code",[a._v("window.location")]),a._v(" 代替 "),v("code",[a._v("router")]),a._v(" 跳转")])])])])}),[],!1,null,null,null);e.default=t.exports}}]);