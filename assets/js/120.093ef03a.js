(window.webpackJsonp=window.webpackJsonp||[]).push([[120],{694:function(e,a,v){"use strict";v.r(a);var _=v(58),s=Object(_.a)({},(function(){var e=this,a=e.$createElement,v=e._self._c||a;return v("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[v("h1",{attrs:{id:"package管理"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#package管理"}},[e._v("#")]),e._v(" Package管理")]),e._v(" "),v("h2",{attrs:{id:"npm-命令"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#npm-命令"}},[e._v("#")]),e._v(" NPM 命令")]),e._v(" "),v("p",[v("strong",[e._v("查看模块包信息")])]),e._v(" "),v("ul",[v("li",[v("p",[v("code",[e._v("npm list")]),e._v(": 查看所有已安装的 npm 软件包（包括它们的依赖包）的最新版本")])]),e._v(" "),v("li",[v("p",[v("code",[e._v("npm list -g")]),e._v(": 查看所有已安装的全局 npm 包")])]),e._v(" "),v("li",[v("p",[v("code",[e._v("npm list -g --depth=0")]),e._v(": 仅获取顶层的软件包")]),e._v(" "),v("div",{staticClass:"language-js extra-class"},[v("pre",{pre:!0,attrs:{class:"language-js"}},[v("code",[e._v("├── gitbook"),v("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),e._v("cli@"),v("span",{pre:!0,attrs:{class:"token number"}},[e._v("2.3")]),v("span",{pre:!0,attrs:{class:"token number"}},[e._v(".2")]),e._v("\n├── npm@"),v("span",{pre:!0,attrs:{class:"token number"}},[e._v("6.13")]),v("span",{pre:!0,attrs:{class:"token number"}},[e._v(".4")]),e._v("\n├── nrm@"),v("span",{pre:!0,attrs:{class:"token number"}},[e._v("1.2")]),v("span",{pre:!0,attrs:{class:"token number"}},[e._v(".1")]),e._v("\n└── yarn@"),v("span",{pre:!0,attrs:{class:"token number"}},[e._v("1.19")]),v("span",{pre:!0,attrs:{class:"token number"}},[e._v(".1")]),e._v("\n")])])])]),e._v(" "),v("li",[v("p",[v("code",[e._v("npm list -g yarn")]),e._v(": 可以通过指定名称来获取特定软件包的版本")]),e._v(" "),v("div",{staticClass:"language-js extra-class"},[v("pre",{pre:!0,attrs:{class:"language-js"}},[v("code",[e._v("└── yarn@"),v("span",{pre:!0,attrs:{class:"token number"}},[e._v("1.19")]),v("span",{pre:!0,attrs:{class:"token number"}},[e._v(".1")]),e._v("\n")])])])]),e._v(" "),v("li",[v("p",[v("code",[e._v("npm view [package_name] version")]),e._v(": 查看软件包在 npm 仓库上最新的可用版本")])]),e._v(" "),v("li",[v("p",[v("code",[e._v("npm view [package_name] versions")]),e._v(": 查看软件包在 npm 仓库上所有的以前的版本")])])]),e._v(" "),v("p",[v("strong",[e._v("安装模块包")])]),e._v(" "),v("ul",[v("li",[v("p",[v("code",[e._v("npm install")]),e._v(": 根据 "),v("code",[e._v("package.json")]),e._v(" 配置安装模块到 "),v("code",[e._v("node_modules")]),e._v("，并自动添加到在 "),v("code",[e._v("package.json")]),e._v(" 文件中的 "),v("code",[e._v("dependencies")]),e._v(" 列表下（在 npm 5 之前：必须手动指定 "),v("code",[e._v("--save")]),e._v("）")]),e._v(" "),v("p",[e._v("当添加了 "),v("code",[e._v("-D")]),e._v(" 或 "),v("code",[e._v("--save-dev")]),e._v(" 标志时，则会将其安装为开发依赖项（会被添加到 "),v("code",[e._v("devDependencies")]),e._v(" 列表）")]),e._v(" "),v("p",[e._v("当投入生产环境时，如果输入 "),v("code",[e._v("npm install")]),e._v(" 且该文件夹包含 "),v("code",[e._v("package.json")]),e._v(" 文件时，则会安装它们("),v("code",[e._v("devDependencies")]),e._v(" 列表和 "),v("code",[e._v("dependencies")]),e._v(" 列表)，因为 npm 会假定这是开发部署")]),e._v(" "),v("p",[e._v("需要设置 "),v("code",[e._v("--production")]),e._v(" 标志（"),v("code",[e._v("npm install --production")]),e._v("），以避免安装这些开发依赖项")])]),e._v(" "),v("li",[v("p",[v("code",[e._v("npm install <packagename>")]),e._v(": 安装最新的可用版本并放入 "),v("code",[e._v("node_modules")]),e._v(" 文件夹中，并且还会将相应的条目添加到当前文件夹中存在的 "),v("code",[e._v("package.json")]),e._v(" 和 "),v("code",[e._v("package-lock.json")]),e._v(" 文件中")])]),e._v(" "),v("li",[v("p",[v("code",[e._v("npm install <package>@<version>")]),e._v(": 可以使用 "),v("code",[e._v("@")]),e._v(" 语法来安装 npm 软件包的旧版本")]),e._v(" "),v("div",{staticClass:"language-js extra-class"},[v("pre",{pre:!0,attrs:{class:"language-js"}},[v("code",[e._v("npm install cowsay\n"),v("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// 以上命令会安装 1.3.1 版本（在撰写本文时）")]),e._v("\n\n"),v("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// 使用以下命令可以安装 1.2.0 版本：")]),e._v("\nnpm install cowsay@"),v("span",{pre:!0,attrs:{class:"token number"}},[e._v("1.2")]),v("span",{pre:!0,attrs:{class:"token number"}},[e._v(".0")]),e._v("\n")])])])]),e._v(" "),v("li",[v("p",[v("code",[e._v("npm update")]),e._v(": 更新已安装的模块版本，并且 "),v("code",[e._v("package-lock.json")]),e._v(" 文件会被新版本填充，"),v("code",[e._v("package.json")]),e._v(" 则保持不变")])]),e._v(" "),v("li",[v("p",[v("code",[e._v("npm outdated {-g}")]),e._v(": 列出已安装模块与相应可使用的最新版本")]),e._v(" "),v("div",{staticClass:"language-js extra-class"},[v("pre",{pre:!0,attrs:{class:"language-js"}},[v("code",[e._v("npm outdated "),v("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),e._v("g\n\nPackage  Current  Wanted  Latest  Location\nnpm       "),v("span",{pre:!0,attrs:{class:"token number"}},[e._v("6.13")]),v("span",{pre:!0,attrs:{class:"token number"}},[e._v(".4")]),e._v("  "),v("span",{pre:!0,attrs:{class:"token number"}},[e._v("6.14")]),v("span",{pre:!0,attrs:{class:"token number"}},[e._v(".7")]),e._v("  "),v("span",{pre:!0,attrs:{class:"token number"}},[e._v("6.14")]),v("span",{pre:!0,attrs:{class:"token number"}},[e._v(".7")]),e._v("  global\nyarn      "),v("span",{pre:!0,attrs:{class:"token number"}},[e._v("1.19")]),v("span",{pre:!0,attrs:{class:"token number"}},[e._v(".1")]),e._v("  "),v("span",{pre:!0,attrs:{class:"token number"}},[e._v("1.22")]),v("span",{pre:!0,attrs:{class:"token number"}},[e._v(".4")]),e._v("  "),v("span",{pre:!0,attrs:{class:"token number"}},[e._v("1.22")]),v("span",{pre:!0,attrs:{class:"token number"}},[e._v(".4")]),e._v("  global\n")])])])])]),e._v(" "),v("h2",{attrs:{id:"语义版本控制"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#语义版本控制"}},[e._v("#")]),e._v(" 语义版本控制")]),e._v(" "),v("p",[e._v("语义版本控制的概念很简单：所有的版本都有 3 个数字："),v("code",[e._v("x.y.z")])]),e._v(" "),v("ul",[v("li",[v("p",[e._v("第一个数字是主版本")])]),e._v(" "),v("li",[v("p",[e._v("第二个数字是次版本")])]),e._v(" "),v("li",[v("p",[e._v("第三个数字是补丁版本")])])]),e._v(" "),v("p",[e._v("当发布新的版本时，不仅仅是随心所欲地增加数字，还要遵循以下规则：")]),e._v(" "),v("ul",[v("li",[v("p",[e._v("当进行不兼容的 API 更改时，则升级主版本")])]),e._v(" "),v("li",[v("p",[e._v("当以向后兼容的方式添加功能时，则升级次版本")])]),e._v(" "),v("li",[v("p",[e._v("当进行向后兼容的缺陷修复时，则升级补丁版本")])])]),e._v(" "),v("p",[e._v("npm 设置了一些规则，可用于在 package.json 文件中选择要将软件包更新到的版本（当运行 npm update 时）")]),e._v(" "),v("p",[e._v("这些规则的详情如下：")]),e._v(" "),v("ul",[v("li",[v("p",[v("code",[e._v("^")]),e._v(" : 如果写入的是 "),v("code",[e._v("^0.13.0")]),e._v("，则当运行 "),v("code",[e._v("npm update")]),e._v(" 时，会更新到补丁版本和次版本：即 "),v("code",[e._v("0.13.1")]),e._v("、"),v("code",[e._v("0.14.0")]),e._v("、依此类推")])]),e._v(" "),v("li",[v("p",[v("code",[e._v("~")]),e._v(": 如果写入的是 "),v("code",[e._v("〜0.13.0")]),e._v("，则当运行 "),v("code",[e._v("npm update")]),e._v(" 时，会更新到补丁版本：即 "),v("code",[e._v("0.13.1")]),e._v(" 可以，但 "),v("code",[e._v("0.14.0")]),e._v(" 不可\n以")])]),e._v(" "),v("li",[v("p",[v("code",[e._v(">")]),e._v(": 接受高于指定版本的任何版本")])]),e._v(" "),v("li",[v("p",[v("code",[e._v(">=")]),e._v(": 接受等于或高于指定版本的任何版本")])]),e._v(" "),v("li",[v("p",[v("code",[e._v("<=")]),e._v(": 接受等于或低于指定版本的任何版本")])]),e._v(" "),v("li",[v("p",[v("code",[e._v("<")]),e._v(": 接受低于指定版本的任何版本")])]),e._v(" "),v("li",[v("p",[v("code",[e._v("=")]),e._v(": 接受确切的版本")])]),e._v(" "),v("li",[v("p",[v("code",[e._v("-")]),e._v(": 接受一定范围的版本。例如："),v("code",[e._v("2.1.0 - 2.6.2")])])]),e._v(" "),v("li",[v("p",[v("code",[e._v("||")]),e._v(": 组合集合。例如 "),v("code",[e._v("< 2.1 || > 2.6")])])])]),e._v(" "),v("p",[e._v("可以合并其中的一些符号，例如 "),v("code",[e._v("1.0.0 || >=1.1.0 <1.2.0")]),e._v("，即使用 "),v("code",[e._v("1.0.0")]),e._v(" 或从 "),v("code",[e._v("1.1.0")]),e._v(" 开始但低于 "),v("code",[e._v("1.2.0")]),e._v(" 的版本")]),e._v(" "),v("ul",[v("li",[v("p",[e._v("无符号: 仅接受指定的特定版本（例如 "),v("code",[e._v("1.2.1")]),e._v("）")])]),e._v(" "),v("li",[v("p",[v("code",[e._v("latest")]),e._v(": 使用可用的最新版本")])])]),e._v(" "),v("p",[v("strong",[e._v("卸载 npm 软件包")])]),e._v(" "),v("ul",[v("li",[v("p",[v("code",[e._v("npm uninstall <package-name>")]),e._v(": 卸载之前在本地安装")]),e._v(" "),v("p",[e._v("如果使用 "),v("code",[e._v("-S")]),e._v(" 或 "),v("code",[e._v("--save")]),e._v(" 标志，则此操作还会移除 "),v("code",[e._v("package.json")]),e._v(" 文件中的引用")]),e._v(" "),v("p",[e._v("如果使用 "),v("code",[e._v("-D")]),e._v(" 或 "),v("code",[e._v("--save-dev")]),e._v(" 标志，则此操作还会移除 "),v("code",[e._v("package.json")]),e._v(" 文件中的引用( "),v("code",[e._v("devDependencies")]),e._v("中)")]),e._v(" "),v("div",{staticClass:"language-js extra-class"},[v("pre",{pre:!0,attrs:{class:"language-js"}},[v("code",[e._v("npm uninstall "),v("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),v("span",{pre:!0,attrs:{class:"token constant"}},[e._v("S")]),e._v(" "),v("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),v("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("package")]),v("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),e._v("name"),v("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v("\nnpm uninstall "),v("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),v("span",{pre:!0,attrs:{class:"token constant"}},[e._v("D")]),e._v(" "),v("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),v("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("package")]),v("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),e._v("name"),v("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v("\n")])])])]),e._v(" "),v("li",[v("p",[v("code",[e._v("npm uninstall -g <package-name>")]),e._v(": 卸载已安装的全局模块")])])]),e._v(" "),v("h2",{attrs:{id:"package-json-package-lock-json"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#package-json-package-lock-json"}},[e._v("#")]),e._v(" package.json/package-lock.json")]),e._v(" "),v("p",[v("code",[e._v("package.json")]),e._v(" 文件是项目的清单。 它可以做很多完全互不相关的事情。 例如，它是用于工具的配置中心。 它也是 "),v("code",[e._v("npm")]),e._v(" 和 "),v("code",[e._v("yarn")]),e._v(" 存储所有已安装软件包的名称和版本的地方")]),e._v(" "),v("p",[v("code",[e._v("package-lock.json")]),e._v(" 旨在跟踪被安装的每个软件包的确切版本，以便产品可以以相同的方式被 100％ 复制（即使软件包的维护者更新了软件包）")]),e._v(" "),v("p",[e._v("当运行 "),v("code",[e._v("npm update")]),e._v(" 时，"),v("code",[e._v("package-lock.json")]),e._v(" 文件中的依赖的版本会被更新")]),e._v(" "),v("h2",{attrs:{id:"yarn-命令"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#yarn-命令"}},[e._v("#")]),e._v(" YARN 命令")]),e._v(" "),v("ul",[v("li",[v("code",[e._v("yarn init")]),e._v(": 初始化一个新项目")])]),e._v(" "),v("p",[v("strong",[e._v("安装")])]),e._v(" "),v("ul",[v("li",[v("p",[v("code",[e._v("yarn or yarn install")]),e._v(": 安装 "),v("code",[e._v("package.json")]),e._v(" 中的所有依赖")])]),e._v(" "),v("li",[v("p",[v("code",[e._v("yarn add [模块] --dev")]),e._v(": 安装依赖并添加到 "),v("code",[e._v("devDependencies")])])]),e._v(" "),v("li",[v("p",[v("code",[e._v("yarn add [模块] --peer")]),e._v(": 安装依赖并添加到 "),v("code",[e._v("peerDependencies")])])]),e._v(" "),v("li",[v("p",[v("code",[e._v("yarn add [模块] --optional")]),e._v(": 安装依赖并添加到 "),v("code",[e._v("optionalDependencies")])])]),e._v(" "),v("li",[v("p",[v("code",[e._v("yarn upgrade [package | package@tag | package@version | --scope @scope]... [--ignore-engines] [--pattern]")]),e._v(": 此命令更新指定版本的依赖将依赖项更新到 "),v("code",[e._v("package.json")]),e._v(" 和 "),v("code",[e._v("yarn.lock")])])]),e._v(" "),v("li",[v("p",[v("code",[e._v("yarn install --force")]),e._v(": 强制重新下载所有软件包")])]),e._v(" "),v("li",[v("p",[v("code",[e._v("yarn install --production")]),e._v(": 仅安装生产依赖项")])])]),e._v(" "),v("p",[v("strong",[e._v("移除")])]),e._v(" "),v("ul",[v("li",[v("code",[e._v("yarn remove <package...>")]),e._v(": 移除模块")])]),e._v(" "),v("h2",{attrs:{id:"镜像管理"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#镜像管理"}},[e._v("#")]),e._v(" 镜像管理")]),e._v(" "),v("h3",{attrs:{id:"查看一下镜像源"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#查看一下镜像源"}},[e._v("#")]),e._v(" 查看一下镜像源")]),e._v(" "),v("p",[v("code",[e._v("yarn config get registry")])]),e._v(" "),v("h3",{attrs:{id:"切换为淘宝源"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#切换为淘宝源"}},[e._v("#")]),e._v(" 切换为淘宝源")]),e._v(" "),v("p",[v("code",[e._v("yarn config set registry https://registry.npm.taobao.org")])]),e._v(" "),v("h3",{attrs:{id:"nrm"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#nrm"}},[e._v("#")]),e._v(" nrm")]),e._v(" "),v("p",[e._v("使用 "),v("code",[e._v("nrm")]),e._v(" 可以方便我们管理多个镜像源")]),e._v(" "),v("p",[e._v("安装"),v("code",[e._v("nrm")]),e._v("："),v("code",[e._v("npm install nrm -g")])]),e._v(" "),v("ul",[v("li",[v("p",[e._v("测试已有的源速度："),v("code",[e._v("nrm test")])])]),e._v(" "),v("li",[v("p",[e._v("查看源："),v("code",[e._v("nrm ls")])])]),e._v(" "),v("li",[v("p",[e._v("切换源："),v("code",[e._v("nrm use taobao")])])]),e._v(" "),v("li",[v("p",[e._v("添加源："),v("code",[e._v("nrm add mypaas https://registry-npm.mypaas.com.cn")])])])])])}),[],!1,null,null,null);a.default=s.exports}}]);