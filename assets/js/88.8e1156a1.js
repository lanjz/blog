(window.webpackJsonp=window.webpackJsonp||[]).push([[88],{628:function(e,t,a){"use strict";a.r(t);var o=a(55),s=Object(o.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"localstorage"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#localstorage"}},[e._v("#")]),e._v(" localstorage")]),e._v(" "),a("p",[a("code",[e._v("localstorage")]),e._v("允许将数据长期保留在计算机中，以键值对我形式进行存储")]),e._v(" "),a("h2",{attrs:{id:"用法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#用法"}},[e._v("#")]),e._v(" 用法")]),e._v(" "),a("ul",[a("li",[a("p",[e._v("设置值："),a("code",[e._v("localStorage.setItem('myCat', 'Tom')")])])]),e._v(" "),a("li",[a("p",[e._v("读取值："),a("code",[e._v("localStorage.getItem('myCat')")])])]),e._v(" "),a("li",[a("p",[e._v("移除值："),a("code",[e._v("localStorage.removeItem('myCat')")])])]),e._v(" "),a("li",[a("p",[e._v("移除所有的 "),a("code",[e._v("localStorage")]),e._v(" 项: "),a("code",[e._v("localStorage.clear()")])])])]),e._v(" "),a("p",[e._v("注意点：")]),e._v(" "),a("ul",[a("li",[a("p",[e._v("只可访问当前源的本地空间的"),a("code",[e._v("localstorage")]),e._v("对象")])]),e._v(" "),a("li",[a("p",[e._v("存储的类型会自动转化为字符串类型")])])]),e._v(" "),a("h2",{attrs:{id:"监听localstorage变化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#监听localstorage变化"}},[e._v("#")]),e._v(" 监听localStorage变化")]),e._v(" "),a("p",[e._v("通过重写localStorage的setItem方法实现监听"),a("code",[e._v("localStorage")]),e._v("的变化，思路如下：")]),e._v(" "),a("ul",[a("li",[a("p",[e._v("新建一个事件，并且监这个事件")])]),e._v(" "),a("li",[a("p",[e._v("在"),a("code",[e._v("localStorage.setItem")]),e._v("方法中使用"),a("code",[e._v("window.dispatchEvent")]),e._v("触发事件")])])]),e._v(" "),a("p",[e._v("完整例子：")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('var orignalSetItem = localStorage.setItem;\n    localStorage.setItem = function(key,newValue){\n        var setItemEvent = new Event("setItemEvent");\n        setItemEvent.newValue = newValue;\n        window.dispatchEvent(setItemEvent);\n        orignalSetItem.apply(this,arguments);\n    }\n    window.addEventListener("setItemEvent", function (e) {\n        alert(e.newValue);\n    });\n    localStorage.setItem("name","wang");\n    console.log(window.localStorage)\n')])])]),a("h1",{attrs:{id:"sessionstorage"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#sessionstorage"}},[e._v("#")]),e._v(" sessionStorage")]),e._v(" "),a("p",[a("code",[e._v("sessionStorage")]),e._v("和"),a("code",[e._v("localstorage")]),e._v("类似，区别在于"),a("code",[e._v("sessionStorage")]),e._v("存在周期仅限于会话期间")]),e._v(" "),a("h2",{attrs:{id:"用法-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#用法-2"}},[e._v("#")]),e._v(" 用法")]),e._v(" "),a("ul",[a("li",[a("p",[e._v("设置值："),a("code",[e._v("sessionStorage.setItem('myCat', 'Tom')")])])]),e._v(" "),a("li",[a("p",[e._v("读取值："),a("code",[e._v("sessionStorage.getItem('myCat')")])])]),e._v(" "),a("li",[a("p",[e._v("移除值："),a("code",[e._v("sessionStorage.removeItem('myCat')")])])]),e._v(" "),a("li",[a("p",[e._v("移除所有的 "),a("code",[e._v("sessionStorage")]),e._v(" 项: "),a("code",[e._v("sessionStorage.clear()")])])])])])}),[],!1,null,null,null);t.default=s.exports}}]);