import{_ as t,r as e,o as p,c as o,b as n,d as c,a as l,e as s}from"./app-VicZdUS9.js";const i={},u=s(`<h1 id="js基础" tabindex="-1"><a class="header-anchor" href="#js基础" aria-hidden="true">#</a> JS基础</h1><h1 id="js类型" tabindex="-1"><a class="header-anchor" href="#js类型" aria-hidden="true">#</a> JS类型</h1><p>JS一共有七个类型，这七个类型又可以分为两大类：基本类型和复杂类型</p><p>基本类型：<code>string</code>、<code>number</code>、<code>null</code>、<code>undefined</code>、<code>boolean</code>、<code>symbol</code></p><p>复杂类型：函数、 数组、 对象</p><h2 id="基本类型" tabindex="-1"><a class="header-anchor" href="#基本类型" aria-hidden="true">#</a> 基本类型</h2><h3 id="undefined类型和null" tabindex="-1"><a class="header-anchor" href="#undefined类型和null" aria-hidden="true">#</a> undefined类型和null</h3><p>声明了一个变量，但未对其赋值，那么这个值将为undefined</p><p><code>null</code>是一个空对象的指针，所以 <code>typeof null</code>将等于object</p><p><code>null</code>使用立场：如果一个变量将来要赋值为一个对象，则可以先将此变量赋值为<code>null</code>，以表示这个值是属性对象类型</p><p><code>null == undefined</code> 结果为<code>true</code> 因为<code>==</code>会尝试将两边的变量做类型转换，所以他们的结果会相同。</p><p><code>null === undefined</code> 结果为<code>false</code></p><div class="custom-container tip"><p class="custom-container-title">TIP</p><p><strong>为什么 <code>typeof null === Object</code> 合理嘛？</strong></p><p><code>null</code> 是一种基本数据类型，存储在栈区；而 <code>typeof null</code> 的结果却是 Object，而 Object 是引用数据类型，存储在堆</p><p>其次根据代码 <code>alert (null instanceof Object)</code> 输出结果为 <code>false</code>, 我们可以知道 <code>null</code> 并不是 Object 的实例，两者之间存在矛盾</p><p>为什么 <code>typeof null</code> 的结果是Object?</p><p>简单来说，<code>typeof null</code> 的结果为 Object 的原因是一个 bug. 在 javascript 的最初版本中，使用的 32位系统，js为了性能优化，使用低位来存储变量的类型信息。</p><p>在判断数据类型时，是根据机器码低位标识来判断的，而 <code>null</code> 的机器码标识为全 0 ，而对象的机器码低位标识为 000。所以 <code>typeof null</code> 的结果被误判为 Object</p></div><h3 id="boolean类型" tabindex="-1"><a class="header-anchor" href="#boolean类型" aria-hidden="true">#</a> boolean类型</h3><p>使用<code>Boolean()</code>函数，可以将任何类型转换为<code>boolean类型</code></p><h3 id="number类型" tabindex="-1"><a class="header-anchor" href="#number类型" aria-hidden="true">#</a> number类型</h3><ul><li><p>八进制：以0（零）开头</p></li><li><p>十六进制：以0x开关</p></li></ul><p>浮点数值的最高精度是17位小数，但在进行算术计算时其精确度远远不如整数。例如<code>0.1+0.2 = 0.3000000000000004</code></p><blockquote><p>关于浮点数计算会产生舍入误差的问题，这是使用基于IEEE754数值的浮点计算的通病</p></blockquote><p><strong>工作中如何规则这种问题？</strong></p><ul><li>使用整数进行计算：将浮点数转换成整数后进行计算，最后再将结果转回浮点数</li><li>使用专门的库来进行浮点计算：如 big.js 或 Decimal.js</li><li>如果是用于比较，则可以将数值合理设置精度</li></ul><h4 id="数值范围" tabindex="-1"><a class="header-anchor" href="#数值范围" aria-hidden="true">#</a> 数值范围</h4><ul><li><p><code>Number.MIN_VALUE</code> ：最小值</p></li><li><p><code>Number.MAX.VALUE</code> ：最大值</p></li></ul><p>使用<code>isFinite()</code>函数可以判定一个值是否是有穷的：既位于最大与最小数之间时会返回<code>true</code></p><h3 id="nan类型" tabindex="-1"><a class="header-anchor" href="#nan类型" aria-hidden="true">#</a> NaN类型</h3><p><code>NaN</code>表示不是数值的类型</p><p>作用: 在其它语言中，任何数值除以(或乘以)非数值都会导致错误，从而停止代码执行。但在ECMAScript中，任何数值除以(或乘以)非数值会返回<code>NaN</code>（非数值与数值位置调换也是相同的结果），所以不会影响其他代码执行</p><p><code>NaN</code>特点：</p><ol><li><code>NaN</code>不等于任意值，包括<code>NaN</code>本身</li></ol><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>NaN == NaN // false
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="2"><li>任何涉及<code>NaN</code>的操作都会返回<code>NaN</code></li></ol><p><code>isNaN()</code>：对于不是数值或不能转换成数值的值结果返回<code>true</code></p><p>例如:</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>isNaN(true) // false，因为 true 会转换成数字 1
isNaN(&#39;srt&#39;) // true
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><code>isNaN()</code>也适用于对象，在基于对象使用时，首先会调用该对象的<code>valueof()</code>方法，然后对这个结果进行数值转换，如果不能转换，对这个<code>valueof()</code>返回的结果再调用<code>toString()</code>，再测试返回值。</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>isNaN(null) // false
isNaN({a: 1}) // true
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="object-类型" tabindex="-1"><a class="header-anchor" href="#object-类型" aria-hidden="true">#</a> Object 类型</h2><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 以通过执行\`new\`操作符后跟要创建的对象类型的名称来创建</span>
<span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 也可以省略后面的括号</span>
<span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span>
<span class="token comment">// 也可以通过语法结构来创建</span>
<span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>Object</code>的每个实例都具有下列属性和方法</p><ul><li><p><code>constructor</code>： 保存着创建该实例的函数。对于前面的例子，构建函数（constructor）就是Object</p></li><li><p><code>hasOwnProperty</code>: 检查某个属性是否存在于当前实例中（不是检查是否在该实例的原型中）</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> object1 <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
object1<span class="token punctuation">.</span>property1 <span class="token operator">=</span> <span class="token number">42</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>object1<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span><span class="token string">&#39;property1&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// expected output: true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>object1<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span><span class="token string">&#39;toString&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// expected output: false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>object1<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span><span class="token string">&#39;hasOwnProperty&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// expected output: false</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><code>propertyIsEnumerable</code>: 检查属性是否可以通过<code>for - in</code>枚举出来</p></li><li><p><code>toLocalString()</code>：返回对象的字符串表示</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>o<span class="token punctuation">.</span><span class="token function">toLocalString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// &quot;[object Object]&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p><code>toString()</code>： 返回对象的字符串表示</p></li><li><p><code>valueOf()</code>： 返回对象原始值</p></li></ul><h2 id="类型转换" tabindex="-1"><a class="header-anchor" href="#类型转换" aria-hidden="true">#</a> 类型转换</h2><table><thead><tr><th>空值</th><th>字符串</th><th>数字</th><th>布尔值</th><th>对象</th></tr></thead><tbody><tr><td>undefine</td><td>&quot;unefined&quot;</td><td>NaN</td><td>false</td><td>throw TypeError</td></tr><tr><td>null</td><td>&quot;null&quot;</td><td>0</td><td>false</td><td>throw TypeError</td></tr></tbody></table><table><thead><tr><th>布尔值</th><th>字符串</th><th>数字</th><th>对象</th></tr></thead><tbody><tr><td>true</td><td>&quot;true&quot;</td><td>1</td><td>new Boolean(true)</td></tr><tr><td>false</td><td>&quot;false&quot;</td><td>0</td><td>new Boolean(false)</td></tr></tbody></table><table><thead><tr><th>字符串</th><th>数字</th><th>布尔值</th><th>对象</th></tr></thead><tbody><tr><td>&quot;&quot;(空字符串)</td><td>0</td><td>false</td><td>new String(&quot;&quot;)</td></tr><tr><td>&quot;1.2&quot;</td><td>1.2</td><td>true</td><td>new String(&quot;1.2&quot;)</td></tr><tr><td>&quot;one&quot;</td><td>NaN</td><td>true</td><td>new String(&quot;one&quot;)</td></tr></tbody></table><table><thead><tr><th>数字</th><th>字符串</th><th>布尔值</th><th>对象</th></tr></thead><tbody><tr><td>0</td><td>&quot;0&quot;</td><td>false</td><td>new Number(0)</td></tr><tr><td>-0</td><td>&quot;0&quot;</td><td>false</td><td>new Number(-0)</td></tr><tr><td>NaN</td><td>&quot;NaN&quot;</td><td>false</td><td>new Number(NaN)</td></tr><tr><td>Infinity</td><td>&quot;Infinity&quot;</td><td>true</td><td>new Number(Infinity)</td></tr><tr><td>-Infinity</td><td>&quot;-Infinity&quot;</td><td>true</td><td>new Number(-Infinity)</td></tr><tr><td>-1</td><td>&quot;-1&quot;</td><td>true</td><td>new Number(-1)</td></tr><tr><td>1</td><td>&quot;1&quot;</td><td>true</td><td>new Number(1)</td></tr></tbody></table><table><thead><tr><th>对象</th><th>字符串</th><th>数字</th><th style="text-align:right;">布尔值</th></tr></thead><tbody><tr><td>{}</td><td>&quot;[object Object]&quot;</td><td>NaN</td><td style="text-align:right;">true</td></tr><tr><td>[]</td><td>&quot;&quot;</td><td>0</td><td style="text-align:right;">true</td></tr><tr><td>[9]</td><td>&quot;9&quot;</td><td>9</td><td style="text-align:right;">true</td></tr><tr><td>[&#39;a&#39;]</td><td>&quot;a&quot;</td><td>NaN</td><td style="text-align:right;">true</td></tr></tbody></table><p>从上表中可以看到有几个点需要注意：</p><ul><li><p><code>true</code> 转数字为 <code>1</code></p></li><li><p><code>false</code>转数字为 <code>0</code></p></li><li><p>空字符串转数字为 <code>0</code></p></li><li><p><code>Null</code> 转数字为 <code>0</code></p></li><li><p>原始值到对象的转换也是非常简单，原始值是通过<code>new String()</code>、<code>new Number</code>或<code>new Boolean()</code>构造函数，转换为它们各自的包装对象</p></li></ul><h3 id="基本类型的转换" tabindex="-1"><a class="header-anchor" href="#基本类型的转换" aria-hidden="true">#</a> 基本类型的转换</h3><p><strong>显示类型转换</strong></p><p>使用<code>String()</code>,<code>Number()</code>，<code>Boolean()</code>或<code>Object()</code>可以做显式类型转换</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token function">Number</span><span class="token punctuation">(</span><span class="token string">&#39;3&#39;</span><span class="token punctuation">)</span> <span class="token comment">// 3</span>
<span class="token function">String</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token comment">// &#39;false&#39;</span>
<span class="token function">Boolean</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
<span class="token function">Object</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token comment">// new Number(3)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>隐式类型转换</strong></p><ul><li><p>如果运算符 <code>+</code> 的一个操作数是字符串，它会把另外一个操作转换为字符串</p></li><li><p>一元运算符 <code>+</code> 可以将其操作符转换为数字</p></li><li><p>一元运算符 <code>!</code> 可以将其操作符转换为布尔值并取反</p></li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>x <span class="token operator">+</span> <span class="token string">&#39;&#39;</span> <span class="token comment">// 等价于String(x)</span>
<span class="token operator">+</span>x  <span class="token comment">// 等价于Number(x)</span>
<span class="token operator">!</span><span class="token operator">!</span>x <span class="token comment">// 等价于Boolen(x)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="对象值转基本类型" tabindex="-1"><a class="header-anchor" href="#对象值转基本类型" aria-hidden="true">#</a> 对象值转基本类型</h3><p><strong>对象值转布尔值</strong></p><p>所有的对象（包括数组和函数）都转换为<code>true</code>, 包括包装对象</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token operator">!</span><span class="token operator">!</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Boolean</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>对象转字符串</strong></p><ol><li><p>如果对象具有<code>toString()</code>方法，则调用这个方法，然后再转换为字符串</p></li><li><p>如果对象没有<code>toString()</code>方法，则调用<code>valueOf()</code>方法，然后再返回字符串结果</p></li><li><p>如果对象没有<code>toString()</code>和<code>valueOf()</code>方法，则抛出错误异常</p></li></ol><p><strong>对象转数字</strong></p><ol><li><p>如果对象具有<code>valueOf()</code>方法，则调用这个方法，然后再转换为数字</p></li><li><p>如果对象没有<code>valueOf()</code>方法，则调用<code>toString()</code>方法，然后再返回数字结果</p></li><li><p>如果对象没有<code>toString()</code>和<code>valueOf()</code>方法，则抛出错误异常</p></li></ol><p><strong><code>valueOf()</code>和<code>toString()</code>区别</strong></p><ul><li><code>valueOf()</code>和<code>toString()</code> 都是 JS 默认存在的方法，几乎所有的内置对象都包含这两个方法</li><li><code>valueOf()</code> 当需要将一个对象转换为原始值时， JS 首先尝试调用对象的 <code>valueOf</code> 方法</li><li><code>valueOf()</code> 方法返回的值通常是该对象的原始数据类型，如数字，布尔或字符串</li><li>如果对象没有定义自己的 <code>valueOf()</code> 方法，则会继承原型链上的 <code>valueOf()</code> 方法</li><li>如果 <code>valueOf()</code> 不存在，则会调用 <code>toString()</code> 方法</li><li><code>toString()</code> 方法将对象转换为一个字符串，并返回表该对象的字符串形式</li><li>大多数内置对象都对 <code>toString()</code> 进行了重写以提供更恰当的字符串表示形式</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 对于数字对象（Number对象）</span>
<span class="token keyword">let</span> numObj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Number</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>numObj<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 返回 5,原始值为数字类型</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>numObj<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 返回 &#39;5&#39;,字符串形式的表示</span>

<span class="token comment">// 对于日期对象（Date对象）</span>
<span class="token keyword">let</span> dateObj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>dateObj<span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 返回时间戳</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>dateObj<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//返回日期时间的字符串表示形式</span>

<span class="token comment">// 对于自定义对象</span>
<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;L&#39;</span><span class="token punctuation">}</span>
obj<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// obj 本身</span>
obj<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// &#39;[object Object]&#39;</span>

<span class="token comment">// 除了自己定义了 valueOf()或toString() 方法对默认方法进行的覆盖</span>

<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;L&#39;</span><span class="token punctuation">,</span>
  <span class="token function-variable function">valueOf</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;value&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
obj<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// value</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="类型判断" tabindex="-1"><a class="header-anchor" href="#类型判断" aria-hidden="true">#</a> 类型判断</h2><h3 id="typeof-操作符" tabindex="-1"><a class="header-anchor" href="#typeof-操作符" aria-hidden="true">#</a> typeof 操作符</h3><ul><li><p><code>undefind</code> -- 如果这个值未定义</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> a<span class="token punctuation">;</span>
<span class="token keyword">typeof</span> a <span class="token comment">// &quot;undefined&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><code>boolean</code> -- 如果这个值是布尔类型</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token keyword">typeof</span> a <span class="token comment">// &quot;boolean&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><code>string</code> -- 如果这个值是字符串</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token string">&#39;str&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">typeof</span> a <span class="token comment">// &quot;string&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><code>number</code> -- 如果这个值是数字</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token keyword">typeof</span> a <span class="token comment">// &quot;number&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><code>object</code> -- 如果这个值是对象或者<code>null</code></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">typeof</span> a <span class="token comment">// &quot;object&quot;</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">typeof</span> a <span class="token comment">// &quot;object&quot;</span>
<span class="token keyword">var</span> c <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token keyword">typeof</span> a <span class="token comment">// &quot;object&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><code>function</code> -- 如果这个值是函数</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> <span class="token function-variable function">a</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">typeof</span> a <span class="token comment">// &quot;function&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><p><code>typeof</code>是一个操作符，所以在使用的时候，<code>typeof</code>后面可以有括号，也可以没有</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">typeof</span> <span class="token punctuation">(</span><span class="token number">110</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">typeof</span> <span class="token number">110</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><code>typeof</code>只能判断基本类型，对于对象类型并不能得到其准确类型</p><h3 id="tostring" tabindex="-1"><a class="header-anchor" href="#tostring" aria-hidden="true">#</a> toString()</h3><p>平时我们需要对对象类型做精准判断的时候会使用<code>Object.prototype.toString.call()</code>方法</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token comment">// &quot;[object Object]&quot;</span>

<span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span> <span class="token comment">// &quot;[object Array]&quot;</span>

<span class="token keyword">var</span> <span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span> <span class="token comment">// &quot;[object Function]&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>Object.prototype.toString.call()</code>和<code>toString()</code>区别</p><p>每个对象都有一个<code>toString()</code>方法,这个方法实际上调用的<code>Object.prototyp.toString()</code>方法，它的作用是当该对象被表示为一个文本值时，或者一个对象以预期的字符串方式引用时自动调用(啥意思呢？)，默认情况下，调用<code>toString()</code> 返回 <code>&quot;[object type]&quot;</code></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
obj<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// &quot;[object Object]&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>但是数组及函数类型的却没有返回预期的结果</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;a&#39;</span><span class="token punctuation">]</span>
obj<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// &quot;a&quot;</span>

<span class="token keyword">var</span> <span class="token function-variable function">obj</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
obj<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// &quot;function(){}&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这是因为数组及函数类型也是继承于<code>Object</code>对象的，正常他们也具有<code>toString()</code>方法，但是它们的原型对象上也实现了自己的<code>toString()</code>方法，所以当我们在这些对象上调用<code>toString()</code>方法时，比如<code>[].toString()</code>执行的不是<code>Object.prototype.toString()</code>方法，而是执行的<code>Array.prototype.toString()</code>方法，<code>Function</code>及其它类型的也是如此</p><ul><li><p><code>Function.prototype.toString()</code>: <code>toString()</code> 方法返回一个表示当前函数源代码的字符串。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

sum<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 

<span class="token comment">// &quot;function sum(a, b) {</span>
<span class="token comment">//  return a + b;</span>
<span class="token comment">//}&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><code>Array.prototype.toString()</code>: <code>toString</code> 返回一个字符串，表示指定的数组及其元素。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> array1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&#39;a&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;1a&#39;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

array1<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// &quot;1,2,a,1a&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><code>String.prototype.toString()</code>: <code>toString()</code> 方法返回指定对象的字符串形式。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token string">&quot;Hello world&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>      <span class="token comment">// 输出 &quot;Hello world&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><code>Number.prototype.toString([radix])</code>: <code>toString([radix])</code> 方法返指定<code>Number</code>对象的字符串表示形式。</p><p><code>radix</code>参数指定要用于数字到字符串的转换的基数(从2到36)。如果未指定 <code>radix</code> 参数，则默认值为 <code>10</code>。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> count <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>count<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 输出 &#39;10&#39;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">17</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// 输出 &#39;17&#39;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">17.2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 输出 &#39;17.2&#39;</span>
<span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">// 输出 &#39;110&#39;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">254</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 输出 &#39;fe&#39;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 输出 &#39;-1010&#39;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">0xff</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出 &#39;-11111111&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><code>Boolean.prototype.toString()</code>: <code>toString()</code> 方法返回指定的布尔对象的字符串形式。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> bol <span class="token operator">=</span> <span class="token boolean">true</span>
bol<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// &quot;true&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><code>RegExp.prototype.toString()</code>: <code>toString()</code> 返回一个表示该正则表达式的字符串。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> reg1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">&quot;bar&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;g&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
reg1<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// &quot;/bar/g&quot;</span>
<span class="token keyword">var</span> reg2 <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">a(?!b)c</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span>
reg2<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// &quot;/a(?!b)c/g&quot;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><code>Date.prototype.toString()</code>: <code>toString()</code> 方法返回一个字符串，表示该<code>Date对象</code>。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> date <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
date<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token string">&quot;Wed Feb 05 2020 00:23:26 GMT+0800 (中国标准时间)&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><code>Error.prototype.toString()</code>: <code>toString()</code> 方法返回一个指定的错误对象（Error object）的字符串表示。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> e <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;fatal error&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
e<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// &quot;Error: fatal error&quot;</span>
e<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&#39;134&#39;</span>
e<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//&quot;134: fatal error&quot;</span>
e<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&#39;&#39;</span>
e<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// &quot;fatal error&quot;</span>
e<span class="token punctuation">.</span>message <span class="token operator">=</span> <span class="token keyword">undefined</span>
e<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// &quot;&quot;</span>
e<span class="token punctuation">.</span>message <span class="token operator">=</span> <span class="token string">&#39;msg&#39;</span>
e<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// &quot;msg&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><code>Symbol.prototype.toString()</code>:<code>toString()</code> 方法返回当前 <code>symbol</code> 对象的字符串表示。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">&quot;desc&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// &quot;Symbol(desc)&quot;</span>
<span class="token comment">// well-known symbols</span>
Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// &quot;Symbol(Symbol.iterator)</span>
<span class="token comment">// global symbols</span>
Symbol<span class="token punctuation">.</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token string">&quot;foo&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// &quot;Symbol(foo)&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><p>因此，为了让<code>[].toString()</code>调用的是<code>Object.prototype.toString()</code>方法，所以就有了<code>Object.prototype.toString.call([])</code>方法</p><h3 id="基本类型调用tostring方法" tabindex="-1"><a class="header-anchor" href="#基本类型调用tostring方法" aria-hidden="true">#</a> 基本类型调用toString方法</h3><p>为什么某些基本类型会有一些对象方法呢?</p><p>因为当原始数据类型（boolean、String）在调用方法时，JS 将会创建对象，以便调用方法属性，而在使用完毕后将会销毁该对象</p><p>这里着重讲了解一下数字类型调用 <code>toString</code> 方法的奇怪的地方,比如粟子：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">1</span>
a<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// &#39;1&#39;</span>
<span class="token number">1.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 报错</span>
<span class="token number">1.</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// &#39;1&#39;</span>
<span class="token number">1.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 报错</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>1.toString()</strong>： 这是因为javascript引擎在解释代码 <code>1.toString()</code> 时认为 <code>.</code> 是浮点符号，此时但因小数点后面的字符是非法的，所以报语法错误</p><p><strong>1..toString()</strong>: javascript引擎认为第一个 <code>.</code> 是表示小数点，（JS 中 <code>1.</code>、<code>.1</code> 这样形式是合法），之后第二个 <code>.</code> 被解析为属性访问语法，所以都能正确解释执行</p><p><strong>1...toString()</strong>： 继上面之后属性访问语法访问的是一个 <code>.</code>，所以报语法错误</p><p><strong>相关题目</strong></p><p><strong>Q</strong></p><p><code>2 == [[[2]]]</code></p><p><code>[[[2]]]</code> 应该会不断得 <code>toString()</code>, <code>[[[2]]] =&gt; &#39;2&#39;</code> <code>2==2</code></p><p>答案 <code>true</code></p><h3 id="valueof" tabindex="-1"><a class="header-anchor" href="#valueof" aria-hidden="true">#</a> valueOf()</h3><p><code>valueOf()</code> 方法返回指定对象的原始值。</p><p>不同类型对象的<code>valueOf()</code>方法的返回值如下：</p><ul><li><p>Array： 返回数组对象本身</p></li><li><p>Boolean： 布尔值</p></li><li><p>Date： 存储的时间是从 1970 年 1 月 1 日午夜开始计的毫秒数 UTC</p></li><li><p>Function： 函数本身</p></li><li><p>Number： 数字值</p></li><li><p>Object： 对象本身。这是默认情况</p></li><li><p>String： 字符串值</p></li></ul><p><strong>Math 和 Error 对象没有 valueOf 方法。</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// Array：返回数组对象本身</span>
<span class="token keyword">var</span> array <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;ABC&quot;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>array<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> array<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// true</span>

<span class="token comment">// Date：当前时间距1970年1月1日午夜的毫秒数</span>
<span class="token keyword">var</span> date <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token number">2013</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">59</span><span class="token punctuation">,</span> <span class="token number">230</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>date<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 1376838719230</span>

<span class="token comment">// Number：返回数字值</span>
<span class="token keyword">var</span> num <span class="token operator">=</span>  <span class="token number">15.26540</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 15.2654</span>

<span class="token comment">// 布尔：返回布尔值true或false</span>
<span class="token keyword">var</span> bool <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>bool<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> bool<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// true</span>

<span class="token comment">// new一个Boolean对象</span>
<span class="token keyword">var</span> newBool <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Boolean</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// valueOf()返回的是true，两者的值相等</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newBool<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> newBool<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// true</span>
<span class="token comment">// 但是不全等，两者类型不相等，前者是boolean类型，后者是object类型</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newBool<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> newBool<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// false</span>

<span class="token keyword">var</span> bol <span class="token operator">=</span> <span class="token boolean">true</span>

bol<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> bol <span class="token comment">// true</span>

<span class="token comment">// Function：返回函数本身</span>
<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> foo<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> foo <span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// true</span>
<span class="token keyword">var</span> foo2 <span class="token operator">=</span>  <span class="token keyword">new</span> <span class="token class-name">Function</span><span class="token punctuation">(</span><span class="token string">&quot;x&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;y&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;return x + y;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> foo2<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/*
ƒ anonymous(x,y
) {
return x + y;
}
*/</span>

<span class="token comment">// Object：返回对象本身</span>
<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;张三&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> obj<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> obj <span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// true</span>

<span class="token comment">// String：返回字符串值</span>
<span class="token keyword">var</span> str <span class="token operator">=</span> <span class="token string">&quot;http://www.xyz.com&quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> str<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> str <span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// true</span>

<span class="token comment">// new一个字符串对象</span>
<span class="token keyword">var</span> str2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token string">&quot;http://www.xyz.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 两者的值相等，但不全等，因为类型不同，前者为string类型，后者为object类型</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> str2<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> str2 <span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// false</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="比较操作符" tabindex="-1"><a class="header-anchor" href="#比较操作符" aria-hidden="true">#</a> 比较操作符</h2><p>JavaScript 有两种比较方式：严格比较运算符和转换类型比较运算符</p><p>JS进行比较时，有以下特征</p><ul><li><p>严格比较运算符（===）：仅当两个操作数的类型相同且值相等为 <code>true</code></p></li><li><p>转换类型比较运算符（==）：会在进行比较之前，将两个操作数转换成相同的类型再进行比较</p></li><li><p>对于关系运算符（比如 &lt;=）来说，会先将操作数转为原始值，使它们类型相同，再进行比较运算</p></li><li><p>字符串比较则是使用基于标准字典的 Unicode 值来进行比较的</p></li></ul><h3 id="转换类型比较运算符" tabindex="-1"><a class="header-anchor" href="#转换类型比较运算符" aria-hidden="true">#</a> 转换类型比较运算符</h3><p>当两个操作数类型不相等时，会在比较前尝试将其转换为相同类型，转换规则如下：</p><ul><li><p>对象==对象：比较两个对象的引用地址</p></li><li><p>对象==字符串：对象先转化为字符串，然后做比较</p></li><li><p>对象==布尔类型：布尔类型会转换成数字(false是0，true是1),对象类型先隐式调用 <code>toString</code> 方法，然后再 <code>Number()</code></p></li><li><p>对象==数字：对象类型先隐式调用 <code>toString</code> 方法，然后再 <code>Number()</code></p></li><li><p>数字==布尔：布尔类型会转换成数字(false是0，true是1)，再进行比较</p></li><li><p>数字==字符串：把字符串转化为数字，再比较</p></li><li><p>null==null: true</p></li><li><p>null == 非(null|undefined)：false</p></li><li><p>undefined == undefined: true</p></li><li><p>undefined == 非(null|undefined)：false</p></li></ul><p>规律：</p><ul><li><p>有 boolean 值时，先将 boolean 转换为数字，再进行比较</p></li><li><p>有数字值时，先将另个值转化为数字，再进行比较</p></li><li><p>字符串与非（boolean|数字）比较时，先将另个值转化为字符串，再进行比较</p></li><li><p><code>null</code> 和 <code>undefined</code> 除了与自身和彼此比较时为 <code>true</code> ，其余都为 <code>false</code></p></li></ul><p><strong>最后看个题目</strong></p><p><code>[1 &lt; 2 &lt; 3, 3 &lt; 2 &lt; 1]</code></p><p>这个题会让人误以为是 2 &gt; 1 &amp;&amp; 2 &lt; 3 其实不是的.</p><p>这个题等价于</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code> <span class="token number">1</span> <span class="token operator">&lt;</span> <span class="token number">2</span> <span class="token operator">=&gt;</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
 <span class="token boolean">true</span> <span class="token operator">&lt;</span> <span class="token number">3</span> <span class="token operator">=&gt;</span>  <span class="token number">1</span> <span class="token operator">&lt;</span> <span class="token number">3</span> <span class="token operator">=&gt;</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
 <span class="token number">3</span> <span class="token operator">&lt;</span> <span class="token number">2</span> <span class="token operator">=&gt;</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
 <span class="token boolean">false</span> <span class="token operator">&lt;</span> <span class="token number">1</span> <span class="token operator">=&gt;</span> <span class="token number">0</span> <span class="token operator">&lt;</span> <span class="token number">1</span> <span class="token operator">=&gt;</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>答案是 [true, true]</p><p><strong>平时要注意判断变量是否是 <code>undefined</code> 或 <code>null</code> 的情况注意：检查属性是否 <code>undefined</code> 还不够。该属性可能存在，但其值恰好设置为 <code>undefined</code>。</strong></p><ul><li><p>不要直接使用 <code>!变量</code> 来判断变量是否有值，当变量的值为 <code>0</code> 时，将会被误判成 <code>false</code></p></li><li><p>使用 <code>undefined</code> 和 <code>null</code> 除了跟<code>undefined</code> 和 <code>null</code> 比较为 <code>true</code> 以外跟其它值都是 <code>false</code> ，所以可以根据这个特性来判断变量是否是<code>undefined</code> 或 <code>null</code>。 如 <code>变量 === undefind||变量 === null</code></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> abc
abc <span class="token operator">===</span> <span class="token keyword">undefined</span> <span class="token comment">// true</span>
abc <span class="token operator">==</span> <span class="token keyword">undefined</span> <span class="token comment">// true</span>
abc <span class="token operator">==</span> <span class="token string">&#39;undefined&#39;</span> <span class="token comment">// false</span>
abc <span class="token operator">===</span> <span class="token string">&#39;undefined&#39;</span> <span class="token comment">// false</span>
abc <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token comment">// true</span>
abc <span class="token operator">===</span> <span class="token keyword">null</span> <span class="token comment">// false 类型不同</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h2 id="操作符" tabindex="-1"><a class="header-anchor" href="#操作符" aria-hidden="true">#</a> 操作符</h2><blockquote><p>只能操作一个值的操作符叫做<strong>一元操作符</strong></p></blockquote><p><code>--a</code>:：前置递减</p><p><code>++a</code>：前置递加</p><p><code>a--</code>：后置递减</p><p><code>--a</code>：前置递加</p><p>执行前置时，变量的值都是语句被求值以前改变的。（在计算机科学领域，这种情况被 称作<strong>副效应</strong>）</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> age <span class="token operator">=</span> <span class="token number">29</span>
<span class="token keyword">var</span> anotherAge <span class="token operator">=</span> <span class="token operator">--</span>age <span class="token operator">+</span> <span class="token number">2</span>
<span class="token function">alert</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span> <span class="token comment">// 28</span>
<span class="token function">alert</span><span class="token punctuation">(</span>anotherAge<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">30</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> num1 <span class="token operator">=</span> <span class="token number">2</span>
<span class="token keyword">var</span> num2 <span class="token operator">=</span> <span class="token number">20</span>
<span class="token keyword">var</span> num3 <span class="token operator">=</span> <span class="token operator">--</span>num1 <span class="token operator">+</span> num2 <span class="token comment">// 21 </span>
<span class="token keyword">var</span> num4 <span class="token operator">=</span> num1 <span class="token operator">+</span> num2 <span class="token comment">// 21</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>执行后置运算时，递增和背叛是在包含它们的语句被求值之后才执行的。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> num1 <span class="token operator">=</span> <span class="token number">2</span>
<span class="token keyword">var</span> num2 <span class="token operator">=</span> <span class="token number">20</span>
<span class="token keyword">var</span> num3 <span class="token operator">=</span> num1<span class="token operator">--</span> <span class="token operator">+</span> num2 <span class="token comment">// 22</span>
<span class="token keyword">var</span> num4 <span class="token operator">=</span> num1 <span class="token operator">+</span> num2 <span class="token comment">// 21</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="原型链" tabindex="-1"><a class="header-anchor" href="#原型链" aria-hidden="true">#</a> 原型链</h2>`,131),r={href:"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Inheritance_and_the_prototype_chain",target:"_blank",rel:"noopener noreferrer"},d=s(`<p>JavaScript中的每个实例对象（Object）都有一个私有属性（<code>__proto__</code>）指向它的构造函数的原型对象（<code>prototype</code>）。该原型对象也有一个自己的原型对象（<code>__proto__</code>）指向它的构造函数的原型对象（<code>prototype</code>），这样层层向上直到一个对象的原型对象为<code>null</code>。所以<code>null</code>是原型链中的最后一个环节</p><p>所以上文提到的一层层的<code>__proto__</code>就组成了原型链</p><blockquote><p>几乎所有 JavaScript 中的对象都是位于原型链顶端的 Object 的实例。</p></blockquote><p><strong>继承属性</strong></p><p>当试图访问一个对象时，它不仅仅在该对象上搜寻，还会从该对象的原型链上搜索，直到找到一个匹配的属性或达到原型链的末尾</p><blockquote><p>遵循ECMAScript标准，<code>someObject.[[Prototype]]</code> 符号是用于指向 <code>someObject</code> 的原型。 从 ECMAScript 6 开始，<code>[[Prototype]]</code> 可以通过 <code>Object.getPrototypeOf()</code> 和 <code>Object.setPrototypeOf()</code> 访问器来访问。 这个等同于 JavaScript 的非标准但许多浏览器实现的属性<code> __proto__</code>。</p></blockquote><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>b <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> o <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {a: 1, b: 2}</span>

<span class="token comment">// 在f函数的原型上定义属性</span>
f<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>b <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
f<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>c <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>

constole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>o<span class="token punctuation">.</span>__proto__<span class="token punctuation">)</span> <span class="token comment">// {b:3,c:4}</span>
o<span class="token punctuation">.</span>a <span class="token comment">// 1</span>
o<span class="token punctuation">.</span>b <span class="token comment">// 2</span>
o<span class="token punctuation">.</span>c <span class="token comment">// 4 o的原型对象上的\`c\`属性</span>
o<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> f<span class="token punctuation">.</span>protype <span class="token comment">// true // o的__proto__指向它的构造函数的protype属性</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>不要在<code>f</code>函数的原型上直接定义 <code>f.prototype = {b:3,c:4}</code>;这样会重写整<code>prototype</code>属性，直接打破原型链</strong></p><p><strong>性能影响</strong></p><p>上文提到了当访问某个对象的属性时，如果当前对象不存在这个属性时，会从这个对象的原型链中查找，直到遍历整个原型链，这个过程比较耗时， 对性能有副作用。</p><p>遍历对象的属性时，原型链上的每个可枚举属性都会被枚举出来。要检查对象是否具有自己定义的属性，而不是其原型链上的某个属性，可以使用<code>Object.prototyp.hasOwnProperty</code>方法\`</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>b <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
f<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>b <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
f<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>c <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

o<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span><span class="token string">&#39;a&#39;</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
o<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span><span class="token string">&#39;b&#39;</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
o<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span><span class="token string">&#39;c&#39;</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
o<span class="token punctuation">.</span>__proto__<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span><span class="token string">&#39;c&#39;</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>o</code>自身没有名为 <code>hasOwnProperty</code>的属性,<code>hasOwnProperty</code> 是 <code>Object.prototype</code> 的属性.因此 <code>o</code> 继承了 <code>Object.prototype</code> 的 <code>hasOwnProperty</code></p><p><code>hasOwnProperty</code>是 JavaScript 中处理属性并且不会遍历原型链的方法之一,另一种方法是<code>Object.keys()</code></p><h3 id="创建对象及原型链" tabindex="-1"><a class="header-anchor" href="#创建对象及原型链" aria-hidden="true">#</a> 创建对象及原型链</h3><p>创建对象的方式有很多种：</p><p><strong>使用语法结构创建的对象</strong></p><p>创建普通对象：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li><p>对象都继承于 <code>Object.prototype</code> ,<code>Object.prototype</code> 中包含 <code>hasOwnProperty</code>, <code>toString</code> 等方法</p></li><li><p>原型链如下: <code>o.__proto__ ---&gt; Object.prototype ---&gt; null</code></p></li></ul><p>创建数组：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;yo&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;whadup&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;?&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li><p>数组都继承于 <code>Array.prototype</code> ,<code>Array.prototype</code> 中包含 <code>indexOf</code>, <code>forEach</code> 等方法</p></li><li><p>原型链如下: <code>a.__proto__ ---&gt; Array.prototype ---&gt; Object.prototype ---&gt; null</code></p></li></ul><p>创建函数：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>函数都继承于 <code>Function.prototype</code>，<code>Function.prototype</code> 中包含 <code>call</code>, <code>bind</code>等方法</p></li><li><p>原型链如下: <code>f.__proto__ ---&gt; Function.prototype ---&gt; Object.prototype ---&gt; null</code></p></li></ul><p><strong>注意以下粟子</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token class-name">Functon</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>aaa<span class="token operator">=</span><span class="token string">&#39;aaa&#39;</span>
<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
fn<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>bbb<span class="token operator">=</span><span class="token string">&#39;bbb&#39;</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>ccc<span class="token operator">=</span><span class="token string">&#39;ccc&#39;</span>

<span class="token keyword">var</span> ob <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
ob<span class="token punctuation">.</span>ccc <span class="token comment">// ccc</span>
ob<span class="token punctuation">.</span>bbb <span class="token comment">// bbb</span>
ob<span class="token punctuation">.</span>aaa <span class="token comment">// undefined</span>

fn<span class="token punctuation">.</span>aaa <span class="token comment">// aaa</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>使用构造器创建的对象</strong></p><p>在 JavaScript 中，构造器其实就是一个普通的函数。当使用 <code>new </code>操作符 来作用这个函数时，它就可以被称为构造方法（构造函数）。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Graph</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>vertices <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>edges <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token class-name">Graph</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">addVertex</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">v</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>vertices<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> g <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Graph</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p><code>g</code> 是生成的对象，他的自身属性有 <code>vertices</code> 和 <code>edges</code>。</p></li><li><p>在 <code>g</code> 被实例化时，<code>g.__proto__</code> 指向了 <code>Graph.prototype</code></p></li></ul><p><strong>使用 <code>Object.create</code> 创建的对象</strong></p><p>可以调用 <code>Object.create</code> 方法来创建一个新对象。这个对象的 <code>__proto__</code> 指定调用 <code>create</code> 方法时传入的第一个参数</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span> 
<span class="token comment">// a.__proto__ ---&gt; Object.prototype.__proto__ ---&gt; null</span>

<span class="token keyword">var</span> b <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// b.__proto__ ---&gt; a</span>
<span class="token comment">// a.__proto__---&gt; Object.prototype.__proto__ ---&gt; null</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1 (继承而来)</span>

<span class="token keyword">var</span> c <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// c.__proto__ ---&gt; b</span>
<span class="token comment">// b.__proto__ ---&gt; a</span>
<span class="token comment">// a.__proto__---&gt; Object.prototype.__proto__ ---&gt; null</span>

<span class="token keyword">var</span> d <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// d ---&gt; null</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>d<span class="token punctuation">.</span>hasOwnProperty<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// undefined, 因为d没有继承Object.prototype</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>使用 <code>class</code> 关键字创建的对象</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Polygon</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">height<span class="token punctuation">,</span> width</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>height <span class="token operator">=</span> height<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>width <span class="token operator">=</span> width<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Square</span> <span class="token keyword">extends</span> <span class="token class-name">Polygon</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">sideLength</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>sideLength<span class="token punctuation">,</span> sideLength<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">get</span> <span class="token function">area</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>height <span class="token operator">*</span> <span class="token keyword">this</span><span class="token punctuation">.</span>width<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">set</span> <span class="token function">sideLength</span><span class="token punctuation">(</span><span class="token parameter">newLength</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>height <span class="token operator">=</span> newLength<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>width <span class="token operator">=</span> newLength<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> square <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Square</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
square <span class="token keyword">instanceof</span> <span class="token class-name">Square</span> <span class="token comment">// true</span>
square <span class="token keyword">instanceof</span> <span class="token class-name">Polygon</span> <span class="token comment">// true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>JavaScript中的<code>class</code> 仍然是基于原型的</p></blockquote><div class="custom-container tip"><p class="custom-container-title">TIP</p><p><code>function a(){}</code><br> a.constructor === Function<br> Function.prototype === 函数对象 // ƒ () { [native code] }<br> Function.constructor === Function<br> Function.prototype.constructor === Function</p></div><h3 id="获取原型链" tabindex="-1"><a class="header-anchor" href="#获取原型链" aria-hidden="true">#</a> 获取原型链</h3><p><code>Object</code>提供了<code>getPrototypeOf()</code>来获取原型链，<code>Object.getPrototypeOf()</code>方法与<code>__proto__</code>作用一样，都是指向该对象的构造函数的<code>protype</code>属性</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token constant">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>b <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token class-name">A</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">doSomething</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> a1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> a2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>从上面的例子中，可以得到以下信息</p><ul><li><p><code>a1.doSomething</code> 事实上会指向 <code>Object.getPrototypeOf(a1).doSomething</code>，它就是你在 <code>A.prototype.doSomething</code> 中定义的内容。</p></li><li><p>也就是说：<code>Object.getPrototypeOf(a1).doSomething == Object.getPrototypeOf(a2).doSomething == A.prototype.doSomething</code>,</p></li></ul><p>实际上，执行 <code>a1.doSomething()</code> 相当于执行<code> Object.getPrototypeOf(a1).doSomething.call(a1)==A.prototype.doSomething.call(a1)</code></p><h3 id="关于-new-方法" tabindex="-1"><a class="header-anchor" href="#关于-new-方法" aria-hidden="true">#</a> 关于 new 方法</h3><p>当执行 <code>var a1 = new A()</code>,内部做了以下工作：</p><ul><li><p>创建一个新对象</p></li><li><p>新对象的 <code>__proto__</code> 指向 <code>A.prototype</code>，即 <code>a1.[[Prototype]] = A.prototype</code></p></li><li><p>运行函数 <code>A()</code> 把 <code>this</code> 指向新对象之前设置</p></li></ul><p>然后当您访问实例的属性时，JavaScript 首先会检查它们是否直接存在于该对象上，如果不存在，则会 <code>[[Prototype]]</code> 中查找。</p><p>自己实现<code>new</code>方法\`</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">_new</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> <span class="token operator">...</span>arg</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>constructor<span class="token punctuation">)</span> <span class="token comment">// function Object() { [native code] }</span>
    obj<span class="token punctuation">.</span>__proto__ <span class="token operator">=</span> fn<span class="token punctuation">.</span>prototype
    <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> arg<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>constructor<span class="token punctuation">)</span> <span class="token comment">// function t(arg){this.a = arg}</span>
    <span class="token keyword">return</span> obj
<span class="token punctuation">}</span>

<span class="token comment">// 效果一样</span>
<span class="token keyword">function</span> <span class="token function">_new</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> <span class="token operator">...</span>arg</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	
    <span class="token keyword">const</span> obj <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>fn<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>constructor<span class="token punctuation">)</span> <span class="token comment">// function t(arg){this.a = arg}</span>
    <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> arg<span class="token punctuation">)</span>
    <span class="token keyword">return</span> obj
    <span class="token comment">// 以下测试使用</span>
    <span class="token keyword">const</span> ttt <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>constructor<span class="token punctuation">)</span> <span class="token comment">// function Object() { [native code] }</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">t</span><span class="token punctuation">(</span><span class="token parameter">arg</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>a <span class="token operator">=</span> arg
<span class="token punctuation">}</span>

<span class="token keyword">var</span> t1 <span class="token operator">=</span> <span class="token function">_new</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> t2 <span class="token operator">=</span> <span class="token function">_new</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>
t1<span class="token punctuation">.</span>a <span class="token comment">// 1</span>
t2<span class="token punctuation">.</span>a <span class="token comment">// 10</span>
t1<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> t2<span class="token punctuation">.</span>__proto__ <span class="token comment">// true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>上面的 <code>constructor</code> 指向让人感觉有点困惑</p><h2 id="继承" tabindex="-1"><a class="header-anchor" href="#继承" aria-hidden="true">#</a> 继承</h2><h3 id="原型链继承" tabindex="-1"><a class="header-anchor" href="#原型链继承" aria-hidden="true">#</a> 原型链继承</h3><p>利用原型链让子类的原型链引用另一个引用类型的属性和方法，从而达到继承的目的</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">SuperType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>superColor <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;red&#39;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token class-name">SuperType</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getSuperColor</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>superColor
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">SubType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>subClor <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;black&#39;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token class-name">SubType</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SuperType</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token class-name">SubType</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getSubColor</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>subClor
<span class="token punctuation">}</span>
<span class="token keyword">const</span> instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SubType</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>instance<span class="token punctuation">.</span><span class="token function">getSuperColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// [&#39;red&#39;]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>原型链继承的问题：最主要的问题来自 如果父类构造函数有引用类型的属性时，子类修改了这个属性也会修改父类的属性，导致其它的子类也会跟着发生变化</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">SuperType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>superColor <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;red&#39;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token class-name">SuperType</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getSuperColor</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>superColor
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">SubType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>subClor <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;black&#39;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token class-name">SubType</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SuperType</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token class-name">SubType</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getSubColor</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>subClor
<span class="token punctuation">}</span>
<span class="token keyword">const</span> instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SubType</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> instance2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SubType</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
instance<span class="token punctuation">.</span>superColor<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&#39;green&#39;</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>instance<span class="token punctuation">.</span><span class="token function">getSuperColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// [&quot;red&quot;, &quot;green&quot;]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>instance2<span class="token punctuation">.</span><span class="token function">getSuperColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// [&quot;red&quot;, &quot;green&quot;]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>从上面的例子中可以看到<code>instance.superColor.push(&#39;green&#39;)</code>的代码同时也影响了<code>instance2.superColor</code></p><h3 id="构造函数继承" tabindex="-1"><a class="header-anchor" href="#构造函数继承" aria-hidden="true">#</a> 构造函数继承</h3><p>构选函数继承的实现思想就是在子类构造函数内部调用超类的构造函数，并且调用的时候使用<code>call</code>，<code>apply</code>方法将超类的属性添加到当前子类中</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">SuperType</span><span class="token punctuation">(</span>c <span class="token operator">=</span> <span class="token string">&#39;red&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token punctuation">[</span>c<span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token class-name">SuperType</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getSuperColor</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>color
<span class="token punctuation">}</span>
<span class="token class-name">SuperType</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&#39;super&#39;</span>
<span class="token keyword">function</span> <span class="token function">SubType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">SuperType</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">&#39;black&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SuperType</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> instance2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SubType</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
instance<span class="token punctuation">.</span>color<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&#39;green&#39;</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>instance<span class="token punctuation">.</span>color<span class="token punctuation">)</span> <span class="token comment">// [&quot;red&quot;, &quot;green&quot;]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>instance2<span class="token punctuation">.</span>color<span class="token punctuation">)</span> <span class="token comment">// [&quot;black&quot;]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>可以看到 构造函数继承 解决了 原型链继承 中父类包含引用类型属性的问题，但是也暴露出了另一个问题，构造函数继承是在子类的构造函数调用父类的构造函数方法，将父类构造函中的属性复制到当前子类中，但是对于父类原型中的方法就无法继承了</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>instance2<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token comment">// undefined</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="组合继承" tabindex="-1"><a class="header-anchor" href="#组合继承" aria-hidden="true">#</a> 组合继承</h3><p>组合继承就是将原型链和构造函数继承结合在一起，使用构造函数实现对父类属性的继承，使用原型继承实现对父类原型属性和方法的继承</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">SuperType</span><span class="token punctuation">(</span>c <span class="token operator">=</span> <span class="token string">&#39;red&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token punctuation">[</span>c<span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token class-name">SuperType</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getColor</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>color
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">SubType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">SuperType</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">&#39;black&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token class-name">SubType</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SuperType</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token class-name">SubType</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> SubType
<span class="token keyword">const</span> instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SuperType</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> instance2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SubType</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
instance<span class="token punctuation">.</span>color<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&#39;green&#39;</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>instance<span class="token punctuation">.</span><span class="token function">getColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>instance2<span class="token punctuation">.</span><span class="token function">getColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>组合继承同时解决了 构造函数继承 和 原型链继承 的缺点，但是它也存在自己的不足。组成继承最大的问题就是会执行父类构造函数两次,结合上面的例子</p><p>第一次</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">SubType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">SuperType</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">&#39;black&#39;</span><span class="token punctuation">)</span> <span class="token comment">// 执行了一次 SuperType 方法</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>第二次</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token class-name">SubType</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SuperType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 又执行了一次 SuperType 方法</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="寄生组合继承" tabindex="-1"><a class="header-anchor" href="#寄生组合继承" aria-hidden="true">#</a> 寄生组合继承</h3><p>寄生组合继承即使用构造函数继承来继承父类属性，再通过原型链的混成形式来继承原型链的方法和属性</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">SuperType</span><span class="token punctuation">(</span>c <span class="token operator">=</span> <span class="token string">&#39;red&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token punctuation">[</span>c<span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token class-name">SuperType</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getColor</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>color
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">SubType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">SuperType</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">&#39;black&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token class-name">SubType</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">SuperType</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span>
<span class="token comment">// console.log(SubType.prototype.constructor) // SuperType</span>
<span class="token class-name">SubType</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> SubType
<span class="token keyword">const</span> instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SuperType</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> instance2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SubType</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
instance<span class="token punctuation">.</span>color<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&#39;green&#39;</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>instance<span class="token punctuation">.</span><span class="token function">getColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>instance2<span class="token punctuation">.</span><span class="token function">getColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Object.create</strong></p><p><code>Object.create()</code>方法创建一个新对象，使用现有的对象来提供新创建的对象的<code>__proto__</code></p><p>等同于以下效果</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">createObj</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">function</span> <span class="token constant">F</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token class-name">F</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> obj
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">F</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,79);function k(v,m){const a=e("ExternalLinkIcon");return p(),o("div",null,[u,n("blockquote",null,[n("p",null,[n("a",r,[c("继承与原型链"),l(a)])])]),d])}const g=t(i,[["render",k],["__file","JS基础.html.vue"]]);export{g as default};
